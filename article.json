{"url_object_id": "104d59a019864897b6fa5022b135f05e", "title": ["Linux 内核 Git 历史记录中，最大最奇怪的提交信息是这样的"], "url": "http://blog.jobbole.com/114256/", "create_date": "2018/08/08", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1fu22uq61vrj20mr0d040p.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 2, "tags": "IT技术,Git,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/q3057027161\">可乐</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.destroyallsoftware.com/blog/2017/the-biggest-and-weirdest-commits-in-linux-kernel-git-history\">destroyallsoftware</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fu22uq61vrj20mr0d040p.jpg\" width=\"690\" height=\"394\"></p>\n<p>我们通常认为 git merges 有两个父节点。例如，由我写的最新的 Linux 内核合并操作是提交2c5d955,这是 4.10-rc6 版本发行前准备工作的一部分。它有两个父节点:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a5078b612613429\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n2c5d955 Merge branch 'parisc-4.10-3' of ...\r\n|\r\n*- 2ad5d52 parisc: Don't use BITS_PER_LONG in use ...\r\n*- 53cd1ad Merge branch 'i2c/for-current' of ...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5078b612613429-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5078b612613429-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5078b612613429-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5078b612613429-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a5078b612613429-1\"><span class=\"crayon-cn\">2c5d955</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Merge </span><span class=\"crayon-i\">branch</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'parisc-4.10-3'</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5078b612613429-2\"><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5078b612613429-3\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2ad5d52</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">parisc</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Don</span><span class=\"crayon-s\">'t use BITS_PER_LONG in use ...</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5078b612613429-4\"><span class=\"crayon-s\">*- 53cd1ad Merge branch '</span><span class=\"crayon-v\">i2c</span><span class=\"crayon-o\">/</span><span class=\"crayon-st\">for</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">current</span>'<span class=\"crayon-h\"> </span><span class=\"crayon-i\">of</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>Git 还支持章鱼式的合并，这意味着可以有超过两个父节点的合并。这对于我们那些从事小型项目开发的人来说，这似乎很奇怪：与三四个父节点合并会不会令人感到困惑？这得看情况而定。有时候，一个内核的维护者需要一次同时合并几十个单独的历史记录。一个接着一个的30个合并提交比起单独的一个30路(30个父节点)合并更加令人困惑，特别是当30路合并没有冲突的时候。</p>\n<p>章鱼式合并可能比你想象地更常见。在内核的提交历史记录中有649,306个提交。其中 46,930 (7.2%) 个提交是合并提交。在合并提交中，有 1,549 (3.3%) 是章鱼式合并。(截止到我当前的 git HEAD 指向的提交 566cf87 。)</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a50795555632828\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git log --oneline | wc -l\r\n   649306\r\n$ git log --oneline --merges | wc -l\r\n   46930\r\n$ git log --oneline --min-parents=3 | wc -l\r\n    1549</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50795555632828-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a50795555632828-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50795555632828-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a50795555632828-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50795555632828-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a50795555632828-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a50795555632828-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oneline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a50795555632828-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">649306</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a50795555632828-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oneline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">merges</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a50795555632828-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">46930</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a50795555632828-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oneline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">parents</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a50795555632828-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1549</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>作为比较，Rails 的所有提交中的 20% 是合并提交 (12,401/63,111),但没有一个章鱼式合并。Rails 大概更能代表一般的工程; 我认为大多数的 git 用户甚至都不知道章鱼式合并。</p>\n<p>现在，显而易见的问题是: 这些章鱼式合并的规模有多大？ 在这里每行开头的 “&gt;” 是续行符；这个命令写了总共5行。这篇文章中的所有命令都是我在做实验的时候输入到终端里面的，所以它们未必容易看懂。我对于结果更感兴趣，贴出代码只是为了满足那些好奇的人。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a50799434968897\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ (git log --min-parents=2 --pretty='format:%h %P' |\r\n&gt;  ruby -ne '/^(w+) (.*)$/ =~ $_; puts \"#{$2.split.count} #{$1}\"' |\r\n&gt;  sort -n |\r\n&gt;  tail -1)\r\n66 2cde51f</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50799434968897-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a50799434968897-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50799434968897-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a50799434968897-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a50799434968897-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a50799434968897-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">min</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">parents</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'format:%h %P'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a50799434968897-2\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">ruby</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">ne</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'/^(w+) (.*)$/ =~ $_; puts \"#{$2.split.count} #{$1}\"'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a50799434968897-3\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">sort</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a50799434968897-4\"><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\">  </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a50799434968897-5\"><span class=\"crayon-cn\">66</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2cde51f</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>66 个父节点！这么多的父节点，这个提交到底发生了什么？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a5079d966667124\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git log -1 2cde51f\r\ncommit 2cde51fbd0f310c8a2c5f977e665c0ac3945b46d\r\nMerge: 7471c5c c097d5f 74c375c 04c3a85 5095f55 4f53477\r\n2f54d2a 56d37d8 192043c f467a0f bbe5803 3990c51 d754fa9\r\n516ea4b 69ae848 25c1a63 f52c919 111bd7b aafa85e dd407a3\r\n71467e4 0f7f3d1 8778ac6 0406a40 308a0f3 2650bc4 8cb7a36\r\n323702b ef74940 3cec159 72aa62b 328089a 11db0da e1771bc\r\nf60e547 a010ff6 5e81543 58381da 626bcac 38136bd 06b2bd2\r\n8c5178f 8e6ad35 008ef94 f58c4fc4 2309d67 5c15371 b65ab73\r\n26090a8 9ea6fbc 2c48643 1769267 f3f9a60 f25cf34 3f30026\r\nfbbf7fe c3e8494 e40e0b5 50c9697 6358711 0112b62 a0a0591\r\nb888edb d44008b 9a199b8 784cbf8\r\nAuthor: Mark Brown &lt;[email redacted for privacy]&gt;\r\nDate:   Thu Jan 2 13:01:55 2014 +0000\r\n\r\n    Merge remote-tracking branches [65 remote branch names]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a5079d966667124-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a5079d966667124-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2cde51f</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-2\"><span class=\"crayon-i\">commit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2cde51fbd0f310c8a2c5f977e665c0ac3945b46d</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-3\"><span class=\"crayon-v\">Merge</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7471c5c</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">c097d5f</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">74c375c</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">04c3a85</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5095f55</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4f53477</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-4\"><span class=\"crayon-cn\">2f54d2a</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">56d37d8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">192043c</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f467a0f </span><span class=\"crayon-i\">bbe5803</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3990c51</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">d754fa9</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-5\"><span class=\"crayon-cn\">516ea4b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">69ae848</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25c1a63</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">f52c919</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">111bd7b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">aafa85e </span><span class=\"crayon-i\">dd407a3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-6\"><span class=\"crayon-cn\">71467e4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0f7f3d1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8778ac6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0406a40</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">308a0f3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2650bc4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8cb7a36</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-7\"><span class=\"crayon-cn\">323702b</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ef74940</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3cec159</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">72aa62b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">328089a</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11db0da</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">e1771bc</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-8\"><span class=\"crayon-e\">f60e547 </span><span class=\"crayon-i\">a010ff6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5e81543</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">58381da</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">626bcac</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">38136bd</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">06b2bd2</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-9\"><span class=\"crayon-cn\">8c5178f</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8e6ad35</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008ef94</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">f58c4fc4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2309d67</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5c15371</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b65ab73</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-10\"><span class=\"crayon-cn\">26090a8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9ea6fbc</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2c48643</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1769267</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">f3f9a60 </span><span class=\"crayon-i\">f25cf34</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3f30026</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-11\"><span class=\"crayon-e\">fbbf7fe </span><span class=\"crayon-e\">c3e8494 </span><span class=\"crayon-i\">e40e0b5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50c9697</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6358711</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0112b62</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a0a0591</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-12\"><span class=\"crayon-e\">b888edb </span><span class=\"crayon-i\">d44008b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9a199b8</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">784cbf8</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-13\"><span class=\"crayon-v\">Author</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Mark </span><span class=\"crayon-v\">Brown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-sy\">[</span><span class=\"crayon-e\">email </span><span class=\"crayon-e\">redacted </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">privacy</span><span class=\"crayon-sy\">]</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-14\"><span class=\"crayon-v\">Date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Thu </span><span class=\"crayon-i\">Jan</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2014</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0000</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a5079d966667124-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a5079d966667124-16\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">Merge </span><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">tracking </span><span class=\"crayon-i\">branches</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">65</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">remote </span><span class=\"crayon-e\">branch </span><span class=\"crayon-v\">names</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0039 seconds] -->\r\n<p>这让许多历史记录可视化工具都无法正常运行，引出了 Linus Torvalds 的一个<a href=\"http://marc.info/?l=linux-kernel&amp;m=139033182525831\">回应</a>:</p>\n<blockquote><p>我刚刚从 Takashi 那收到了一些消息，因此我看到了你的合并提交 2cde51fbd0f3 。这个提交有 66 个父节点。</p>\n<p>[…]</p>\n<p>它被拉取（pulled）了，并且状况良好，但显然它在 “章鱼式合并很好” 和 “上帝” 之间做到了平衡，这不是一个章鱼式合并，这是一个克苏鲁(一个章鱼头人神的巨人)式的合并。</p></blockquote>\n<p>正如我所看到的，这个有66个父节点的不同寻常的提交在某种程度上只是对于ASoc代码修改的正常合并。ASoc 代表了芯片上的ALSA系统。ALSA系统是音频子系统；“单片系统是集成在单片硅芯片上计算机的术语。综上所述，ASoc 是对嵌入式设备的声音支持系统。</p>\n<p>那么这样的合并多久会发生一次呢？永远都不会发生。规模排第二的合并是 fa623d1 ,它仅仅有 30 个父节点。然而，因为足够的背景知识，从 30 到 66 之间的巨大差距并不会令人感到惊讶。</p>\n<p>一次 git 提交的父节点的数量大概是一种单侧分布(通常非正式的说法是幂律分布，因为这里对这个不感兴趣，所以不必严格正确)。软件系统的许多属性都属于单侧分布。等一下；我将会生成一个图表来确定…(大量严格的图表确定了)。是的，它确实是单侧分布:</p>\n<p><img src=\"https://www.destroyallsoftware.com/images/blog/parents-per-commit-in-linux-kernel-log-log.svg\" alt=\"\"></p>\n<p>简单地说来, “单侧分布”意味着小事件比大事件多得多，而且大事件的最大规模是没有界限的。内核的提交历史中包含了 45,381 个两个父节点的合并，但仅仅有一个 66个父节点的合并。假如考虑足够多的开发历史记录的话，我们可能会看到多于66个父节点的合并。</p>\n<p>单个函数或是单个模块的代码行数也是单侧分布（大多数函数和模块都很小，但是其中一些很大；想想 web app 中的 “User” 类)。同样，对于模块的变化率（大多数模块都不会经常变动，只有其中一些会不断改动；再想想 “User” 类）。这些分布在软件开发中无处不在，而且经常在下面的双对数坐标图中呈直线分布。</p>\n<p>对于父节点的数量最大的提交，我们就讨论到这。那么在差异方面的合并又怎样呢？在差异方面，我的意思是被合并的两个分支之间的差异。我们可以通过简单地比较合并节点的父节点，然后统计它们差异的行数来衡量这一点。</p>\n<p>例如，如果一个分支一年前从 master 分支分离出去，改变了一行代码，之后被合并回 master 分支，在这段时间内对于 master 分支的所有修改都会被统计到，同样分离出去的分支上的改变也会被统计到。我们可以引出更直观的差异概念，但因为 git 不会保留分支的元数据，所以它们很难或者说是几乎不可能计算出来。</p>\n<p>在任何情况下，作为计算差异的起点，下面是最近内核合并的差异：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507a3592744970\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git diff $(git log --merges -1 --pretty='format:%P') | wc -l\r\n     173</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507a3592744970-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507a3592744970-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507a3592744970-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-i\">diff</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">merges</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">'format:%P'</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507a3592744970-2\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">173</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>在英语中，这个命令的含义是这样的：“比较最近合并的两个父节点，然后统计差异的行数。”为了找出差异最多的合并，我们可以遍历每个合并提交，用类似的方法统计差异的行数。然后，作为一个测试，我们将搜索所有合并中恰好有 2,000 行差异的分支。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507a6171693141\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ (git log --merges --pretty=\"%h\" |\r\n   while read x; do\r\n     echo \"$(git diff $(git log --pretty=%P $x -1) | wc -l)\" $x\r\n   done &gt; merges.txt)\r\n$ sort -n merges.txt | grep 'b2000b'\r\n    2000 3d6ce33\r\n    2000 7fedd7e\r\n    2000 f33f6f0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507a6171693141-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507a6171693141-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507a6171693141-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507a6171693141-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507a6171693141-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507a6171693141-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507a6171693141-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507a6171693141-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507a6171693141-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">merges</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"%h\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507a6171693141-2\"><span class=\"crayon-h\">   </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">read</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">do</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507a6171693141-3\"><span class=\"crayon-h\">     </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"$(git diff $(git log --pretty=%P $x -1) | wc -l)\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-i\">x</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507a6171693141-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-v\">done</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">merges</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507a6171693141-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sort</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">merges</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'b2000b'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507a6171693141-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3d6ce33</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507a6171693141-7\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7fedd7e</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507a6171693141-8\"><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">2000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f33f6f0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>（这个命令需要花费很长的时间运行: 我想大约需要12小时，尽管我已经减少了许多。）</p>\n<p>我认为合并的差异大小遵循单侧分布，就像父节点数量的统计一样。所以它应该在双对数坐标图表中显示为一条直线。让我检查一下….对了:</p>\n<p><img src=\"https://www.destroyallsoftware.com/images/blog/merges-per-diff-length-log-log.svg\" alt=\"\"></p>\n<p>我把差异的大小定在1000行左右(注：前面用2000行，得到的数据太少)，否则没有足够的样本来生成有效的曲线。</p>\n<p>右下角难看的原因部分是因为量化问题，另一部分是由于缺乏大量的提交导致样本数量较小，与之前的图表情况一样。</p>\n<p>现在，显而易见的问题是: 提交历史中差异最大的合并是哪个？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507aa022283523\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sort -n merges.txt | tail -1\r\n 22445760 f44dd18</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507aa022283523-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507aa022283523-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507aa022283523-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sort</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">n</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">merges</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">txt</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tail</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507aa022283523-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22445760</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f44dd18</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>22,445,760 行差异！这看起来根本不可能这么大-因为差异的行数比整个内核源代码的行数都大。</p>\n<p>Greg Kroah-Hartman 在2016年9月19做了这一提交，当时正处在 4.8-rc6 版本的开发期间。Greg 是 Linus Torvalds 的 “副官” 之一 – 他（Linus）最亲近，最值得信赖的开发者。简单地说，副官们构成了内核 pull request 树中的第一层。Greg 负责维护内核的稳定分支，驱动程序内核，USB 子系统和其他几个子系统。</p>\n<p>在更加仔细的研究这个合并之前，我们需要一点背景知识。通常我们把合并作为菱形分支模式（先分支，然后合并，见下图）的一部分:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507ae301344363\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n  A\r\n / \r\nB   C\r\n  /\r\n  D</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507ae301344363-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507ae301344363-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507ae301344363-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507ae301344363-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507ae301344363-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507ae301344363-1\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507ae301344363-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507ae301344363-3\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">C</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507ae301344363-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507ae301344363-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">D</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>在2014年，Greg 开始在一个新的仓库开发 Greybus (<a href=\"https://lwn.net/Articles/648400/\">移动设备总线</a>)，这就好像是他创建了一个全新的项目一样。最后，Greybus 的开发工作完成时，它就被合并到了内核中。但因为它是从一个崭新的仓库开始的，所以它和内核的中的其他源代码没有共同的历史记录。所以除了2005年我们公认的初始提交之外，这个合并为内核又添加了一个 “初始提交”。这个仓库现在有两条独立的初始提交，而不是通常的菱形分支模式：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507b1789120982\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n  A\r\n / \r\nB   C</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b1789120982-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b1789120982-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b1789120982-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b1789120982-1\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b1789120982-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b1789120982-3\"><span class=\"crayon-i\">B</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">C</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>通过查看合并提交的两个父节点中分别存在多少文件，我们可以看到一些蛛丝马迹:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507b4076780335\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git log -1 f44dd18 | grep 'Merge:'\r\nMerge: 9395452 7398a66\r\n$ git ls-tree -r 9395452 | wc -l\r\n   55499\r\n$ git ls-tree -r 7398a66 | wc -l\r\n     148</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b4076780335-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b4076780335-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b4076780335-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b4076780335-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b4076780335-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b4076780335-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b4076780335-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">f44dd18</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">grep</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'Merge:'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b4076780335-2\"><span class=\"crayon-v\">Merge</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9395452</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7398a66</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b4076780335-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9395452</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b4076780335-4\"><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">55499</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b4076780335-5\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">ls</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tree</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7398a66</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">l</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b4076780335-6\"><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">148</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>一条分支存在大量的文件，因为它包含了整个内核的源文件。而另一条仅仅包含了很少的文件，因为它包含的只是 Greybus 的历史记录。</p>\n<p>像章鱼式合并一样，这会让一些 git 用户感到奇怪。但是内核开发人员是专家级的 git 用户，并倾向于放弃使用这个功能，但绝对不是盲目的放弃</p>\n<p>最后一个问题:这种情况到底发生了多少次？内核中有多少独立的 “初始化” 提交？事实上是四次:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507b8333238773\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git log --max-parents=0 --pretty=\"format:%h %cd %s\" --date=short\r\na101ad9 2016-02-23 Share upstreaming patches\r\ncd26f1b 2014-08-11 greybus: Initial commit\r\nbe0e5c0 2007-01-26 Btrfs: Initial checkin, basic working tree code\r\n1da177e 2005-04-16 Linux-2.6.12-rc2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b8333238773-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b8333238773-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b8333238773-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507b8333238773-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507b8333238773-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b8333238773-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">log</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">max</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">parents</span><span class=\"crayon-o\">=</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">pretty</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"format:%h %cd %s\"</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">date</span><span class=\"crayon-o\">=</span><span class=\"crayon-t\">short</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b8333238773-2\"><span class=\"crayon-i\">a101ad9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Share </span><span class=\"crayon-e\">upstreaming </span><span class=\"crayon-e\">patches</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b8333238773-3\"><span class=\"crayon-i\">cd26f1b</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2014</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">08</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">greybus</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Initial </span><span class=\"crayon-e\">commit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507b8333238773-4\"><span class=\"crayon-i\">be0e5c0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2007</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">01</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">26</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Btrfs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Initial </span><span class=\"crayon-v\">checkin</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">basic </span><span class=\"crayon-e\">working </span><span class=\"crayon-e\">tree </span><span class=\"crayon-i\">code</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507b8333238773-5\"><span class=\"crayon-cn\">1da177e</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2005</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">04</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6.12</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rc2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>如果我们要画出这些提交，为了清楚起见，我们忽略所有其他的历史记录，如下图:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507bb584737833\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n566cf87 (the current HEAD)\r\n| | | |\r\n| | | *- a101ad9 Share upstreaming patches\r\n| | |\r\n| | *- cd26f1b greybus: Initial commit\r\n| |\r\n| *- be0e5c0 Btrfs: Initial checkin, basic working tree code\r\n|\r\n*- 1da177e Linux-2.6.12-rc2</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bb584737833-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bb584737833-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bb584737833-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bb584737833-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bb584737833-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bb584737833-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bb584737833-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bb584737833-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bb584737833-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bb584737833-1\"><span class=\"crayon-cn\">566cf87</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">the </span><span class=\"crayon-e\">current </span><span class=\"crayon-v\">HEAD</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bb584737833-2\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bb584737833-3\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">a101ad9 </span><span class=\"crayon-e\">Share </span><span class=\"crayon-e\">upstreaming </span><span class=\"crayon-v\">patches</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bb584737833-4\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bb584737833-5\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cd26f1b </span><span class=\"crayon-v\">greybus</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Initial </span><span class=\"crayon-v\">commit</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bb584737833-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bb584737833-7\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">be0e5c0 </span><span class=\"crayon-v\">Btrfs</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Initial </span><span class=\"crayon-v\">checkin</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">basic </span><span class=\"crayon-e\">working </span><span class=\"crayon-e\">tree </span><span class=\"crayon-v\">code</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bb584737833-8\"><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bb584737833-9\"><span class=\"crayon-o\">*</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1da177e</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Linux</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.6.12</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">rc2</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>这四个提交中的每一个都是离当前内核版本库 HEAD 节点很遥远的祖先节点，并且都没有父节点。从 git 的角度来看，内核历史“开始”了不同的四次，所有的这些提交最终都被合并在一起。</p>\n<p>这四个提交中的第一个（在我们输出的底部）是2005年的初始化提交，也就是我们通常认为的初始化提交。第二个是文件系统 btrfs 的开发，它是独立仓库完成的。第三个是 Greybus,同样也是独立仓库完成的，我们之前已经说过。</p>\n<p>第四个初始化提交，a101ad9，很奇怪，正如下面看到的:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507bf686453302\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git show --oneline --stat a101ad9\r\na101ad9 Share upstreaming patches\r\n README.md | 2 ++\r\n 1 file changed, 2 insertions(+)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bf686453302-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bf686453302-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507bf686453302-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507bf686453302-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bf686453302-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-v\">show</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">oneline</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">stat </span><span class=\"crayon-e\">a101ad9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bf686453302-2\"><span class=\"crayon-e\">a101ad9 </span><span class=\"crayon-e\">Share </span><span class=\"crayon-e\">upstreaming </span><span class=\"crayon-e\">patches</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507bf686453302-3\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">README</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">md</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">++</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507bf686453302-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">file </span><span class=\"crayon-v\">changed</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">insertions</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">+</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>它刚创建了一个 README.md 文件。但随后，它就立即被合并到正常的内核历史的提交 e5451c8 中了！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d33a507c2253504876\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ git show e5451c8\r\ncommit e5451c8f8330e03ad3cfa16048b4daf961af434f\r\nMerge: a101ad9 3cf42ef\r\nAuthor: Laxman Dewangan &lt;ldewangan@nvidia.com&gt;\r\nDate:   Tue Feb 23 19:37:08 2016 +0530</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507c2253504876-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507c2253504876-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507c2253504876-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d33a507c2253504876-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d33a507c2253504876-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d33a507c2253504876-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">git </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">e5451c8</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507c2253504876-2\"><span class=\"crayon-e\">commit </span><span class=\"crayon-e\">e5451c8f8330e03ad3cfa16048b4daf961af434f</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507c2253504876-3\"><span class=\"crayon-v\">Merge</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">a101ad9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3cf42ef</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d33a507c2253504876-4\"><span class=\"crayon-v\">Author</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Laxman </span><span class=\"crayon-v\">Dewangan</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">ldewangan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">nvidia</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">com</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d33a507c2253504876-5\"><span class=\"crayon-v\">Date</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">Tue </span><span class=\"crayon-i\">Feb</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">19</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2016</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-cn\">0530</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>为什么有人会创建一个只包含两行文本的 README 文件的初始化提交，然后立即合并到主线的历史记录中呢？我想不出任何理由，所以我怀疑这是一个意外！但它没有造成任何危害；它只是很奇怪。（更新：<a href=\"http://lkml.iu.edu/hypermail/linux/kernel/1603.2/01926.html\" target=\"_blank\">这是个意外</a>，Linus用他一贯的方式回应了。）</p>\n<p>顺便提一句，这也是历史记录中差异数量排第二的提交，仅仅因为它是一个不相关提交的合并，就像我们仔细研究过的 Greybus 的合并一样。</p>\n<p>现在你知道了：Linux 内核的 git 历史记录一些最奇怪的事情。一共有 1,549 个章鱼式合并，其中有一个是拥有 66 个父节点的提交。差异最多的合并有 22,445,760 行差异，尽管它有点技术性因为它和仓库的其他部分没有公共的历史记录。内核拥有四个独立的初始化提交，其中一个是失误导致的。尽管上面的这些都不会出现在绝大多数的 git 仓库中，但是所有的这些功能都是在 git 的设计范围之内的。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114256\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114256votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114256\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161\">可乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161\">\r\n\t\t\t<img src=\"http://q.qlogo.cn/qqapp/208656/19D693E8F32E174301CF7B140001AB0F/100\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            本科在读，对python,linux,安全很感兴趣，希望能够阅读国外最新的技术新闻，也希望能够翻译一些文章帮助到别人        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/q3057027161\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/q3057027161/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/q3057027161/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"我的网站\" target=\"_blank\" href=\"http://kele1997.xyz\"><i class=\"fa fa-link\"></i></a> <a title=\"QQ：2363618563\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：a2363618563\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/kele1997\"><i class=\"fa fa-github\"></i></a> <a title=\"Twitter主页\" target=\"_blank\" href=\"https://twitter.com/cocakele1997\"><i class=\"fa fa-twitter\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/2b02c513e245b35efef88916887d9097b0e8d4ee.jpg"}
{"url_object_id": "559175844b39683eecc1d47efb6692d4", "title": ["有效管理进程的 8 个 Linux 命令"], "url": "http://blog.jobbole.com/114393/", "create_date": "2018/09/18", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201809/16/225342dggc8idpid9mpp85.png"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://opensource.com/article/18/9/linux-commands-process-management\">Alan Formy-duval</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-10020-1.html\">Linux中国/heguangzhi</a>   </div><p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201809/16/225342dggc8idpid9mpp85.png\" alt=\"\"></p>\n<p>一般来说，应用程序进程的生命周期有三种主要状态：启动、运行和停止。如果我们想成为称职的管理员，每个状态都可以而且应该得到认真的管理。这八个命令可用于管理进程的整个生命周期。</p>\n<h3 id=\"toc_1\">启动进程</h3>\n<p>启动进程的最简单方法是在命令行中键入其名称，然后按回车键。如果要启动 Nginx web 服务器，请键入 <code>nginx</code> 。也许您只是想看看其版本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab4f351566110\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ nginx\r\n\r\nalan@workstation:~$ nginx -v\r\nnginx version: nginx/1.14.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab4f351566110-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab4f351566110-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab4f351566110-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab4f351566110-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab4f351566110-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab4f351566110-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab4f351566110-3\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab4f351566110-4\"><span class=\"crayon-e\">nginx </span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.14.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<h3 id=\"toc_2\">查看您的可执行路径</h3>\n<p>以上启动进程的演示是假设可执行文件位于您的可执行路径中。理解这个路径是可靠地启动和管理进程的关键。管理员通常会为他们想要的目的定制这条路径。您可以使用 <code>echo $PATH</code> 查看您的可执行路径。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab58897760941\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ echo $PATH\r\n/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab58897760941-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab58897760941-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab58897760941-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">PATH</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab58897760941-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h4 id=\"toc_3\">WHICH</h4>\n<p>使用 <code>which</code> 命令查看可执行文件的完整路径。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab5c836461171\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ which nginx\r\n/opt/nginx/bin/nginx</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab5c836461171-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab5c836461171-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab5c836461171-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">which </span><span class=\"crayon-v\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab5c836461171-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">opt</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>我将使用流行的 web 服务器软件 Nginx 作为我的例子。假设安装了 Nginx。如果执行 <code>which nginx</code> 的命令什么也不返回，那么是找不到 Nginx 了，因为它只搜索您指定的可执行路径。有三种方法可以补救一个进程不能简单地通过名字启动的情况。首先是键入完整路径 —— 虽然，我不情愿输入全部路径，您会吗？</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab60277928065\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ /home/alan/web/prod/nginx/sbin/nginx -v\r\nnginx version: nginx/1.14.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab60277928065-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab60277928065-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab60277928065-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab60277928065-2\"><span class=\"crayon-e\">nginx </span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.14.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>第二个解决方案是将应用程序安装在可执行文件路径中的目录中。然而，这有时可能是办不到的，特别是如果您没有 root 权限。</p>\n<p>第三个解决方案是更新您的可执行路径环境变量，包括要使用的特定应用程序的安装目录。这个解决方案是与 shell 相关的。例如，Bash 用户需要在他们的 <code>.bashrc</code> 文件中编辑 <code>PATH=</code> 行。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab64619711598\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nPATH=\"$HOME/web/prod/nginx/sbin:$PATH\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab64619711598-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab64619711598-1\"><span class=\"crayon-v\">PATH</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$HOME/web/prod/nginx/sbin:$PATH\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>现在，重复您的 <code>echo</code> 和 <code>which</code> 命令或者尝试检查版本。容易多了！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab67085117077\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ echo $PATH\r\n/home/alan/web/prod/nginx/sbin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin\r\n\r\nalan@workstation:~$ which nginx\r\n/home/alan/web/prod/nginx/sbin/nginx\r\n\r\nalan@workstation:~$ nginx -v                                                \r\nnginx version: nginx/1.14.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab67085117077-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab67085117077-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab67085117077-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab67085117077-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab67085117077-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab67085117077-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab67085117077-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab67085117077-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab67085117077-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">PATH</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab67085117077-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">local</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">bin</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab67085117077-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab67085117077-4\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">which </span><span class=\"crayon-v\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab67085117077-5\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab67085117077-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab67085117077-7\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">v</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab67085117077-8\"><span class=\"crayon-e\">nginx </span><span class=\"crayon-v\">version</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1.14.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p></p>\n<h3 id=\"toc_4\">保持进程运行</h3>\n<h4 id=\"toc_5\">NOHUP</h4>\n<p>注销或关闭终端时，进程可能不会继续运行。这种特殊情况可以通过在要使用 <code>nohup</code> 命令放在要运行的命令前面让进程持续运行。此外，附加一个<code>&amp;</code> 符号将会把进程发送到后台，并允许您继续使用终端。例如，假设您想运行 <code>myprogram.sh</code> 。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab6b435125863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnohup myprogram.sh &amp;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab6b435125863-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab6b435125863-1\"><span class=\"crayon-e\">nohup </span><span class=\"crayon-v\">myprogram</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sh</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><code>nohup</code> 会返回运行进程的 PID。接下来我会更多地谈论 PID。</p>\n<h3 id=\"toc_6\">管理正在运行的进程</h3>\n<p>每个进程都有一个唯一的进程标识号 (PID) 。这个数字是我们用来管理每个进程的。我们还可以使用进程名称，我将在下面演示。有几个命令可以检查正在运行的进程的状态。让我们快速看看这些命令。</p>\n<h4 id=\"toc_7\">PS</h4>\n<p>最常见的是 <code>ps</code> 命令。<code>ps</code> 的默认输出是当前终端中运行的进程的简单列表。如下所示，第一列包含 PID。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab6e668806365\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ ps\r\nPID TTY          TIME CMD\r\n23989 pts/0    00:00:00 bash\r\n24148 pts/0    00:00:00 ps</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab6e668806365-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab6e668806365-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab6e668806365-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab6e668806365-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab6e668806365-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ps</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab6e668806365-2\"><span class=\"crayon-e\">PID </span><span class=\"crayon-i\">TTY</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-e\">TIME </span><span class=\"crayon-i\">CMD</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab6e668806365-3\"><span class=\"crayon-cn\">23989</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab6e668806365-4\"><span class=\"crayon-cn\">24148</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>我想看看我之前启动的 Nginx 进程。为此，我告诉 <code>ps</code> 给我展示每一个正在运行的进程（<code>-e</code>）和完整的列表（<code>-f</code>）。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab71183225819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ ps -ef\r\nUID        PID  PPID  C STIME TTY          TIME CMD\r\nroot         1     0  0 Aug18 ?        00:00:10 /sbin/init splash\r\nroot         2     0  0 Aug18 ?        00:00:00 [kthreadd]\r\nroot         4     2  0 Aug18 ?        00:00:00 [kworker/0:0H]\r\nroot         6     2  0 Aug18 ?        00:00:00 [mm_percpu_wq]\r\nroot         7     2  0 Aug18 ?        00:00:00 [ksoftirqd/0]\r\nroot         8     2  0 Aug18 ?        00:00:20 [rcu_sched]\r\nroot         9     2  0 Aug18 ?        00:00:00 [rcu_bh]\r\nroot        10     2  0 Aug18 ?        00:00:00 [migration/0]\r\nroot        11     2  0 Aug18 ?        00:00:00 [watchdog/0]\r\nroot        12     2  0 Aug18 ?        00:00:00 [cpuhp/0]\r\nroot        13     2  0 Aug18 ?        00:00:00 [cpuhp/1]\r\nroot        14     2  0 Aug18 ?        00:00:00 [watchdog/1]\r\nroot        15     2  0 Aug18 ?        00:00:00 [migration/1]\r\nroot        16     2  0 Aug18 ?        00:00:00 [ksoftirqd/1]\r\nalan     20506 20496  0 10:39 pts/0    00:00:00 bash\r\nalan     20520  1454  0 10:39 ?        00:00:00 nginx: master process nginx\r\nalan     20521 20520  0 10:39 ?        00:00:00 nginx: worker process\r\nalan     20526 20506  0 10:39 pts/0    00:00:00 man ps\r\nalan     20536 20526  0 10:39 pts/0    00:00:00 pager\r\nalan     20564 20496  0 10:40 pts/1    00:00:00 bash</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab71183225819-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab71183225819-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">ef</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-2\"><span class=\"crayon-i\">UID</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PID</span><span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PPID</span><span class=\"crayon-h\"> </span> <span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">STIME </span><span class=\"crayon-i\">TTY</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-e\">TIME </span><span class=\"crayon-e\">CMD</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-3\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">init </span><span class=\"crayon-e\">splash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-4\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">kthreadd</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-5\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-6\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">mm_percpu_wq</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-7\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-8\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">rcu_sched</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-9\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">rcu_bh</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-10\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">10</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">migration</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-11\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">watchdog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-12\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cpuhp</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-13\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">13</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">cpuhp</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-14\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">14</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">watchdog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-15\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">migration</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-16\"><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Aug18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-17\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20506</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20496</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">bash</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-18\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20520</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1454</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-e\">process </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-19\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20521</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20520</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-e\">process</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-20\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20526</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20506</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">man </span><span class=\"crayon-e\">ps</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab71183225819-21\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20536</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20526</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pager</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab71183225819-22\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20564</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20496</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bash</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0126 seconds] -->\r\n<p>您可以在上面 <code>ps</code> 命令的输出中看到 Nginx 进程。这个命令显示了将近 300 行，但是我在这个例子中缩短了它。可以想象，试图处理 300 行过程信息有点混乱。我们可以将这个输出输送到 <code>grep</code>，过滤一下仅显示 nginx。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab77739418545\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ ps -ef |grep nginx\r\nalan     20520  1454  0 10:39 ?        00:00:00 nginx: master process nginx\r\nalan     20521 20520  0 10:39 ?        00:00:00 nginx: worker process</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab77739418545-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab77739418545-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab77739418545-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab77739418545-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab77739418545-2\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20520</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1454</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-e\">process </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab77739418545-3\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20521</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20520</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">39</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-v\">process</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>确实更好了。我们可以很快看到，Nginx 有 20520 和 20521 的 PID。</p>\n<h4 id=\"toc_8\">PGREP</h4>\n<p><code>pgrep</code> 命令更加简化单独调用 <code>grep</code> 遇到的问题。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab7a312020535\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pgrep nginx\r\n20520\r\n20521</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab7a312020535-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab7a312020535-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab7a312020535-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab7a312020535-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pgrep </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab7a312020535-2\"><span class=\"crayon-cn\">20520</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab7a312020535-3\"><span class=\"crayon-cn\">20521</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>假设您在一个托管环境中，多个用户正在运行几个不同的 Nginx 实例。您可以使用 <code>-u</code> 选项将其他人排除在输出之外。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab7d792099991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pgrep -u alan nginx\r\n20520\r\n20521</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab7d792099991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab7d792099991-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab7d792099991-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab7d792099991-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">u</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">alan </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab7d792099991-2\"><span class=\"crayon-cn\">20520</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab7d792099991-3\"><span class=\"crayon-cn\">20521</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h4 id=\"toc_9\">PIDOF</h4>\n<p>另一个好用的是 <code>pidof</code>。此命令将检查特定二进制文件的 PID，即使另一个同名进程正在运行。为了建立一个例子，我将我的 Nginx 复制到第二个目录，并以相应的路径前缀启动。在现实生活中，这个实例可能位于不同的位置，例如由不同用户拥有的目录。如果我运行两个 Nginx 实例，则<code>pidof</code> 输出显示它们的所有进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab81526999277\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ ps -ef |grep nginx\r\nalan     20881  1454  0 11:18 ?        00:00:00 nginx: master process ./nginx -p /home/alan/web/prod/nginxsec\r\nalan     20882 20881  0 11:18 ?        00:00:00 nginx: worker process\r\nalan     20895  1454  0 11:19 ?        00:00:00 nginx: master process nginx\r\nalan     20896 20895  0 11:19 ?        00:00:00 nginx: worker process</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab81526999277-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab81526999277-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab81526999277-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab81526999277-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab81526999277-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab81526999277-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ps</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ef</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-e\">grep </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab81526999277-2\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20881</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1454</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-i\">process</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">nginxsec</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab81526999277-3\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20882</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20881</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-e\">process</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab81526999277-4\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20895</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1454</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-e\">process </span><span class=\"crayon-e\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab81526999277-5\"><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20896</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20895</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-v\">process</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>使用 <code>grep</code> 或 <code>pgrep</code> 将显示 PID 数字，但我们可能无法辨别哪个实例是哪个。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab84527998452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pgrep nginx\r\n20881\r\n20882\r\n20895\r\n20896</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab84527998452-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab84527998452-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab84527998452-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab84527998452-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab84527998452-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab84527998452-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pgrep </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab84527998452-2\"><span class=\"crayon-cn\">20881</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab84527998452-3\"><span class=\"crayon-cn\">20882</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab84527998452-4\"><span class=\"crayon-cn\">20895</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab84527998452-5\"><span class=\"crayon-cn\">20896</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p><code>pidof</code> 命令可用于确定每个特定 Nginx 实例的 PID。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab87336163694\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pidof /home/alan/web/prod/nginxsec/sbin/nginx\r\n20882 20881\r\n\r\nalan@workstation:~$ pidof /home/alan/web/prod/nginx/sbin/nginx\r\n20896 20895</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab87336163694-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab87336163694-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab87336163694-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab87336163694-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab87336163694-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab87336163694-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pidof</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginxsec</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab87336163694-2\"><span class=\"crayon-cn\">20882</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20881</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab87336163694-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab87336163694-4\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pidof</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab87336163694-5\"><span class=\"crayon-cn\">20896</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20895</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p>\n<h4 id=\"toc_10\">TOP</h4>\n<p><code>top</code> 命令已经有很久的历史了，对于查看运行进程的细节和快速识别内存消耗等问题是非常有用的。其默认视图如下所示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab8a634343033\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntop - 11:56:28 up 1 day, 13:37,  1 user,  load average: 0.09, 0.04, 0.03\r\nTasks: 292 total,   3 running, 225 sleeping,   0 stopped,   0 zombie\r\n%Cpu(s):  0.1 us,  0.2 sy,  0.0 ni, 99.7 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\r\nKiB Mem : 16387132 total, 10854648 free,  1859036 used,  3673448 buff/cache\r\nKiB Swap:        0 total,        0 free,        0 used. 14176540 avail Mem\r\n\r\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\r\n17270 alan      20   0 3930764 247288  98992 R   0.7  1.5   5:58.22 gnome-shell\r\n20496 alan      20   0  816144  45416  29844 S   0.5  0.3   0:22.16 gnome-terminal-\r\n21110 alan      20   0   41940   3988   3188 R   0.1  0.0   0:00.17 top\r\n    1 root      20   0  225564   9416   6768 S   0.0  0.1   0:10.72 systemd\r\n    2 root      20   0       0      0      0 S   0.0  0.0   0:00.01 kthreadd\r\n    4 root       0 -20       0      0      0 I   0.0  0.0   0:00.00 kworker/0:0H\r\n    6 root       0 -20       0      0      0 I   0.0  0.0   0:00.00 mm_percpu_wq\r\n    7 root      20   0       0      0      0 S   0.0  0.0   0:00.08 ksoftirqd/0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8a634343033-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8a634343033-16\">16</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-1\"><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">56</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">day</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">37</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-2\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">292</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">225</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zombie</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-3\"><span class=\"crayon-ta\">%</span><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99.7</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-5\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Mem</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16387132</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10854648</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1859036</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">3673448</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buff</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-6\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14176540</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avail </span><span class=\"crayon-i\">Mem</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-7\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-8\"> <span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-i\">USER</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PR</span><span class=\"crayon-h\"> </span> <span class=\"crayon-i\">NI</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">VIRT</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">RES</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">SHR</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-o\">%</span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">MEM</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMAND</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-9\"><span class=\"crayon-cn\">17270</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3930764</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">247288</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">98992</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.7</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1.5</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58.22</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">shell</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-10\"><span class=\"crayon-cn\">20496</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">816144</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">45416</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">29844</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.5</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.3</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">22.16</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">gnome</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">terminal</span><span class=\"crayon-o\">-</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-11\"><span class=\"crayon-cn\">21110</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">41940</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3988</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3188</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">R</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.17</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">top</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-12\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">225564</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9416</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6768</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.1</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10.72</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">systemd</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-13\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">kthreadd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-14\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kworker</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">0H</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8a634343033-15\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">I</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">mm_percpu</span><span class=\"crayon-sy\">_</span>wq</div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8a634343033-16\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">root</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.08</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0141 seconds] -->\r\n<p>可以通过键入字母 <code>s</code> 和您喜欢的更新秒数来更改更新间隔。为了更容易监控我们的示例 Nginx 进程，我们可以使用 <code>-p</code> 选项并传递 PID 来调用 <code>top</code>。这个输出要干净得多。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab8e358270280\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ top -p20881 -p20882 -p20895 -p20896\r\n\r\nTasks:   4 total,   0 running,   4 sleeping,   0 stopped,   0 zombie\r\n%Cpu(s):  2.8 us,  1.3 sy,  0.0 ni, 95.9 id,  0.0 wa,  0.0 hi,  0.0 si,  0.0 st\r\nKiB Mem : 16387132 total, 10856008 free,  1857648 used,  3673476 buff/cache\r\nKiB Swap:        0 total,        0 free,        0 used. 14177928 avail Mem\r\n\r\n  PID USER      PR  NI    VIRT    RES    SHR S  %CPU %MEM     TIME+ COMMAND\r\n20881 alan      20   0   12016    348      0 S   0.0  0.0   0:00.00 nginx\r\n20882 alan      20   0   12460   1644    932 S   0.0  0.0   0:00.00 nginx\r\n20895 alan      20   0   12016    352      0 S   0.0  0.0   0:00.00 nginx\r\n20896 alan      20   0   12460   1628    912 S   0.0  0.0   0:00.00 nginx</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab8e358270280-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab8e358270280-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">top</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p20881</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p20882</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p20895</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">p20896</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-3\"><span class=\"crayon-v\">Tasks</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">running</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sleeping</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stopped</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zombie</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-4\"><span class=\"crayon-ta\">%</span><span class=\"crayon-e\">Cpu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">s</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">2.8</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">us</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1.3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ni</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.9</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">wa</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">hi</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">si</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-6\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Mem</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16387132</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10856008</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">1857648</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">3673476</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buff</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">cache</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-7\"><span class=\"crayon-e\">KiB </span><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">total</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">free</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">used</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14177928</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">avail </span><span class=\"crayon-i\">Mem</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-9\"> <span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-i\">USER</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">PR</span><span class=\"crayon-h\"> </span> <span class=\"crayon-i\">NI</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">VIRT</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">RES</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-i\">SHR</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-o\">%</span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">MEM</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-v\">TIME</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">COMMAND</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-10\"><span class=\"crayon-cn\">20881</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12016</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">348</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-11\"><span class=\"crayon-cn\">20882</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12460</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1644</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">932</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab8e358270280-12\"><span class=\"crayon-cn\">20895</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12016</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">352</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab8e358270280-13\"><span class=\"crayon-cn\">20896</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">alan</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12460</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1628</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">912</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">0.0</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0072 seconds] -->\r\n<p>在管理进程，特别是终止进程时，正确确定 PID 是非常重要。此外，如果以这种方式使用 <code>top</code>，每当这些进程中的一个停止或一个新进程开始时，<code>top</code> 都需要被告知有新的进程。</p>\n<h3 id=\"toc_11\">终止进程</h3>\n<h4 id=\"toc_12\">KILL</h4>\n<p>有趣的是，没有 <code>stop</code> 命令。在 Linux 中，有 <code>kill</code> 命令。<code>kill</code> 用于向进程发送信号。最常用的信号是“终止”（<code>SIGTERM</code>）或“杀死”（<code>SIGKILL</code>）。然而，还有更多。下面是一些例子。完整的列表可以用 <code>kill -L</code> 显示。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab92339470047\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n 1) SIGHUP       2) SIGINT       3) SIGQUIT      4) SIGILL       5) SIGTRAP\r\n 6) SIGABRT      7) SIGBUS       8) SIGFPE       9) SIGKILL     10) SIGUSR1\r\n11) SIGSEGV     12) SIGUSR2     13) SIGPIPE     14) SIGALRM     15) SIGTERM\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab92339470047-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab92339470047-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab92339470047-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab92339470047-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab92339470047-1\"> <span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGHUP</span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGINT</span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGQUIT</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGILL</span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGTRAP</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab92339470047-2\"> <span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGABRT</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">7</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGBUS</span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">8</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGFPE</span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGKILL</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGUSR1</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab92339470047-3\"><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGSEGV</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGUSR2</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGPIPE</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGALRM</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span><span class=\"crayon-cn\">15</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SIGTERM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab92339470047-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>注意第 9 号信号是 <code>SIGKILL</code>，通常，我们会发出比如 <code>kill -9 20896</code> 这样的命令。默认信号是 15，这是 <code>SIGTERM</code>。请记住，许多应用程序都有自己的停止方法。Nginx 使用 <code>-s</code> 选项传递信号，如 <code>stop</code> 或 <code>reload</code>。通常，我更喜欢使用应用程序的特定方法来停止操作。然而，我将演示用 <code>kill</code> 命令来停止 Nginx 进程 20896，然后用 <code>pgrep</code> 确认它已经停止。PID 20896 就不再出现。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab96055666538\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ kill -9 20896\r\n \r\nalan@workstation:~$ pgrep nginx\r\n20881\r\n20882\r\n20895\r\n22123</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab96055666538-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab96055666538-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab96055666538-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab96055666538-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab96055666538-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab96055666538-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab96055666538-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab96055666538-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">9</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20896</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab96055666538-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab96055666538-3\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">pgrep </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab96055666538-4\"><span class=\"crayon-cn\">20881</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab96055666538-5\"><span class=\"crayon-cn\">20882</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab96055666538-6\"><span class=\"crayon-cn\">20895</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab96055666538-7\"><span class=\"crayon-cn\">22123</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<h4 id=\"toc_13\">PKILL</h4>\n<p>命令 <code>pkill</code> 类似于 <code>pgrep</code>，因为它可以按名称搜索。这意味着在使用 <code>pkill</code> 时必须非常小心。在我的 Nginx 示例中，如果我只想杀死一个 Nginx 实例，我可能不会选择使用它。我可以将 Nginx 选项 <code>-s stop</code> 传递给特定的实例来消除它，或者我需要使用 <code>grep</code> 来过滤整个 <code>ps</code> 输出。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab99874490271\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n/home/alan/web/prod/nginx/sbin/nginx -s stop\r\n/home/alan/web/prod/nginxsec/sbin/nginx -s stop</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab99874490271-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab99874490271-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab99874490271-1\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span> <span class=\"crayon-v\">stop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab99874490271-2\"><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginxsec</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">sbin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">stop</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>如果我想使用 <code>pkill</code>，我可以包括 <code>-f</code> 选项，让 <code>pkill</code> 过滤整个命令行参数。这当然也适用于 <code>pgrep</code>。所以，在执行 <code>pkill -f</code> 之前，首先我可以用 <code>pgrep -a</code> 确认一下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115ab9d864628457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pgrep -a nginx\r\n20881 nginx: master process ./nginx -p /home/alan/web/prod/nginxsec\r\n20882 nginx: worker process\r\n20895 nginx: master process nginx\r\n20896 nginx: worker process</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab9d864628457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab9d864628457-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab9d864628457-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115ab9d864628457-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115ab9d864628457-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab9d864628457-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab9d864628457-2\"><span class=\"crayon-cn\">20881</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-i\">process</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">nginx</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">p</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">home</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">alan</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">web</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">prod</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">nginxsec</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab9d864628457-3\"><span class=\"crayon-cn\">20882</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-i\">process</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115ab9d864628457-4\"><span class=\"crayon-cn\">20895</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">master </span><span class=\"crayon-e\">process </span><span class=\"crayon-i\">nginx</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115ab9d864628457-5\"><span class=\"crayon-cn\">20896</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginx</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">worker </span><span class=\"crayon-v\">process</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p>我也可以用 <code>pgrep -f</code> 缩小我的结果。<code>pkill</code> 使用相同参数会停止该进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c1115aba0289653017\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nalan@workstation:~$ pgrep -f nginxsec\r\n20881\r\n                                           \r\nalan@workstation:~$ pkill -f nginxsec</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115aba0289653017-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115aba0289653017-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c1115aba0289653017-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c1115aba0289653017-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c1115aba0289653017-1\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pgrep</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nginxsec</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115aba0289653017-2\"><span class=\"crayon-cn\">20881</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c1115aba0289653017-3\"> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c1115aba0289653017-4\"><span class=\"crayon-v\">alan</span><span class=\"crayon-sy\">@</span><span class=\"crayon-v\">workstation</span><span class=\"crayon-o\">:</span><span class=\"crayon-o\">~</span><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pkill</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nginxsec</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><code>pgrep</code>（尤其是 <code>pkill</code>）要记住的关键点是，您必须始终确保搜索结果准确性，这样您就不会无意中影响到错误的进程。</p>\n<p>大多数这些命令都有许多命令行选项，所以我总是建议阅读每一个命令的 <a href=\"https://www.kernel.org/doc/man-pages/\">man 手册页</a>。虽然大多数这些命令都存在于 Linux、Solaris 和 BSD 等平台上，但也有一些不同之处。在命令行工作或编写脚本时，始终测试并随时准备根据需要进行更正。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114393\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114393votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114393\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a7d253575f9f762a527f2b1b405c8e65cae34fe9.jpg"}
{"url_object_id": "7eac33cc1db7f0b9050885470a418bae", "title": ["2 年面试 900 多位工程师后，我总结了这些经验"], "url": "http://blog.jobbole.com/114168/", "create_date": "2018/08/08", "front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fstj3g5udqj20gh0b4wi2.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 4, "tags": "职场,面试", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/dimple11\">dimple11</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://blog.triplebyte.com/how-to-interview-engineers\">Ammon Bartram</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>我们在 Triplebyte上进行过很多场面试，实际上，我在过去两年内面试的工程师已经达到 900 余人，这到底算不算卓有成效还真是不好说！（有时我会冒着一身冷汗从梦中惊醒，对这一点充满质疑）。但是不管怎样，我们目标是改进应聘工程师的方式。为此，我们面试时不看求职者的背景，不在乎他们的文凭或简历，只关注他们的编程能力。一个工程师通过了我们这一关后，能直接到我们的合作方公司（包括 Apple、Facebook、Dropbox 和 Stripe）进行终面。我们面试时不知道应聘者的背景，这种情况下看他们是如何在众多顶尖科技公司前大展身手的，我觉得可以给我们的面试提供一些最佳的可用资料。</p>\n<blockquote><p>伯乐在线补注：Triplebyte 是国外一家专注工程师招聘的网站。</p></blockquote>\n<p>在这篇博客中，我要讲讲迄今为止我从这些资料中所学到的东西。技术面试在很多方面都是漏洞百出的，这一点口头说说很简单（而且许多博客都只是这样说说而已！），难的是想出实际的解决方法。我写这篇博客就是为了迎接这个挑战，并为招聘经理和 CTO 提供一些具体的建议。面试这件事有难度，但我想只要遵循一套缜密的流程，那么许多问题都会迎刃而解。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fstj3g5udqj20gh0b4wi2.jpg\"></p>\n<h2>现状</h2>\n<p>大多数的面试过程主要包括两步：</p>\n<ol>\n<li>简历筛选</li>\n<li>面试</li>\n</ol>\n<p>对求职者的筛选就是为了提前淘汰一些求职申请者，节省面试工作的时间。通常筛选过程包括：招聘官大体浏览求职申请者的简历（大概用时 10 秒以内），然后进行 30~60 分钟的电话面试。我们的合作方公司中有 18% 的公司为了考验求职者，也会出编程题让他们回家完成（要么代替电话面试，要么作为电话面试以外的附加题）。有意思的是，绝大多数的求职申请者都是在筛选这一关被拒的。真是这样，我们合作的所有公司中，单纯因为简历就被筛掉的求职申请者已超过了 50%，另外有 30% 因为电话面试/带回家的项目完成不佳而被刷掉。筛选也是聘用过程最变化无常捉摸不定的环节，应聘者太多，导致招聘人员应接不暇，只能做出仓促的决定，因此这时候求职者的文凭资历和专业匹配度就派上了用场。</p>\n<p>终面几乎普遍都是由一系列 45 分钟到 1 小时的会谈组成，每次会谈的面试官都不一样，会谈主要考技术题（每个公司外加一两个针对文化适应和软技能的问题）。招聘经理和每个面试官会在求职申请者离开后，在决策会议上做出他们最终录用/淘汰的决定。在至少有一人力挺，且没人强烈反对的情况下，一个求职申请者才可能被录用。</p>\n<p>终面除了常见的形式之外，还有各种千变万化的类型。</p>\n<ul>\n<li>我们合作的公司中，39% 会使用白板面试。</li>\n<li>有 52% 允许求职者使用他们自己的电脑作答（剩下的 9% 视情况而定）。</li>\n<li>有 55% 让面试官随意提问（剩下的 45% 采用一套标准面试题）。</li>\n<li>有 40% 要考察求职者的 CS 学术技能后，才能确定去或留。</li>\n<li>有 15% 不喜欢 CS 学术技能（而且觉得探讨计算机科学只能暴露该求职者生产力低）。</li>\n<li>有 80% 允许求职申请者在面试时使用任何编程语言（剩下的20%要求他们使用特定编程语言）。</li>\n<li>有 5% 会在面试过程中直白地评价求职者编程语言的细节。</li>\n</ul>\n<p><img src=\"https://phaven-prod.s3.amazonaws.com/files/image_part/asset/1897004/GEXLppDgnswH2dd_djp4sWvsnQA/medium_light_v2.png\"></p>\n<p>放眼所有与我们合作的公司，终面后决定录用的占 22%。（这个数据是通过询问公司内部招聘渠道获得的。Triplebyte 上的求职者通过公司面试被录用的成功率为 53%。）其中大概 65% 会接受 offer（达成雇佣关系）。一年后，公司对录用了 30%、开除率 5% 的情况非常满意。</p>\n<h2>漏招 VS 误招</h2>\n<p>所以，现在的面试存在什么问题呢？毕竟开除员工的频率并非是不可控的。为了更清楚地看待这个问题，我们需要考虑导致面试失败的两种情况：</p>\n<ol>\n<li>面试了一个不合格的工程师，却将其聘用，过后只好开除（误招）；</li>\n<li>面试了一个工作能力很强的工程师，却认为他不合格，选择不予聘用（漏招）。</li>\n</ol>\n<p>误招一眼就能看出来，公司会（在薪水、管理成本和全团队的精神面貌上）付出很大代价，会把一个团队搞得萎靡不振。而与之对比，漏招的损失却看不出来。虽然以上任意一种情况都很有问题，但由于这误招和漏招引发的后果乍一看很不平衡，所以公司的面试很大程度上倾向于不予聘用。</p>\n<p>面试中存在的干扰会使公司不予聘用的倾向更加严重。在一小时内评估一个人的编程能力本来就是很难的，各种条件经历的匹配、某些直觉感受和以上谈到的公司的复杂喜好等因素掺杂进来，使得你在面试别人时被各种干扰团团围困。</p>\n<p>为了在受干扰环境下把误招率控制在一个较低的水平，公司在招聘时越来越偏向于不予聘用。这样会错过优秀的工程师，会使文凭的重要程度高过实力，也会由于反复无常，使参与其中的人（面试官和求职者等）感到失望。<strong><b>假使你公司中的每个员工为了争取他们当前的职位都得重新参加面试，那么通过率能有多大呢？</b></strong>这个问题很骇人，几乎可以确定他们不可能都被录取。求职申请人会因为本有能力为公司好好效力却没被录用而神伤，公司也会因为找不到可用之才而遭受损失。</p>\n<p>要澄清一点，我不是说公司应该降低面试的门槛，相反，面试招人正因为会有拒绝才存在的意义！我更不是说公司对误招的担忧远大过漏招是不对的，招错人要付出高昂代价，<strong><b>我想说的是：各种干扰信号的影响外加之对于</b></strong><strong><b>误招</b></strong><strong><b>的防范，会导致</b></strong><strong><b>面试的漏招率大大攀升，导致人才流失。为解决这一问题，就需要</b></strong><strong><b>改善面试环境</b></strong><strong><b>。</b></strong></p>\n<h2>减少面试中干扰因素的具体方法</h2>\n<h3>1.决定你想要招聘哪方面的技术人才</h3>\n<p>一个程序员不可能因为具备了哪一套技能就能被定义为优秀的程序员了，相反，世上的编程技能多得犹如汪洋大海，没有工程师能在所有的领域都游刃有余。实际上，我们在 Triplebyte上碰到过一些杰出、成功的软件工程师，他们在几个毫不相关的领域都颇有建树。面试成功的第一步就是决定你想要招聘哪方面的技术人才。我建议你问自己以下几个问题：</p>\n<ul>\n<li>你想要的程序员是效率高，但写的代码不完善需反复修改的，还是一丝不苟、思维严密的？</li>\n<li>你想要的程序员是热衷于解决技术难题的还是构建产品的？</li>\n<li>你想要已经具备某种特定技能的人才还是在工作中有很强的学习能力的？</li>\n<li>计算机科学学术/数学/算法方面的能力是至关重要的还是无关紧要的？</li>\n<li>了解并发/ C内存模型/ HTTP 很重要吗？</li>\n</ul>\n<p>这些问题没有正确答案，我们合作的成功企业对以上每个问题选任一方的都有。<strong><b>但关键是要根据自己的需求</b></strong><strong><b>有针对性地做出选择</b></strong><strong><b>，应该避免</b></strong><strong><b>随便向求职者抛个</b></strong><strong><b>面试</b></strong><strong><b>问题了事（或者让</b></strong><strong><b>每个</b></strong><strong><b>面试官决定）。</b></strong>这样的话，公司的工程文化就会有一定倾向：淘汰掉越来越多虽然有一技之长但是对公司并没太大用处的、以及不具备公司所需技能（却具备其他重要技能）的工程师。</p>\n<h3>2.问尽可能和实际工作相贴切的问题</h3>\n<p>专业程序员的任务是花数周数月的时间解决大型的、错杂延展的问题，但是面试官并没有数周数月的时间去评估求职申请者的能力，通常每个面试官只有一个小时去考核，所以他们会转而去考察求职申请者在强压下迅速解决小问题的能力。这是两种不同的能力测试。二者有一定的相关性（面试并不完全随机），但并不是完全相关。制定面试问题的一大目标就是减少面试考察和实际工作的差异。</p>\n<p>方法是在面试时向申请某一职位的求职者（或者为了衡量某一技能）问尽可能相似的问题。比如说，如果你关心后端编程，那就让求职申请者建一个简单的 API 端点，再添加特性，几乎可以肯定，这比让他们解决一个 BFS 词链问题有意义得多；如果你关心算法能力，那让求职者在问题中运用算法（比方说，建一个简单的搜索索引，可能使用 BST 和 hashmap，实现提升删除操作的性能），几乎可以肯定，这比让他们确定一点是否包含在一个凹多边形中有意义得多；让求职者在实际编程过程中去尝试调试程序，几乎可以肯定，这比让他们去解决一个白板上的小问题有意义得多。</p>\n<p>即便如此，面试中要不要让程序员在白板上作答还是有争议的。作为面试官，我不在乎工程师是否记住了 Python 中的 itertools 模块，我在乎的是他们是否想通了如何用 itertools 模块去解决问题。通过让他们在白板上答题，他们便可以不用遵循严格的编程语法，而完全专注于逻辑问题。但最终白板答题的提议还是行不通，因为白板上答案的形式五花八门，没有那么多的评判标准可以对它们一一进行对错评判。所以让求职申请者们回归到电脑上编程，同时告诉他们不必真正去运行代码（或者采用更好的方法，进行开卷面试，让他们在 Google 上查询任何所需的信息），那么考察他们的目的就已经达到了。</p>\n<p>面试问题应该对日后工作有所反应，对此要特别警告，面试不依赖于外部因素是至关重要的。比如说，让一个求职者用 Ruby 编写一个简单的爬虫看似是个很好的实际问题，但是，如果求职者为此需要先安装 Nokogiri （一个安装起来非常费劲的 Ruby 解析库），结果花了 30 分钟绞尽脑汁应对本地扩展，那么这次面试就糟透了，不仅浪费了时间，而且也让求职者一下子压力爆棚。</p>\n<h3>3.问不会提前泄露的多面性问题</h3>\n<p>另一个针对面试提问的经验之谈是避免提问有可能会“泄露”出去的问题。比如说，有些问题的某些信息可能求职申请者提前能从 Glassdoor 上读到，所以他们回答起来就会轻而易举，因此这类问题就要避免提问，否则求职者明显就不用动脑筋了，也抹杀了需要考验他们直觉洞察力的地方。而且除此之外，也意味着面试的问题应该由一系列相互承载的部分组成，而不是一个单一的中心。换种有用的方式去想，问问你自己，能不能在面试时帮助一个陷于困境的求职者，并让他在面试结束还能给大家留下一个不错的印象。对答案唯一的问题，如果你给求职申请者提供了明显的帮助，那么他就直接面临淘汰；而对于多面性的问题，你帮了求职申请者一步，那么他还有机会在其余部分大展身手，完美表现。</p>\n<blockquote><p>伯乐在线补注：Glassdoor 是国外一家做企业点评和职位搜索网站。</p></blockquote>\n<p>这一点很重要，不仅因为你的问题会在  Glassdoor 上泄露出来，而且（更重要的）是因为多面性的问题可以减少干扰。优秀的求职者会背负压力，陷于困境，面试时很重要的一点就是对他们提供帮助，从而让其好好发挥。考查他们解决任意小编程逻辑问题的能力时，他们最近一段时间是不是看到过、或可能只是恰巧碰到过类似的问题，会对考查造成明显干扰，而多面性的问题则可以消除一些干扰，也让求职者们有机会看到他们的努力像滚雪球一样越积越大。给他们提供一步的帮助，往往能帮他们解决紧接着的下一步，这给实际工作提供了重要动力，在面试时把握这一点就可以减少干扰。</p>\n<p>举例来说，让一个求职者在终端实现“四子连珠”游戏（一系列多个步骤），可能要比让他去旋转矩阵（一个单独步骤，外加之一些小操作）要好得多；让求职者实现 k 均值聚类（建立在彼此之上的多个操作）可能要比找到直方图中的最大矩形（leetcode 的一道算法题）要好得多。</p>\n<h3>4.避免问很难的问题</h3>\n<p>如果求职者很好地解决了一个很难的问题，那能极大地证明他的能力，但也正因为这个问题很难，所以大多数求职者都无力招架。你想要获得的信息量就很大程度上依赖于问题的难度，我们发现面试问题最合适的难度要明显比大多数面试官所想的简单得多。</p>\n<p>这一点影响更大，因为面试求职者时，获得的信息有两种来源：他们是否对一个问题给出了“正确的”答案、他们得出答案的过程/得出答案的容易程度。我们在 Triplebyte上收集了这方面的数据（同时给他们是否得出了正确答案和他们花费了多大努力这两项打分，然后衡量对公司而言哪个分数能更准确地对求职者能力进行预测）。我们发现这是一种权衡，对于更难的问题，求职者是否给出了正确的答案更能说明问题，相比之下，对于更简单的问题，求职者的答题过程和他们花费的努力程度则更有参考价值。考量了这两种信息来源后，面试问题最适宜的难度会往更加简单的方向偏移。</p>\n<p>我们现在遵循的经验法则是，面试官解决问题所用的时间应该是他们希望求职申请者们解决问题所花时间的25%。所以如果我在为时1小时的面试中提出了一个新的问题，我希望我的同事（没有提醒的情况下）能在15分钟内解答。外加之我们应问实际环境下的多面性问题，这意味着最佳的面试问题真的是相当直白和简单的。</p>\n<p>要澄清一点，我不是说要降低通过率的门槛。我支持问简单的问题，然后将他们回答的情况纳入考评范围；我支持问简单的问题，然后给予相当严苛的评判。这就是我们所找到的对面试环境进行优化的方式，这种方式额外产生的好处就是可以降低大部分求职者的面试压力。</p>\n<p>举例来说，让一个求职者创建一个简单的命令行接口，要求存储和检索键值对（如果做得好的话就再增添功能），可能要比让他们为算数表达式实现解析器要好得多；面试问题包含最普通的数据结构（表、哈希、还可能有树）可能要比涉及跳表、二叉排序树或其他更模糊的数据结构要好得多。</p>\n<h3>5 向每个求职申请者问相同的问题</h3>\n<p>面试就要对各个求职申请者进行比较，我们的目标就是将他们分为能为公司奉献光与热的和不能奉献的（在大家申请同一职位的情况下，选出申请人中最优秀的一个）。鉴于此，就没有理由向不同的求职申请者问不同的问题。如果你对申请同一职位的不同求职申请者采用不同的方式进行评判，那么你就引入了干扰因素。</p>\n<p>面试之所以一直都是当场选择问题，我觉得是因为面试官更喜欢这种方式。科技公司的工程师通常不喜欢面试别人，他们只是偶尔面试一下，面试会使他们偏离工作重点。为了将针对每个求职申请者的面试问题规范化，面试官们就需要花费更多的时间去学习如何制定面试问题，并且探讨面试打分、交接的方式。而且每次问题一发生变化，他们就需要重复以上过程。经常问同样的问题只是有些枯燥乏味而已。</p>\n<p>不幸的是，面试成功唯一的正解就是面试官需要花费心力。保证一致性是实现良好面试的关键所在，也就是说向每个求职申请者问相同的问题，并且要确保交接标准化，除此之外别无他法。</p>\n<h3>6.考虑实行多重的面试方法</h3>\n<p>与我之前的观点相悖，这里我们可以考虑提供几种截然不同的面试方法。筹备面试时，我们首先应该考虑想要招哪种类型的技术人才，但是我们想要的人才特质可能是相矛盾的，这一点很常见，例如想要招非常有数学天分的工程师，和一些高产/重复性强的工程师（甚至可能是针对同一职位）。在这种情况下，考虑采用多重的面试方法，其中关键在于你要很大程度上保证每种面试方法都是完全规范化的，我们在 Triplebyte上就在这样做。我们发现你仅需问每个求职申请者他们所青睐的面试方法即可。</p>\n<h3>7.不要因为资历而小看别人</h3>\n<p>资历不是没用的，毕业于麻省理工或者斯坦福的，抑或在谷歌和苹果公司工作过的工程师组建的队伍确实要比没这些资历的工程师更加优秀，但问题是绝大多数工程师（包括我自己）都没有以上资历，<strong>所以如果一个公司对此过分看重，那他们就会错失大多数编程大牛。</strong>在筛选环节将申请人的资历纳入考量范围并非毫无道理。我们在 Triplebyte 上没这么做（我们的考评是100%不看背景的），但是在筛选时对申请人的资历做一定的参考可能会有用。</p>\n<p>但是若让资历问题影响最终面试结果，那就没有道理了，数据表明这种情况确有发生。在我们不看背景进行考评的过程中，对于表现情况一定的求职申请者，那些简历上写有名校文凭的要在比没有名校文凭的人过关率高30%。如果面试官知道求职申请者手握麻省理工的文凭，那他们就更愿意原谅他们在面试环节暴露出来的一些瑕疵。</p>\n<p>这就是你应该避免的干扰，最显而易见的解决方式就是在开始面试前直接跳过申请者简历上的学校和公司名，有些求职申请者可能会提到他们的学校或公司，但是我们的面试都不看申请者的背景，而且在进行技术考评时，申请者自己提背景的情况也是相当少见的。</p>\n<h3>8.避免羞辱</h3>\n<p>面试失败的最丑恶的一种情况，就是招聘人员表现出一种羞辱的态度。他们不仅是对求职者技能进行考评的人，而且也代表即将要纳入成员的一个组或一支团队，在第二种身份下，面试是迎接新成员的重要仪式。面试确实让人有压力，很恐怖，但我们都会背负面试压力，所以求职者也自然会有压力，尤其在求职者表现不佳时，面试压力会更加凸显出来。当面试官看到求职者对着答案看上去那么显而易见的问题，就是答不出来急得砸脑袋时，就会觉得大失所望，气不打一处来，同时又万分沮丧，这样无疑会让求职者压力更大，形成恶性循环。</p>\n<p>一般这种情况面试官唯恐避之不及，为此应该展开探讨，并且对面试官进行培训。我们用的一个策略是，当求职者表现很差劲时，就将想要对其进行考评的评估模式切换成想要让其理解问题正解的教学模式。心理上的这种切换大有裨益，当你采用教学模式时，你就没有理由硬忍住不说答案了，也会变得完全亲和友善。</p>\n<h3>9.根据最高技能，而非平均或最低技能做录用决定</h3>\n<p>迄今为止，我只探讨过单独的问题，却没有谈过最终的面试决策。我的建议：在做录用决定时应看求职者（在你所关心的技能中）具备的最高水平技能，而非中等或最低水平技能。</p>\n<p>无论是有意还是无意，你们好像就是这么做的。每个面试过求职者的面试官通过聚在一起开会，来制定最终的录用/淘汰决定。在至少有一人力挺，且没有人强烈反对的情况下，求职申请者就会被录用。要想让一人力挺，求职申请者就需要主攻面试的其中一个部分，大显身手。我们的数据显示，要在公司面试的至少其中一个部分表现优异，求职者具备的最高技能就是最紧密的影响因素了。然而，为了得到 offer，求职者也需要保证没有强烈反对的声音，而若回答问题时表现得非常愚蠢，那么就不会引发强烈的反对。</p>\n<p>这里我们会发现大量的干扰，技术高明的工程师具备的能力各式各样，因而几乎不可能有求职者能驾驭所有技能。<strong><b>这就意味着如果你问了一个正确的（或错误的）问题，任何工程师都有可能出丑。</b></strong>那么求职者至少在一次面试中，体现了在一方面的优势（最高技能），且没有暴露在某些方面的明显劣势，才能获得 offer，而这里就有干扰出现。如同一个工程师在回答有关网络系统的面试问题时表现不好而遭到淘汰，但却在另一个面试中成绩优异，只因为面试没出网络系统的问题。</p>\n<p>我认为最好的解决方法就是让公司专注于求职者的最高技能，同时对于面试中部分环节表现不佳的人也能通融给过。<strong><b>这就是说，寻找充分的理由去录用，而不要因为求职申请者在某些技术领域能力薄弱的而过分担心。</b></strong>我不想表现得过于绝对，当然有些领域对公司是至关重要的。而且对于企业文化，若团队中每个人在特定的领域都有特定的定位，那很可能大有裨益，但是将更多的注意力集中于最高技能着实可以减少面试中的干扰。</p>\n<h2>到底为什么要搞面试？</h2>\n<p>我应该回答的最后一个问题是为什么要搞面试？我确信有些读者已经咬牙切齿地问“对一个破败的系统想那么多干嘛？直接用带回家的项目进行考评不就行了！或者直接采取试用呗！”毕竟，一些非常成功的企业都会进行试用（求职者在团队中待一周），或者用带回家的项目取代当面面试。试用是很有意义的，几乎可以肯定的是，让他们花一周的时间跟在一个工程师旁边工作（或者看他们是如何完成一个实际的项目的），要比让他们回答1小时的面试问题更能反映能力。然而，有两个问题导致试用一直无法取代标准面试：</p>\n<p>1.要进行试用的话，公司要承受高昂成本，没有公司能为每个求职申请者承担整整一周的试用花销。因而公司必须采用其他的面试环节来决定试用的人选。</p>\n<p>2.试用（以及大型的带回家完成的项目）对求职者而言成本高昂，即使他们能获得报酬，那也未必有空参与。比如一个工程师的工作是全职的，就可能没法抽空干别的，而且就算能抽出时间，可能也不愿意。而且如果一个工程师已经获得了一些offer，那就不太可能再甘愿承受结果还充满不确定性的试用考验了，这一现象明显能从 Tripletype 上的求职者中看到。许多最优秀的求职申请者（拥有其他公司的offer）只是单纯不做大型项目或者不经受试用考验。</p>\n<p><strong><b>试用是一种选人的绝佳方式。</b></strong>我认为如果你有开展试用的经济实力，那么加上试用这种选人方式是很不错的。但要想让这取代技术面试，并不完全可行。</p>\n<p>了解工程师过去的开发经历也可以成为取代技术面试的一种方式。逻辑上来看，通过了解他们过去的开发情况，就可以推知他们未来是否可以将工作干得得心应手。遗憾的是，我们在 Triplebyte 上实行此方法时，收效甚微。表达能力（推销自己的能力）强的到头来要比技术能力强的人更有胜算，巧舌如簧的工程师对自己的职能夸夸其谈（将整个团队的功劳独吞），谦虚谨慎的工程师却对自己的成绩轻描淡写，这样的现象屡见不鲜。如果有充分的时间和大量的问题去刨根究底，就有可能弄清楚真实情况，但是我们发现，常规面试时间有限，谈论过去的开发经历通常并不能取代技术面试。虽然谈过去经历有助于破冰，拉近和求职申请者间的关系，能够对他们的兴趣有所了解，（而且能从中评判求职者的表达能力，还有可能看出他和企业的的文化契合度），但要想让这取代技术面试，并不完全可行。</p>\n<h2>编程面试的好处！</h2>\n<p>我想让这篇博客以更加乐观的角度作结，无论面试存在多大的问题，但采用这种方法其实也有颇多好处。</p>\n<p>面试是对申请者能力的直接评估，我有一些朋友是当老师的，他们告诉我教师面试基本上考察的是语言表达能力（推销自己的能力）和所具备的文凭资历，这一点似乎从很多职业中都能得到印证。硅谷没有非常完美的精英体制，但我们至少确实在设法对申请者应具备的重要能力进行直接衡量，并且秉持达观开放的思想，认为一个人无论背景如何，只要具备相应的能力，就能够成为非常优秀的工程师。对文凭资历的偏见会成为贯彻这种思想的阻力，但我们在 Triplebyte 上已经很大程度上克服了这种偏见，并帮助很多没有常规资历的人找到了很好的技术工作。我认为 Triplebyte 不太可能解决比如在法律层面的问题，因为社会对于求职者文凭资历实在是太重视了。</p>\n<p>程序员同时也在选择面试形式。尽管这个话题颇有争议（当然有程序员对此持异议），但我们提供了各式各样不同的考评形式，通过试验，我们发现绝大多数的程序员还是会挑选常规的面试形式，仅有一小部分人会对公司采用试用或带回家的项目进行考评的形式更感兴趣。无论怎样，我们这里要说的是编程面试，其他形式的考评都能作为很好的补充备选，但看起来不太可能取代面试成为考评工程师的主要形式。<strong>不确切地套用丘吉尔的一句话：“面试是最差的一种考评工程师的方式，但它是我们迄今为止所能找到的最好的一种方式。”</strong></p>\n<h2>结论</h2>\n<p>面试工作很难，无奈的是人类都是复杂的。从某种程度上来说，想要靠区区几小时的面试去评判一个人的能力，这是傻子才会干的事，因而我觉得保持谦逊的态度是至关重要的。任何面试在很多时候都注定会失败，只是因为人实在是太复杂了。</p>\n<p>但这并不是说着我们应该放弃，<strong><b>试着将面试过程不断优化要比什么都不做好得多。</b></strong>在 Triplebyte 上，面试就是我们的产品，我们集体讨论，想出考评测试方法，进而随着时间的推移不断优化面试方式。我在这篇博客中分享了过去两年多学到的一些重点，期待反馈，想知道这些观点是否能够让大家受益。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114168\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114168votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114168\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">dimple11</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/09/28db3e36f17643a752be4b798d5ceabc.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/dimple11\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/dimple11/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/dimple11/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 15</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/eab8e43cab7042122aaedf074f24e0e4a29fce44.jpg"}
{"url_object_id": "2967d3141d2e16cd5b82bc162f3a4648", "title": ["工作 8 个月后，一名工程师竟然被机器解雇了"], "url": "http://blog.jobbole.com/114154/", "create_date": "2018/06/25", "front_image_url": ["http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "业界,自动化", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.oschina.net/news/97362/when-a-machine-fired-me\">达尔文</a>   </div><p>Ibrahim Diallo 发表了一篇博客，描述了自己认真地工作却被“强大”的机器系统强制解雇的真实经历，并表示，事情发生的从始至终都没有人能够阻止它。</p>\n<p>Diallo 在文中描述，自己在某天上班时，发现门卡失效，当他找到主管时，又意外发现了自己已经被解雇的邮件，却不知道是谁发的：</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fsnj3dqw5ij20hj0cpn3g.jpg\"></p>\n<p>Diallo 随后来到工作岗位，发现自己的 Jira（项目与事务跟踪工具）账号被禁用，当他找经理重新启用账号时，系统却不允许经理进行重新启用的操作。Diallo 回到办公桌前，发现系统提示他重启电脑，但他知道重启后会导致数据丢失，因此并未进行此操作，可 Windows 电脑最后却自动重启了，导致几十万条记录丢失，Web 界面也不响应了。</p>\n<p>随后 Diallo 用他 CentOS 的机器黑进他的服务器去重启，调试，重启所有访问，然后重新处理所有数据。</p>\n<p>后来问题终于得到解决，谈到整件事情的起因时，Diallo 解释道：</p>\n<blockquote><p>我的合同期限是三年，而我仅工作了八个月。原来在我被解雇之前，公司被一家更大的公司收购，而我正是在收购的过程中加入的。当时由于经理的疏忽，没有给我的合同续约，导致合同中止。</p>\n<p>而按照我们的系统设定，一旦员工合同中止的工作单发出后，系统就会接管一切。所有中止合同所需的工作单会自动发出，每个都会触发其他的工作单。于是就有了我的门卡失效，Windows 账号和 Jira 账号被禁用事情的发生，等等。</p>\n<p><strong>而这整个过程持续了好几天，期间却没有任何方法能人为中止。</strong>我只能以新员工的方式被重新雇佣，意味着我得重新填写各种文件，设置银行卡账号，等联邦快递给我发送新的门卡。</p></blockquote>\n<p>作者在文中将整个过程称为：<strong>一个简单的自动化错误/功能导致的雪崩。</strong>自动化也许给我们的生活和办公带来许多便利，但当机器犯错误时，人必须能够干预。如若不能，可能就会出现上面作者描述的情况，甚至会导致更加严重的问题。想详细了解事件发生的读者可以查看作者的<a href=\"https://idiallo.com/blog/when-a-machine-fired-me\">博客原文</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114154\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114154votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114154\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/0c1c6b58f1668b69972b13ab523e285e3514bf2c.jpg"}
{"url_object_id": "a477d68fdad1a1b384e0ae7fb5c03095", "title": ["2017 年，我发布了 6 个副项目"], "url": "http://blog.jobbole.com/113822/", "create_date": "2018/06/08", "front_image_url": ["http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 3, "tags": "职场,副项目", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/how-i-shipped-six-side-projects-in-2017-3dde6c77adbb\">Mark Johnson</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>2016 年我曾定了一个目标——每个月都要学点新东西。最终，我发布了 6 个新项目。下面我要对这些项目以及我学到的东西做个总结。</p>\n<p>回望这一年，我成功发布了尽可能多的副项目，同时有一份超过了全职工作的工作、和家人度过了高质量的时光（我有两个孩子和一位非常有耐心的妻子）、作为兼职教授教书、还兼职提供咨询服务。这些对我来说似乎有点疯狂。</p>\n<p>人们容易把缺乏时间视为阻碍自己做副项目的原因。我们常给自己找的借口是“只要有更多时间……”。我们还寻找花里胡哨的 App 或者任务管理技巧，来尝试在时间表中空出些时间来。</p>\n<p>但是，去年我学到的主要的一点就是，<strong><em><span style=\"color: #ff0000;\">时间不是首要问题。你有足够的时间；你需要的是动力。</span></em></strong></p>\n<p>好消息是，我们“应付得了”动力。在 2017 年我学到了几种应付动力的方法，我想跟你们分享一下。</p>\n<h3>你必须得选一个你真正感兴趣的想法</h3>\n<p>你只是不能对你不关心的事物保持热情，所以选一些你激情所在的事情来做。当你灵光一闪时，别让它溜走，用上它。即使这意味着你要在工作会议上草草记下些笔记。</p>\n<p>重要的是紧紧抓住这些灵感时刻，以求知若饥并保持对工作的好奇心。</p>\n<h3>给自己准备一个工作时间表</h3>\n<p>对我来说，这意味着每个月发布些东西。一旦我开始工作，我往往会搞砸。所以 30 天的限制确实能帮助我控制好这个趋势，有效利用我的动力。</p>\n<p>如果结果发现某个月的想法不中用，这也能给你一个机会去尝试新想法。至少你不会把一整年的时间浪费在它上面。</p>\n<h3>你需要一个分享成果的公开截止日期</h3>\n<p>这是重要的一点。在项目尾声时你会耗尽“动力库”。（最后 10% 是致命的。）唯一能助你度过动力低迷期的是，知道在另一头还有人等着看你的成果。</p>\n<p>分享工作成果的另一个好处是，给你一个为副项目收集支持性反馈的机会。我工作的地方 <a href=\"https://atlaslocal.com\">Atlas Local</a> 会在每月第一个周五举办全办公室范围的活动。我利用这项活动展示我前一个月的项目，而且总能收到在场的这些慷慨的伙伴的鼓励和支持。</p>\n<p>站出来分享你的成果，你会对你收到了多少支持而感到震惊的。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>这项实验中最让我惊讶的部分大概就是，我对在 2018 年发布更多工作更加充满动力，远不是在最后筋疲力尽。</p>\n<p>我会鼓励你在新的一年里应付动力问题，并发布一些你已经考虑了一段时间的想法。如果你尝试了，那我很乐意洗耳恭听。</p>\n<p>如果你对我在 2017 年的工作成果的细节感兴趣，请继续阅读！</p>\n<p style=\"text-align: center;\">. . .</p>\n<h2>一月项目：<a href=\"https://www.pers0nal1ty.com\">Pers0nal1ty.com </a></h2>\n<p><em>可视化比较团队最强特点和最弱特点的个性类型</em></p>\n<p><img src=\"http://wx1.sinaimg.cn/large/63918611gy1frenpxw9krj20rs0j6q9i.jpg\"></p>\n<p>我已经入<strong>迈尔斯·布里格斯类型指标（MBTI）</strong> 的坑一段时间了。尽管我不把它看成是规范，也不认为它有那么科学，它仍是一个理解与我不同的人的有用框架。</p>\n<p>很多痴迷于个性的人没有意识到的是，MBTI 系统是基于<em>认知功能</em>的。认知功能是由现代心理学之父 Carl Jung 在上世纪 20 年代创造的。我想深挖一下，并进一步学习它。</p>\n<p>同时，我看了 HBO 的《西部世界》，看到了下面这一幕：</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenpygjl1j20m80ci763.jpg\"></p>\n<p>我超爱这类科幻用户界面，它马上吸引了我的注意力。我想，如果我能基于人们的 MBTI 特征，建他们各自的“角色档案”会怎么样呢？为什么不呢？</p>\n<p>为了该项目做准备，我读了 “MBTI 圣经”， <a href=\"https://www.amazon.com/Gifts-Differing-Understanding-Personality-Type/dp/089106074X\">Myers 和 Briggs 合著的《Gifts Differing</a>》，并着手构建一个系统，该系统可以根据 MBTI 系统的基础——<a href=\"https://en.wikipedia.org/wiki/Jungian_cognitive_functions\">认知功能</a>来生成雷达图。</p>\n<p>最后，我以《西部世界》的用户界面为核心，因为我（和其他 beta 测试者）发现，将多人重叠在同一张雷达图上以获得一群人之间的关系的能力更为实用。</p>\n<p>如果我自己也这么说的话，结果确实很有趣。试试输入团队成员的个性类型或者你和你伴侣的个性类型：</p>\n<p> </p>\n<h3>二月：<a href=\"https://sheetcake.cc\">Sheetcake 登录页面</a></h3>\n<p><em>制作任何网上登陆表单最简单的方法</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenpzfh23j20rs0k5tio.jpg\"></p>\n<p style=\"text-align: center;\">Sheetcake 登陆页面</p>\n<p>我已经着手于 Sheetcake 几年了。它拥有非常小的一部分忠实用户（他们中的大多数都认识我或者与我关系亲密的人）。</p>\n<p>SheetCake 趣事：</p>\n<ul>\n<li>2012 年，我在 48 小时内完成了第一个版本。这是年轻一点的我演示这个 48 小时版本的<a href=\"https://www.youtube.com/watch?v=L5jsxlQr37Q\">视频</a></li>\n<li>我已经重新写了 4 次！第一版是用了 Backbone.js + Node.js。第二版是用了 Backbone + Marionette + Firebase。第三版是用了 React + Firebase（全都用了 CoffeeScript）。第四版，也是最终版，是用了 ES6、React 和 Firebase。</li>\n<li>使用 Sheetcake 的人往往连着用了好几年；然而还没有商业模型。</li>\n</ul>\n<p>Sheetcake 在某几方面的确做得很好（比如 Zero Day 注册），所以我想为它制作一个登录页面，以推销这些优点。我从一个模版开始，这是它的最终版本。</p>\n<p> </p>\n<h3>三月：<a href=\"https://www.wmdmark.com\">NeTi 聊天机器人</a></h3>\n<p><em>向我外向的机器人助手提有关于我的问题</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frenq0ed6aj20rs0gsab3.jpg\"></p>\n<p style=\"text-align: center;\">NeTi 聊天机器人</p>\n<p>去年早些时候，聊天机器人大火。尽管我从来不对聊天机器人能自己去某地抱什么希望，但是它们的对话 A.I. 属性还是吸引了我，我想进一步了解它。</p>\n<p>我是个内向的人，一般十分不擅长分享自己的事情。所以我想创造一个外向的机器人，它可以回答一些关于我的简单问题，这可能很有趣。</p>\n<ul>\n<li>如果我是个外向的人，我会拥有某些认知功能，NeTi 就得名于此。</li>\n<li>给提问意图分类的 A.I. 部分是用 Wit.ai 构建的，Wit.ai 使得构建 A.I. 容易多了。</li>\n<li>别让 NeTi 太生气，否则它可能会猛烈抨击你。</li>\n</ul>\n<p> </p>\n<h3>四月：<a href=\"https://github.com/wmdmark/goap-js\">G.O.A.P.</a></h3>\n<p><em>用目标导向型行动计划（Goal Oriented Action Planning ）构建令人信服的 A.I.</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frenq0zcdmj20rs0kun8x.jpg\"></p>\n<p style=\"text-align: center;\">添加了移轴效果的代码截图——为什么不呢？</p>\n<p>在偶然间看到<a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">这篇文章</a>后，我被一个游戏背景中描述的 <a href=\"http://alumni.media.mit.edu/~jorkin/goap.html\">GOAP</a> 深深吸引。这个游戏叫 <a href=\"https://en.wikipedia.org/wiki/F.E.A.R.\">F.E.A.R</a>，对我来说有些怀旧气息。</p>\n<p>过去我参与过一些有基础 A.I. 的游戏的工作，从来没有遇到这项技术。我记得那时我觉得 F.E.A.R 的 A.I. 特别令人印象深刻、栩栩如生。</p>\n<p>在进一步研究后，这个方法最吸引人的地方不是结果多么令人信服，而是解决方法多简单优雅（尤其是跟更标准的 A.I. 方法比较，比如有限状态机（Finite State Machine））。</p>\n<p>所以我为四月份的项目写了一个 JavaScript 库来探索 GOAP。一个基础执行简单得出乎意料（只要 58 行代码！）。</p>\n<p> </p>\n<h3>五月：<a href=\"https://github.com/wmdmark/goap-js\">目标合同</a></h3>\n<p><em>为你的目标签署责任合同。</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frenq1hudmj20rs0iktbq.jpg\"></p>\n<p style=\"text-align: center;\">内嵌责任的目标合同</p>\n<p>五月我也开始了<a href=\"https://whole30.com/whole30-program-rules/\">整整 30 天节食（Whole 30 diet）</a>。我对我的饮食习惯变得满意，它也必然会影响我的能量级。整整 30 天节食（Whole30）对我来说进行得很顺利（节食期间我减了 18 磅，在接下来的几个月总共又减了 35 磅）。最重要的是，它确实均衡了我白天的能量，我感到更有动力了，也更专注了。</p>\n<p>看到了公开承诺和动力的相似之处，我决定将探索“目标合同”这个想法作为五月的副项目。</p>\n<p style=\"text-align: center;\">. . .</p>\n<h3>六月至十二月：<a href=\"https://www.tiltmaps.com\">TiltMaps</a></h3>\n<p><em>为你喜爱的地点和记忆制作独一无二的地图海报</em></p>\n<p style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frenq23kdhj20rs0ib49c.jpg\"></p>\n<p style=\"text-align: center;\">TiltMaps 主页</p>\n<p>这是一切的核心。我六月份的目标是做一个大家真正想买的产品。我最大的短板之一就是销售和营销，所以我想做一个可以帮助我练习的产品来进一步学习。</p>\n<p>我一直都对地图和生成艺术感兴趣，所以我有个吸引人的主意——创造一个工具，你可以用它来创造并购买你所喜爱的地点的海报。</p>\n<p>这个项目太过有野心，不能在一个月内作为副项目完成。所以我决定用 2017 年剩余的几个月来完成 TiltMaps，并在发布前每个月都研究该产品的不同角度。我发现把一个较大的项目的不同部分分成月度项目能有效完成项目。</p>\n<p> </p>\n<h3>六月至七月：The Secret Sauce <sup>™</sup></h3>\n<p>为了弄清楚是否有可能生成高分辨率 3D 地图，我第一个月大部分时间都用来做 R&amp;D 了。生成世界上任意地点的一张 300dpi 的 3D 地图不是任意 API 或者我找到的平台能开箱即用地支持的事情，所以我不得不发明我自己的方法来完成这件事。弄清它花掉了我这个月大部分的时间，但是当我找到了答案就变得出乎意料地简单了。之后，我构建了一个基础编辑器来开始制作真正的海报，并订购了几次打印测试。</p>\n<p> </p>\n<h3>八月至九月：概念的证明（MVP）</h3>\n<p>接下来几个月我构建了该产品有更多消费者的 MVP。设计并不好，但是我还是让事情运转起来了，并且可以开始海报制作和打印的用户测试了。</p>\n<p> </p>\n<h3>十月至十一月：品牌和市场营销</h3>\n<p>接下来的几个月，我专注于让该项目准备好发布。尽管编辑器基本完成了，但是我还没有主页，而且市场营销方面还差得远。</p>\n<p>最终，通过在 Zero Day 和我参加的一个研讨会上展示 TiltMaps， 我在项目发布前的一个月卖出了几张海报。这非常鼓舞人心，因为这是我第一次从副项目中卖出了东西。</p>\n<p> </p>\n<h3>十二月：公开发布</h3>\n<p>在 <a href=\"https://www.producthunt.com/posts/tiltmaps\">Product Hunt</a> 上的发布比我预想中进行得顺利。我预计会卖出 10 张左右，但最终卖出了 37 张，而且仍然有订单进来。制作人们想买的东西感觉很好，而且它是一个很好的测试平台，可以尝试那些可能会在我的全职工作中发挥作用的、不同的广告和销售策略。</p>\n<p>我计划 2018 年继续致力于 TiltMaps。但愿我能从其中获得体面的、有趣的收入。</p>\n<p style=\"text-align: center;\">. . .</p>\n<p>总结完毕。感谢您读完全文。</p>\n<p>有任何想法或者反馈？我将洗耳恭听。在下面评论或者在 <a href=\"https://twitter.com/wmdmark\">Twitter</a> 上与我联络。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113822\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113822votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113822\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/f530c0cbed80a6a810d6e35a950794d795ec0368.jpg"}
{"url_object_id": "c8e1a285b335f2a803ddd35756a4148a", "title": ["为什么码农要了解业务？"], "url": "http://blog.jobbole.com/107275/", "create_date": "2018/06/12", "front_image_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 4, "tags": "职场,程序员", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.toutiao.com/i6563215390107763208/\">来自 jerryhuang650 推荐\r\n</a>   </div><div>\n<p> 最近一位分析界的老前辈对我很无奈地摇摇头，“这帮程序员，不食人间烟火哪！”我也深有感触，全世界的码农都一个样。</p>\n<p>这让我想起了，同样也是他，在多年之前，对我提了警醒——要重视业务。从那之后，我一直狂奔在技术+业务的双修道路上。</p>\n<p>放在以前，码农这个族群一定是稀罕动物。但在今天，这个世界最不缺的应该就是码农了，未来最廉价的也将是码农。仅有泛泛一技，在未来并不吃香，因为那是要被机器人所取代的。</p>\n<p>这个世界，缺的是技术过硬又精通业务的工程师，缺的是真正能解决实际业务问题的人，缺的是复合型的人才。</p>\n<p>码农不是工程师，码农只是会写代码，只会明确需求和逻辑的情况下写代码。工程师则不一样，懂得用技术怎么解决实际业务问题，用技术驱动业务的发展。</p>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1eizj4iuehrj20eq0b2gn2.jpg\" width=\"530\" height=\"398\"></p>\n<h1><strong>什么叫业务？</strong></h1>\n<p>先来明确这个问题。</p>\n<p>业务是一个很实在的东西，看得见感受得到，接地气儿。</p>\n<p>业务就是我们所能理解和感受的世界，就是这个世界或者某个行业的运转逻辑、流程与现状，是结果表象，是能够被看见和感受的，也是内在本质，是能够被洞察和感知的。</p>\n<p>业务就是这个世界发生了什么，什么时候，谁参与，怎么发生，结果如何。</p>\n<p>业务就是什么时候，谁在哪里，买了什么东西，花了多少钱，用什么支付。</p>\n<p>业务就是这个行业怎么发展起来的，现状如何，未来趋势如何，用了什么技术，有什么企业，商业模式如何，盈利能力如何，目前主要面临什么问题，消费者有什么特点，等等。</p>\n<p>世界很复杂，单个细分行业的业务也很复杂。</p>\n<h1><strong>为什么要了解业务？</strong></h1>\n<p>谈到这个，码农们一定有所不悦，“熟悉业务是需求分析师做的事，跟我们没有关系。”</p>\n<p>打个不恰当的比喻。有10个人经过一栋写字楼，突然从楼上掉下来几块砖头，砸中了9个人，其中就有7个码农，3个硕士，1个博士（原谅我又犯职业病，拿数据说话了）。而没被砸到的那个人，恰好因为了解到之前经常发生这样的事而绕道行走。</p>\n<p>如果你只会写代码，你不是不可替代的，而是可有可无的。因为这年头，会JAVA、C、Python的程序员，在大街上一抓一大把。现在已经开始提倡，编程从娃娃抓起了。10后都开始跟你抢饭碗了，你怕不怕？</p>\n<p>但话也不是那么极端，除非你的技术很牛逼，在国内或者某个行业内能够排上号的。但技术牛逼的人，也不是只是技术超群，还常常因为能够利用手中的技术解决某方面的业务问题，做了哪些突出的贡献。我们出来混，也是要拿成果说话的，做过什么项目，有什么价值。这种价值往往就是针对业务而说的。</p>\n<p>IT研发与业务需求方常常是一对冤家，常常因为一个业务功能实现争辩得耳红面赤。研发觉得这个功能很low，没什么技术含量，业务方却认为这个功能却很有用，需要花功夫做细做深做好。现实情况是，功能做出来了，却很难用，或者经常用不了，或者数据不对。研发想做点高大上的功能，业务方却认为太虚了，没什么用。（IT与业务方那点事就不多说了，大家都心知肚明~~）</p>\n<p>多年经验反复告诫我，鉴定一个功能是不是好功能，唯一的标准是看它能否支撑业务、改善业务、推动业务，也即应用效果。一个产品，只要有30%的功能，让业务用户用起来很爽，感觉帮助很大，就已经是一个不错的产品了。</p>\n<p>我们都认同，技术驱动业务。但我们不一定明白，正是由于业务的某些强烈需求，才推动技术的发展与落地。</p>\n<p>说这些，我是想说，作为技术人员，我们既要仰望星空，也要脚踏实地，既要追逐腾飞的技术，也要重视落地的业务。</p>\n<p>如果一个业务人员很懂技术，那将很可能是技术人员的灾难。因为那样的话，业务人员会很强势，又或者那样就没有技术人员什么事了。</p>\n<p>当然，也不难想象，一个真正懂看数据的测试人员，就好比一个真正懂用算法的业务人员一样难得。</p>\n<h1><strong>业务与数据的关系</strong></h1>\n<p>真实（而不是杜撰、模拟、伪造）、可量化、可被记录的数据一定会反映真实世界某方面的业务情形。而现实当中很多业务场景都可由数据体现出来。</p>\n<p>零售是业务场景最繁多且最贴近我们生活的行业，可以从中找到很多方便理解的例子。</p>\n<p>当你在一个酷热难耐的夏天上午10点，走进位于公司附近的全家便利店，使用微信支付，花了3.5元，买了一瓶无糖330ml摩登罐的可乐，而且刷会员卡攒了100积分，而收银员MM返回给了你一张POS单据，这时你所发生的这一切都已经通过收银记录在了全家的数据库里。更糟糕的是，店里的摄像头也已经把你在店里的一举一动录了下来了，转化成为一帧帧图像数据。</p>\n<p>这就是，业务数据化。</p>\n<p>店长通过数据分析发现，最近3.5元330ml摩登罐可乐的销量比上月增长了20%，而消费者中75%是20-35岁的男性，相比之下，300ml塑料瓶装的可乐销量却下滑40%。店长权衡比较了一下，300ml塑料瓶装可乐利润低，330ml摩登罐可乐目前更受年轻人欢迎，考虑到日渐增长的租金压力，做了一个大胆的决定——下架300ml塑料瓶装可乐，增加330ml摩登罐可乐的商品。（又拿数据说话了。）</p>\n<p>这就是，数据业务化。</p>\n<p>或者，数据驱动业务。</p>\n<p>当我开始接触一个行业时，我通常会花2-3周的时间去了解这个行业的业务，然后就大致清楚这个行业有什么样的数据，可以做哪方面的分析，解决什么问题。</p>\n<p>当遇到不好理解的分析结果时，我经常使用业务联想法，设身处地去体会结果所反映的业务场景是什么样的。</p>\n<h1><strong>如何了解业务？</strong></h1>\n<p>这个说大了，就是如何看这个世界。每个人有每个人的方法论，每个人有每个人的世界观，每个人有每个人的逻辑思维。</p>\n<p>我们都知道，观念的转变是最难的，也有很多不确定性。有些人可能因为自己的切身体会一天就改变了之前几十年根深蒂固的看法，有些人任由三姑六婆苦口婆心地劝说就是不肯改变自己的择偶观，却有可能因为自己年岁渐大不断降低自己的标准。</p>\n<p>但最好也及早要形成科学的思考方法，帮助正确地理解这个世界。</p>\n<p>以“面-线-点”的方式可以较为全面、系统、深入地了解一个行业，然后是某个垂直领域，最后再到具体业务场景。</p>\n<p>佛系文化的流行，使得年轻一代降低对这个世界的关注度，一切都无所谓，一切都漠不关心。</p>\n<p>这个世界从来没有变好过，但我们每个人都是这个世界的匆匆过客，都是行走在自己的人生路上不断领略这个世界的美与丑。这世间的风景，这世间的悲欢离合，如果我们积极地探索与领悟，也不枉来这世间走一遭。</p>\n<p>保持好奇心，可以驱动我们的思考，强化我们的认知，丰富我们的内在。</p>\n<p>这是我想说的第二个方面。</p>\n<p>怀有好奇心，就会渐渐地敏锐观察这个世界，多问自己一些为什么。</p>\n<p>我家附近原来有个沃尔玛超市，现在地产商将它装修一番，引入了不少餐厅，刚开张不久，我就去那里吃饭，吃的是烤鸭，一个多两个月后，再去那里吃饭，发现有一半的餐厅已经关门了。</p>\n<p>在去地铁站的那条路上，每天人流如梭，一点点，即使到了深夜，依然有很多人在门口排队买奶茶。然而，仅仅隔了一个店铺的喜茶，做不下去，关门了。两三个月前又换成粉店，路转粉。每天下班路过时，发现店里顾客不到10个，门可罗雀。</p>\n<p>为什么每家一点点奶茶店门口，不管是什么时候都是很多人，他们是托儿还是真的顾客？</p>\n<p>因为喜欢新鲜，不喜欢在冰箱里存太多菜，且附近没有菜市场，所以常去买菜的还是附近的钱大妈。但我却没怎么去更近的一家生活超市，店面比较大，除果肉蔬菜外，也卖油盐酱醋，还有生活用品，但奇怪的是顾客却不到钱大妈的1/10。</p>\n<p>为什么几乎所有潮州牛肉店都很多人，有很多甚至在门口排了很长的队？</p>\n<p>观察到这些，常常会陷入思考，为什么会发生这些，新零售到底改变了什么？</p>\n<p>再举个例子。</p>\n<p>去年拿保温杯泡着枸杞的中年男火了。</p>\n<p>关于这个，我又问了自己几个问题：拿着保温杯泡着枸杞的是不是都是中年男？如果是，这个特征能否被数据量化？可否考虑加入到算法模型当中，加以应用起来？</p>\n<p>虽然很多问题，我没有找到答案，但多问自己问题，会引发自己不断深入思考，不断激发自己好奇心，不断去研究。</p>\n<p>很多业务知识都是零散的，不可能在短时间内完全了解，可以在日常不断积累。</p>\n<p>关于日常积累业务知识，可以经常询问懂业务的人。这是我想说的第三个方面。</p>\n<p>刚进公司的时候，我以为业务很简单。很快，我就发现里面的坑不少。加上所在团队的成员也是刚入职不久的，问问题没处可问。过了一个月之后，我发现隔壁团队有两个十年左右的老员工，业务很熟，而且人特好。于是，我几乎一遇到业务问题，就跑过去“骚扰”他们，他们也很乐意解答，如果他们不清楚，他们也会告诉我应该去找谁了解。大约半年之后，我基本摸透了顺丰的数据和业务情况。我也和那两位老员工建立了不错的友谊，即使后来换了部门，我也经常过去找他们。</p>\n<p>跟懂业务的人搞好关系，遇到业务问题，多咨询他们，这是最有效最接地气的办法。</p>\n<p>多看书，这是我想说的第四个方面。</p>\n<p>比如说，从事新零售领域方面的工作，总得先了解新零售是怎么回事。你可以去听专家们忽悠，但这样的机会很少，而且时间也有限，说不定成本还很高。</p>\n<p>读书则不一样。读书，意味着主动了解，主动去构建自己的知识体系。</p>\n<p>读书的重要性，这里不多言了。</p>\n<p>如果您读这篇文章的时候，您恰好也是一位数据人。我还想告诫一句：我们不能脱离业务去看数据，而是要时刻从业务角度去理解数据。</p>\n<p>我们不敢期望可以完全理解这个世界，但也憧憬着我们不单可以在代码的世界里畅快驰骋，论剑江湖，也可以放下身段洞察芸芸众生之百态，领悟人间世俗之真情。</p>\n<p>如果真的可以的话，就没有需求分析师什么事了。</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"107275\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"107275votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"107275\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/3c9d695ba504fed7faa5375f3c80ff7f2ff90de4.jpg"}
{"url_object_id": "821f7f4efb272c0b6522e2a1e27276be", "title": ["我必须得告诉大家的MySQL优化原理"], "url": "http://blog.jobbole.com/114041/", "create_date": "2018/05/25", "front_image_url": ["http://wx4.sinaimg.cn/mw690/63918611gy1frnqlou40xj207p07dq32.jpg"], "praise_nums": "4", "comment_nums": 1, "fav_nums": 12, "tags": "IT技术,B+Tree,B-Tree,优化,索引", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.jianshu.com/p/d7665192aaaf\">CHEN川</a>   </div><p>说起MySQL的查询优化，相信大家收藏了一堆奇技淫巧：不能使用<code>SELECT *</code>、不使用NULL字段、合理创建索引、为字段选择合适的数据类型….. 你是否真的理解这些优化技巧？是否理解其背后的工作原理？在实际场景下性能真有提升吗？我想未必。因而理解这些优化建议背后的原理就尤为重要，希望本文能让你重新审视这些优化建议，并在实际业务场景下合理的运用。</p>\n<h3>MySQL逻辑架构</h3>\n<p>如果能在头脑中构建一幅MySQL各组件之间如何协同工作的架构图，有助于深入理解MySQL服务器。下图展示了MySQL的逻辑架构图。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlou40xj207p07dq32.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">MySQL逻辑架构，来自：高性能MySQL</div>\n</div>\n<p>MySQL逻辑架构整体分为三层，最上层为客户端层，并非MySQL所独有，诸如：连接处理、授权认证、安全等功能均在这一层处理。</p>\n<p>MySQL大多数核心服务均在中间这一层，包括查询解析、分析、优化、缓存、内置函数(比如：时间、数学、加密等函数)。所有的跨存储引擎的功能也在这一层实现：存储过程、触发器、视图等。</p>\n<p>最下层为存储引擎，其负责MySQL中的数据存储和提取。和Linux下的文件系统类似，每种存储引擎都有其优势和劣势。中间的服务层通过API与存储引擎通信，这些API接口屏蔽了不同存储引擎间的差异。</p>\n<h3>MySQL查询过程</h3>\n<p>我们总是希望MySQL能够获得更高的查询性能，最好的办法是弄清楚MySQL是如何优化和执行查询的。一旦理解了这一点，就会发现：<strong>很多的查询优化工作实际上就是遵循一些原则让MySQL的优化器能够按照预想的合理方式运行而已。</strong></p>\n<p>当向MySQL发送一个请求的时候，MySQL到底做了些什么呢？</p>\n<div>\n<div>\n<div> <img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frnqlp7c08j20jg0beacl.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">MySQL查询过程</div>\n</div>\n<h4>客户端/服务端通信协议</h4>\n<p>MySQL客户端/服务端通信协议是“半双工”的：在任一时刻，要么是服务器向客户端发送数据，要么是客户端向服务器发送数据，这两个动作不能同时发生。一旦一端开始发送消息，另一端要接收完整个消息才能响应它，所以我们无法也无须将一个消息切成小块独立发送，也没有办法进行流量控制。</p>\n<p>客户端用一个单独的数据包将查询请求发送给服务器，所以当查询语句很长的时候，需要设置<code>max_allowed_packet</code>参数。但是需要注意的是，如果查询实在是太大，服务端会拒绝接收更多数据并抛出异常。</p>\n<p>与之相反的是，服务器响应给用户的数据通常会很多，由多个数据包组成。但是当服务器响应客户端请求时，客户端必须完整的接收整个返回结果，而不能简单的只取前面几条结果，然后让服务器停止发送。因而在实际开发中，尽量保持查询简单且只返回必需的数据，减小通信间数据包的大小和数量是一个非常好的习惯，这也是查询中尽量避免使用<code>SELECT *</code>以及加上<code>LIMIT</code>限制的原因之一。</p>\n<h4>查询缓存</h4>\n<p>在解析一个查询语句前，如果查询缓存是打开的，那么MySQL会检查这个查询语句是否命中查询缓存中的数据。如果当前查询恰好命中查询缓存，在检查一次用户权限后直接返回缓存中的结果。这种情况下，查询不会被解析，也不会生成执行计划，更不会执行。</p>\n<p>MySQL将缓存存放在一个引用表（不要理解成<code>table</code>，可以认为是类似于<code>HashMap</code>的数据结构），通过一个哈希值索引，这个哈希值通过查询本身、当前要查询的数据库、客户端协议版本号等一些可能影响结果的信息计算得来。所以两个查询在任何字符上的不同（例如：空格、注释），都会导致缓存不会命中。</p>\n<p>如果查询中包含任何用户自定义函数、存储函数、用户变量、临时表、mysql库中的系统表，其查询结果<br>\n都不会被缓存。比如函数<code>NOW()</code>或者<code>CURRENT_DATE()</code>会因为不同的查询时间，返回不同的查询结果，再比如包含<code>CURRENT_USER</code>或者<code>CONNECION_ID()</code>的查询语句会因为不同的用户而返回不同的结果，将这样的查询结果缓存起来没有任何的意义。</p>\n<p>既然是缓存，就会失效，那查询缓存何时失效呢？MySQL的查询缓存系统会跟踪查询中涉及的每个表，如果这些表（数据或结构）发生变化，那么和这张表相关的所有缓存数据都将失效。正因为如此，在任何的写操作时，MySQL必须将对应表的所有缓存都设置为失效。如果查询缓存非常大或者碎片很多，这个操作就可能带来很大的系统消耗，甚至导致系统僵死一会儿。而且查询缓存对系统的额外消耗也不仅仅在写操作，读操作也不例外：</p>\n<ol>\n<li>任何的查询语句在开始之前都必须经过检查，即使这条SQL语句永远不会命中缓存</li>\n<li>如果查询结果可以被缓存，那么执行完成后，会将结果存入缓存，也会带来额外的系统消耗</li>\n</ol>\n<p>基于此，我们要知道并不是什么情况下查询缓存都会提高系统性能，缓存和失效都会带来额外消耗，只有当缓存带来的资源节约大于其本身消耗的资源时，才会给系统带来性能提升。但要如何评估打开缓存是否能够带来性能提升是一件非常困难的事情，也不在本文讨论的范畴内。如果系统确实存在一些性能问题，可以尝试打开查询缓存，并在数据库设计上做一些优化，比如：</p>\n<ol>\n<li>用多个小表代替一个大表，注意不要过度设计</li>\n<li>批量插入代替循环单条插入</li>\n<li>合理控制缓存空间大小，一般来说其大小设置为几十兆比较合适</li>\n<li>可以通过<code>SQL_CACHE</code>和<code>SQL_NO_CACHE</code>来控制某个查询语句是否需要进行缓存</li>\n</ol>\n<p>最后的忠告是不要轻易打开查询缓存，特别是写密集型应用。如果你实在是忍不住，可以将<code>query_cache_type</code>设置为<code>DEMAND</code>，这时只有加入<code>SQL_CACHE</code>的查询才会走缓存，其他查询则不会，这样可以非常自由地控制哪些查询需要被缓存。</p>\n<p>当然查询缓存系统本身是非常复杂的，这里讨论的也只是很小的一部分，其他更深入的话题，比如：缓存是如何使用内存的？如何控制内存的碎片化？事务对查询缓存有何影响等等，读者可以自行阅读相关资料，这里权当抛砖引玉吧。</p>\n<h4>语法解析和预处理</h4>\n<p>MySQL通过关键字将SQL语句进行解析，并生成一颗对应的解析树。这个过程解析器主要通过语法规则来验证和解析。比如SQL中是否使用了错误的关键字或者关键字的顺序是否正确等等。预处理则会根据MySQL规则进一步检查解析树是否合法。比如检查要查询的数据表和数据列是否存在等等。</p>\n<h4>查询优化</h4>\n<p>经过前面的步骤生成的语法树被认为是合法的了，并且由优化器将其转化成查询计划。多数情况下，一条查询可以有很多种执行方式，最后都返回相应的结果。优化器的作用就是找到这其中最好的执行计划。</p>\n<p>MySQL使用基于成本的优化器，它尝试预测一个查询使用某种执行计划时的成本，并选择其中成本最小的一个。在MySQL可以通过查询当前会话的<code>last_query_cost</code>的值来得到其计算当前查询的成本。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f785620002270\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nmysql&gt; select * from t_message limit 10;\r\n...省略结果集\r\n\r\nmysql&gt; show status like 'last_query_cost';\r\n+-----------------+-------------+\r\n| Variable_name   | Value       |\r\n+-----------------+-------------+\r\n| Last_query_cost | 6391.799000 |\r\n+-----------------+-------------+\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f785620002270-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f785620002270-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f785620002270-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f785620002270-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f785620002270-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f785620002270-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f785620002270-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f785620002270-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f785620002270-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f785620002270-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f785620002270-1\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">t_message </span><span class=\"crayon-i\">limit</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f785620002270-2\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span>省略结果集</div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f785620002270-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f785620002270-4\"><span class=\"crayon-v\">mysql</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">show </span><span class=\"crayon-e\">status </span><span class=\"crayon-i\">like</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'last_query_cost'</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f785620002270-5\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f785620002270-6\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Variable_name</span><span class=\"crayon-h\">   </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Value</span><span class=\"crayon-h\">       </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f785620002270-7\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f785620002270-8\"><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Last_query_cost</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6391.799000</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f785620002270-9\"><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-o\">+</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f785620002270-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0021 seconds] -->\r\n<p>示例中的结果表示优化器认为大概需要做6391个数据页的随机查找才能完成上面的查询。这个结果是根据一些列的统计信息计算得来的，这些统计信息包括：每张表或者索引的页面个数、索引的基数、索引和数据行的长度、索引的分布情况等等。</p>\n<p>有非常多的原因会导致MySQL选择错误的执行计划，比如统计信息不准确、不会考虑不受其控制的操作成本（用户自定义函数、存储过程）、MySQL认为的最优跟我们想的不一样（我们希望执行时间尽可能短，但MySQL值选择它认为成本小的，但成本小并不意味着执行时间短）等等。</p>\n<p>MySQL的查询优化器是一个非常复杂的部件，它使用了非常多的优化策略来生成一个最优的执行计划：</p>\n<ul>\n<li>重新定义表的关联顺序（多张表关联查询时，并不一定按照SQL中指定的顺序进行，但有一些技巧可以指定关联顺序）</li>\n<li>优化<code>MIN()</code>和<code>MAX()</code>函数（找某列的最小值，如果该列有索引，只需要查找B+Tree索引最左端，反之则可以找到最大值，具体原理见下文）</li>\n<li>提前终止查询（比如：使用Limit时，查找到满足数量的结果集后会立即终止查询）</li>\n<li>优化排序（在老版本MySQL会使用两次传输排序，即先读取行指针和需要排序的字段在内存中对其排序，然后再根据排序结果去读取数据行，而新版本采用的是单次传输排序，也就是一次读取所有的数据行，然后根据给定的列排序。对于I/O密集型应用，效率会高很多）</li>\n</ul>\n<p>随着MySQL的不断发展，优化器使用的优化策略也在不断的进化，这里仅仅介绍几个非常常用且容易理解的优化策略，其他的优化策略，大家自行查阅吧。</p>\n<h4>查询执行引擎</h4>\n<p>在完成解析和优化阶段以后，MySQL会生成对应的执行计划，查询执行引擎根据执行计划给出的指令逐步执行得出结果。整个执行过程的大部分操作均是通过调用存储引擎实现的接口来完成，这些接口被称为<code>handler API</code>。查询过程中的每一张表由一个<code>handler</code>实例表示。实际上，MySQL在查询优化阶段就为每一张表创建了一个<code>handler</code>实例，优化器可以根据这些实例的接口来获取表的相关信息，包括表的所有列名、索引统计信息等。存储引擎接口提供了非常丰富的功能，但其底层仅有几十个接口，这些接口像搭积木一样完成了一次查询的大部分操作。</p>\n<h4>返回结果给客户端</h4>\n<p>查询执行的最后一个阶段就是将结果返回给客户端。即使查询不到数据，MySQL仍然会返回这个查询的相关信息，比如该查询影响到的行数以及执行时间等等。</p>\n<p>如果查询缓存被打开且这个查询可以被缓存，MySQL也会将结果存放到缓存中。</p>\n<p>结果集返回客户端是一个增量且逐步返回的过程。有可能MySQL在生成第一条结果时，就开始向客户端逐步返回结果集了。这样服务端就无须存储太多结果而消耗过多内存，也可以让客户端第一时间获得返回结果。需要注意的是，结果集中的每一行都会以一个满足①中所描述的通信协议的数据包发送，再通过TCP协议进行传输，在传输过程中，可能对MySQL的数据包进行缓存然后批量发送。</p>\n<p>回头总结一下MySQL整个查询执行过程，总的来说分为6个步骤：</p>\n<ol>\n<li>客户端向MySQL服务器发送一条查询请求</li>\n<li>服务器首先检查查询缓存，如果命中缓存，则立刻返回存储在缓存中的结果。否则进入下一阶段</li>\n<li>服务器进行SQL解析、预处理、再由优化器生成对应的执行计划</li>\n<li>MySQL根据执行计划，调用存储引擎的API来执行查询</li>\n<li>将结果返回给客户端，同时缓存查询结果</li>\n</ol>\n<h3>性能优化建议</h3>\n<p>看了这么多，你可能会期待给出一些优化手段，是的，下面会从3个不同方面给出一些优化建议。但请等等，还有一句忠告要先送给你：<strong>不要听信你看到的关于优化的“绝对真理”，包括本文所讨论的内容，而应该是在实际的业务场景下通过测试来验证你关于执行计划以及响应时间的假设</strong>。</p>\n<h4>Scheme设计与数据类型优化</h4>\n<p>选择数据类型只要遵循<strong>小而简单</strong>的原则就好，越小的数据类型通常会更快，占用更少的磁盘、内存，处理时需要的CPU周期也更少。越简单的数据类型在计算时需要更少的CPU周期，比如，整型就比字符操作代价低，因而会使用整型来存储ip地址，使用<code>DATETIME</code>来存储时间，而不是使用字符串。</p>\n<p>这里总结几个可能容易理解错误的技巧：</p>\n<ol>\n<li>通常来说把可为<code>NULL</code>的列改为<code>NOT NULL</code>不会对性能提升有多少帮助，只是如果计划在列上创建索引，就应该将该列设置为<code>NOT NULL</code>。</li>\n<li>对整数类型指定宽度，比如<code>INT(11)</code>，没有任何卵用。<code>INT</code>使用32位（4个字节）存储空间，那么它的表示范围已经确定，所以<code>INT(1)</code>和<code>INT(20)</code>对于存储和计算是相同的。</li>\n<li><code>UNSIGNED</code>表示不允许负值，大致可以使正数的上限提高一倍。比如<code>TINYINT</code>存储范围是-128 ~ 127，而<code>UNSIGNED TINYINT</code>存储的范围却是0 – 255。</li>\n<li>通常来讲，没有太大的必要使用<code>DECIMAL</code>数据类型。即使是在需要存储财务数据时，仍然可以使用<code>BIGINT</code>。比如需要精确到万分之一，那么可以将数据乘以一百万然后使用<code>BIGINT</code>存储。这样可以避免浮点数计算不准确和<code>DECIMAL</code>精确计算代价高的问题。</li>\n<li><code>TIMESTAMP</code>使用4个字节存储空间，<code>DATETIME</code>使用8个字节存储空间。因而，<code>TIMESTAMP</code>只能表示1970 – 2038年，比<code>DATETIME</code>表示的范围小得多，而且<code>TIMESTAMP</code>的值因时区不同而不同。</li>\n<li>大多数情况下没有使用枚举类型的必要，其中一个缺点是枚举的字符串列表是固定的，添加和删除字符串（枚举选项）必须使用<code>ALTER TABLE</code>（如果只只是在列表末尾追加元素，不需要重建表）。</li>\n<li>schema的列不要太多。原因是存储引擎的API工作时需要在服务器层和存储引擎层之间通过行缓冲格式拷贝数据，然后在服务器层将缓冲内容解码成各个列，这个转换过程的代价是非常高的。如果列太多而实际使用的列又很少的话，有可能会导致CPU占用过高。</li>\n<li>大表<code>ALTER TABLE</code>非常耗时，MySQL执行大部分修改表结果操作的方法是用新的结构创建一个张空表，从旧表中查出所有的数据插入新表，然后再删除旧表。尤其当内存不足而表又很大，而且还有很大索引的情况下，耗时更久。当然有一些奇技淫巧可以解决这个问题，有兴趣可自行查阅。</li>\n</ol>\n<h4>创建高性能索引</h4>\n<p>索引是提高MySQL查询性能的一个重要途径，但过多的索引可能会导致过高的磁盘使用率以及过高的内存占用，从而影响应用程序的整体性能。应当尽量避免事后才想起添加索引，因为事后可能需要监控大量的SQL才能定位到问题所在，而且添加索引的时间肯定是远大于初始添加索引所需要的时间，可见索引的添加也是非常有技术含量的。</p>\n<p>接下来将向你展示一系列创建高性能索引的策略，以及每条策略其背后的工作原理。但在此之前，先了解与索引相关的一些算法和数据结构，将有助于更好的理解后文的内容。</p>\n<h5>索引相关的数据结构和算法</h5>\n<p>通常我们所说的索引是指<code>B-Tree</code>索引，它是目前关系型数据库中查找数据最为常用和有效的索引，大多数存储引擎都支持这种索引。使用<code>B-Tree</code>这个术语，是因为MySQL在<code>CREATE TABLE</code>或其它语句中使用了这个关键字，但实际上不同的存储引擎可能使用不同的数据结构，比如InnoDB就是使用的<code>B+Tree</code>。</p>\n<p><code>B+Tree</code>中的B是指<code>balance</code>，意为平衡。需要注意的是，B+树索引并不能找到一个给定键值的具体行，它找到的只是被查找数据行所在的页，接着数据库会把页读入到内存，再在内存中进行查找，最后得到要查找的数据。</p>\n<p>在介绍<code>B+Tree</code>前，先了解一下二叉查找树，它是一种经典的数据结构，其左子树的值总是小于根的值，右子树的值总是大于根的值，如下图①。如果要在这课树中查找值为5的记录，其大致流程：先找到根，其值为6，大于5，所以查找左子树，找到3，而5大于3，接着找3的右子树，总共找了3次。同样的方法，如果查找值为8的记录，也需要查找3次。所以二叉查找树的平均查找次数为(3 + 3 + 3 + 2 + 2 + 1) / 6 = 2.3次，而顺序查找的话，查找值为2的记录，仅需要1次，但查找值为8的记录则需要6次，所以顺序查找的平均查找次数为：(1 + 2 + 3 + 4 + 5 + 6) / 6 = 3.3次，因此大多数情况下二叉查找树的平均查找速度比顺序查找要快。</p>\n<div>\n<div>\n<div> <img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frnqlpnol6j20h606gglv.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">二叉查找树和平衡二叉树</div>\n</div>\n<p>由于二叉查找树可以任意构造，同样的值，可以构造出如图②的二叉查找树，显然这棵二叉树的查询效率和顺序查找差不多。若想二叉查找数的查询性能最高，需要这棵二叉查找树是平衡的，也即平衡二叉树（AVL树）。</p>\n<p>平衡二叉树首先需要符合二叉查找树的定义，其次必须满足任何节点的两个子树的高度差不能大于1。显然图②不满足平衡二叉树的定义，而图①是一课平衡二叉树。平衡二叉树的查找性能是比较高的（性能最好的是最优二叉树），查询性能越好，维护的成本就越大。比如图①的平衡二叉树，当用户需要插入一个新的值9的节点时，就需要做出如下变动。</p>\n<div>\n<div>\n<div> <img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1frnqlq46oqj20ey069q39.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">平衡二叉树旋转</div>\n</div>\n<p>通过一次左旋操作就将插入后的树重新变为平衡二叉树是最简单的情况了，实际应用场景中可能需要旋转多次。至此我们可以考虑一个问题，平衡二叉树的查找效率还不错，实现也非常简单，相应的维护成本还能接受，为什么MySQL索引不直接使用平衡二叉树？</p>\n<p>随着数据库中数据的增加，索引本身大小随之增加，不可能全部存储在内存中，因此索引往往以索引文件的形式存储的磁盘上。这样的话，索引查找过程中就要产生磁盘I/O消耗，相对于内存存取，I/O存取的消耗要高几个数量级。可以想象一下一棵几百万节点的二叉树的深度是多少？如果将这么大深度的一颗二叉树放磁盘上，每读取一个节点，需要一次磁盘的I/O读取，整个查找的耗时显然是不能够接受的。那么如何减少查找过程中的I/O存取次数？</p>\n<p>一种行之有效的解决方法是减少树的深度，将二叉树变为m叉树（多路搜索树），而<code>B+Tree</code>就是一种多路搜索树。理解<code>B+Tree</code>时，只需要理解其最重要的两个特征即可：第一，所有的关键字（可以理解为数据）都存储在叶子节点（<code>Leaf Page</code>），非叶子节点（<code>Index Page</code>）并不存储真正的数据，所有记录节点都是按键值大小顺序存放在同一层叶子节点上。其次，所有的叶子节点由指针连接。如下图为高度为2的简化了的<code>B+Tree</code>。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlqkcsmj20jg04ymx9.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">简化B+Tree</div>\n</div>\n<p>怎么理解这两个特征？MySQL将每个节点的大小设置为一个页的整数倍（原因下文会介绍），也就是在节点空间大小一定的情况下，每个节点可以存储更多的内结点，这样每个结点能索引的范围更大更精确。所有的叶子节点使用指针链接的好处是可以进行区间访问，比如上图中，如果查找大于20而小于30的记录，只需要找到节点20，就可以遍历指针依次找到25、30。如果没有链接指针的话，就无法进行区间查找。这也是MySQL使用<code>B+Tree</code>作为索引存储结构的重要原因。</p>\n<p>MySQL为何将节点大小设置为页的整数倍，这就需要理解磁盘的存储原理。磁盘本身存取就比主存慢很多，在加上机械运动损耗（特别是普通的机械硬盘），磁盘的存取速度往往是主存的几百万分之一，为了尽量减少磁盘I/O，磁盘往往不是严格按需读取，而是每次都会预读，即使只需要一个字节，磁盘也会从这个位置开始，顺序向后读取一定长度的数据放入内存，预读的长度一般为页的整数倍。</p>\n<blockquote><p>页是计算机管理存储器的逻辑块，硬件及OS往往将主存和磁盘存储区分割为连续的大小相等的块，每个存储块称为一页（许多OS中，页的大小通常为4K）。主存和磁盘以页为单位交换数据。当程序要读取的数据不在主存中时，会触发一个缺页异常，此时系统会向磁盘发出读盘信号，磁盘会找到数据的起始位置并向后连续读取一页或几页载入内存中，然后一起返回，程序继续运行。</p></blockquote>\n<p>MySQL巧妙利用了磁盘预读原理，将一个节点的大小设为等于一个页，这样每个节点只需要一次I/O就可以完全载入。为了达到这个目的，每次新建节点时，直接申请一个页的空间，这样就保证一个节点物理上也存储在一个页里，加之计算机存储分配都是按页对齐的，就实现了读取一个节点只需一次I/O。假设<code>B+Tree</code>的高度为h，一次检索最多需要<code>h-1</code>次I/O（根节点常驻内存），复杂度O(h) = O(logmN)。实际应用场景中，M通常较大，常常超过100，因此树的高度一般都比较小，通常不超过3。</p>\n<p>最后简单了解下<code>B+Tree</code>节点的操作，在整体上对索引的维护有一个大概的了解，虽然索引可以大大提高查询效率，但维护索引仍要花费很大的代价，因此合理的创建索引也就尤为重要。</p>\n<p>仍以上面的树为例，我们假设每个节点只能存储4个内节点。首先要插入第一个节点28，如下图所示。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlqysrpj20jg05aaa4.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">leaf page和index page都没有满</div>\n</div>\n<p>接着插入下一个节点70，在Index Page中查询后得知应该插入到50 – 70之间的叶子节点，但叶子节点已满，这时候就需要进行也分裂的操作，当前的叶子节点起点为50，所以根据中间值来拆分叶子节点，如下图所示。</p>\n<div>\n<div>\n<div></div>\n<div><img><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1frnqlrek5aj20jg0bft96.jpg\"></div>\n</div>\n<div style=\"text-align: center\">Leaf Page拆分</div>\n</div>\n<p>最后插入一个节点95，这时候Index Page和Leaf Page都满了，就需要做两次拆分，如下图所示。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlrt7gcj20jg0ccgms.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">Leaf Page与Index Page拆分</div>\n</div>\n<p>拆分后最终形成了这样一颗树。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlsibq4j20jg04iaa4.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">最终树</div>\n</div>\n<p><code>B+Tree</code>为了保持平衡，对于新插入的值需要做大量的拆分页操作，而页的拆分需要I/O操作，为了尽可能的减少页的拆分操作，<code>B+Tree</code>也提供了类似于平衡二叉树的旋转功能。当Leaf Page已满但其左右兄弟节点没有满的情况下，<code>B+Tree</code>并不急于去做拆分操作，而是将记录移到当前所在页的兄弟节点上。通常情况下，左兄弟会被先检查用来做旋转操作。就比如上面第二个示例，当插入70的时候，并不会去做页拆分，而是左旋操作。</p>\n<div>\n<div>\n<div> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1frnqlstvi1j20jg0dq3yz.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">左旋操作</div>\n</div>\n<p>通过旋转操作可以最大限度的减少页分裂，从而减少索引维护过程中的磁盘的I/O操作，也提高索引维护效率。需要注意的是，删除节点跟插入节点类似，仍然需要旋转和拆分操作，这里就不再说明。</p>\n<h5>高性能策略</h5>\n<p>通过上文，相信你对<code>B+Tree</code>的数据结构已经有了大致的了解，但MySQL中索引是如何组织数据的存储呢？以一个简单的示例来说明，假如有如下数据表：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f79d658690358\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCREATE TABLE People(\r\n    last_name varchar(50) not null,\r\n    first_name varchar(50) not null,\r\n    dob date not null,\r\n    gender enum(`m`,`f`) not null,\r\n    key(last_name,first_name,dob)\r\n);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f79d658690358-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f79d658690358-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f79d658690358-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f79d658690358-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f79d658690358-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f79d658690358-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f79d658690358-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f79d658690358-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f79d658690358-1\"><span class=\"crayon-e\">CREATE </span><span class=\"crayon-e\">TABLE </span><span class=\"crayon-e\">People</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f79d658690358-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">last_name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f79d658690358-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">first_name </span><span class=\"crayon-e\">varchar</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f79d658690358-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">dob </span><span class=\"crayon-e\">date </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f79d658690358-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">gender </span><span class=\"crayon-t\">enum</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">`</span><span class=\"crayon-v\">f</span><span class=\"crayon-sy\">`</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">not</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">null</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f79d658690358-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">key</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">last_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">first_name</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">dob</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f79d658690358-7\"><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f79d658690358-8\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>对于表中每一行数据，索引中包含了last_name、first_name、dob列的值，下图展示了索引是如何组织数据存储的。</p>\n<div>\n<div>\n<div> <img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1frnqlta58nj20jg03uglt.jpg\"></div>\n<div><img></div>\n</div>\n<div style=\"text-align: center\">索引如何组织数据存储，来自：高性能MySQL</div>\n</div>\n<p>可以看到，索引首先根据第一个字段来排列顺序，当名字相同时，则根据第三个字段，即出生日期来排序，正是因为这个原因，才有了索引的“最左原则”。</p>\n<h6>1、MySQL不会使用索引的情况：非独立的列</h6>\n<p>“独立的列”是指索引列不能是表达式的一部分，也不能是函数的参数。比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7ad033206130\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect * from where id + 1 = 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7ad033206130-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7ad033206130-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7ad033206130-1\"><span class=\"crayon-e \">select *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7ad033206130-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>我们很容易看出其等价于 id = 4，但是MySQL无法自动解析这个表达式，使用函数是同样的道理。</p>\n<h6>2、前缀索引</h6>\n<p>如果列很长，通常可以索引开始的部分字符，这样可以有效节约索引空间，从而提高索引效率。</p>\n<h6>3、多列索引和索引顺序</h6>\n<p>在多数情况下，在多个列上建立独立的索引并不能提高查询性能。理由非常简单，MySQL不知道选择哪个索引的查询效率更好，所以在老版本，比如MySQL5.0之前就会随便选择一个列的索引，而新的版本会采用合并索引的策略。举个简单的例子，在一张电影演员表中，在actor_id和film_id两个列上都建立了独立的索引，然后有如下查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7b1139418100\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect film_id,actor_id from film_actor where actor_id = 1 or film_id = 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7b1139418100-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7b1139418100-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7b1139418100-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">or</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7b1139418100-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>老版本的MySQL会随机选择一个索引，但新版本做如下的优化：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7b5868770797\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect film_id,actor_id from film_actor where actor_id = 1 \r\nunion all \r\nselect film_id,actor_id from film_actor where film_id = 1 and actor_id &lt;&gt; 1\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7b5868770797-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7b5868770797-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7b5868770797-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7b5868770797-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7b5868770797-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7b5868770797-2\"><span class=\"crayon-e\">union </span><span class=\"crayon-e\">all </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7b5868770797-3\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">actor_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">film_actor </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">actor_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7b5868770797-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<ul>\n<li>当出现多个索引做相交操作时（多个AND条件），通常来说一个包含所有相关列的索引要优于多个独立索引。</li>\n<li>当出现多个索引做联合操作时（多个OR条件），对结果集的合并、排序等操作需要耗费大量的CPU和内存资源，特别是当其中的某些索引的选择性不高，需要返回合并大量数据时，查询成本更高。所以这种情况下还不如走全表扫描。</li>\n</ul>\n<p>因此<code>explain</code>时如果发现有索引合并（Extra字段出现<code>Using union</code>），应该好好检查一下查询和表结构是不是已经是最优的，如果查询和表都没有问题，那只能说明索引建的非常糟糕，应当慎重考虑索引是否合适，有可能一个包含所有相关列的多列索引更适合。</p>\n<p>前面我们提到过索引如何组织数据存储的，从图中可以看到多列索引时，索引的顺序对于查询是至关重要的，很明显应该把选择性更高的字段放到索引的前面，这样通过第一个字段就可以过滤掉大多数不符合条件的数据。</p>\n<blockquote><p><strong>索引选择性</strong>是指不重复的索引值和数据表的总记录数的比值，选择性越高查询效率越高，因为选择性越高的索引可以让MySQL在查询时过滤掉更多的行。唯一索引的选择性是1，这是最好的索引选择性，性能也是最好的。</p></blockquote>\n<p>理解索引选择性的概念后，就不难确定哪个字段的选择性较高了，查一下就知道了，比如：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7b9158283442\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT * FROM payment where staff_id = 2 and customer_id = 584\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7b9158283442-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7b9158283442-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7b9158283442-1\"><span class=\"crayon-e \">SELECT *</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">payment </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">customer_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">584</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7b9158283442-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>是应该创建<code>(staff_id,customer_id)</code>的索引还是应该颠倒一下顺序？执行下面的查询，哪个字段的选择性更接近1就把哪个字段索引前面就好。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7bf701228414\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect count(distinct staff_id)/count(*) as staff_id_selectivity,\r\n       count(distinct customer_id)/count(*) as customer_id_selectivity,\r\n       count(*) from payment\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7bf701228414-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7bf701228414-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7bf701228414-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7bf701228414-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7bf701228414-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">distinct </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">staff_id_selectivity</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7bf701228414-2\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">distinct </span><span class=\"crayon-v\">customer_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">as</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">customer_id_selectivity</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7bf701228414-3\"><span class=\"crayon-h\">       </span><span class=\"crayon-e\">count</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-i\">payment</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7bf701228414-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>多数情况下使用这个原则没有任何问题，但仍然注意你的数据中是否存在一些特殊情况。举个简单的例子，比如要查询某个用户组下有过交易的用户信息：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7c2521926080\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect user_id from trade where user_group_id = 1 and trade_amount &gt; 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7c2521926080-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7c2521926080-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7c2521926080-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-e\">user_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">trade </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">user_group_id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">trade_amount</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7c2521926080-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>MySQL为这个查询选择了索引<code>(user_group_id,trade_amount)</code>，如果不考虑特殊情况，这看起来没有任何问题，但实际情况是这张表的大多数数据都是从老系统中迁移过来的，由于新老系统的数据不兼容，所以就给老系统迁移过来的数据赋予了一个默认的用户组。这种情况下，通过索引扫描的行数跟全表扫描基本没什么区别，索引也就起不到任何作用。</p>\n<p>推广开来说，经验法则和推论在多数情况下是有用的，可以指导我们开发和设计，但实际情况往往会更复杂，实际业务场景下的某些特殊情况可能会摧毁你的整个设计。</p>\n<h6>4、避免多个范围条件</h6>\n<p>实际开发中，我们会经常使用多个范围条件，比如想查询某个时间段内登录过的用户：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7c6851100890\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nselect user.* from user where login_time &gt; '2017-04-01' and age between 18 and 30;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7c6851100890-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7c6851100890-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7c6851100890-1\"><span class=\"crayon-e\">select </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">.</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">user </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">login_time</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2017-04-01'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">age </span><span class=\"crayon-i\">between</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">30</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7c6851100890-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>这个查询有一个问题：它有两个范围条件，login_time列和age列，MySQL可以使用login_time列的索引或者age列的索引，但无法同时使用它们。</p>\n<h6>5、覆盖索引</h6>\n<p>如果一个索引包含或者说覆盖所有需要查询的字段的值，那么就没有必要再回表查询，这就称为覆盖索引。覆盖索引是非常有用的工具，可以极大的提高性能，因为查询只需要扫描索引会带来许多好处：</p>\n<ul>\n<li>索引条目远小于数据行大小，如果只读取索引，极大减少数据访问量</li>\n<li>索引是有按照列值顺序存储的，对于I/O密集型的范围查询要比随机从磁盘读取每一行数据的IO要少的多</li>\n</ul>\n<h6>6、使用索引扫描来排序</h6>\n<p>MySQL有两种方式可以生产有序的结果集，其一是对结果集进行排序的操作，其二是按照索引顺序扫描得出的结果自然是有序的。如果explain的结果中<code>type</code>列的值为<code>index</code>表示使用了索引扫描来做排序。</p>\n<p>扫描索引本身很快，因为只需要从一条索引记录移动到相邻的下一条记录。但如果索引本身不能覆盖所有需要查询的列，那么就不得不每扫描一条索引记录就回表查询一次对应的行。这个读取操作基本上是随机I/O，因此按照索引顺序读取数据的速度通常要比顺序地全表扫描要慢。</p>\n<p>在设计索引时，如果一个索引既能够满足排序，又满足查询，是最好的。</p>\n<p>只有当索引的列顺序和<code>ORDER BY</code>子句的顺序完全一致，并且所有列的排序方向也一样时，才能够使用索引来对结果做排序。如果查询需要关联多张表，则只有<code>ORDER BY</code>子句引用的字段全部为第一张表时，才能使用索引做排序。<code>ORDER BY</code>子句和查询的限制是一样的，都要满足最左前缀的要求（有一种情况例外，就是最左的列被指定为常数，下面是一个简单的示例），其他情况下都需要执行排序操作，而无法利用索引排序。</p>\n<blockquote><p>\n</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7ca704331183\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 最左列为常数，索引：(date,staff_id,customer_id)\r\nselect  staff_id,customer_id from demo where date = '2015-06-01' order by staff_id,customer_id\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7ca704331183-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7ca704331183-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7ca704331183-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7ca704331183-1\"><span class=\"crayon-c\">// 最左列为常数，索引：(date,staff_id,customer_id)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7ca704331183-2\"><span class=\"crayon-e\">select  </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">customer_id </span><span class=\"crayon-e\">from </span><span class=\"crayon-e\">demo </span><span class=\"crayon-e\">where </span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'2015-06-01'</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">order </span><span class=\"crayon-e\">by </span><span class=\"crayon-v\">staff_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">customer</span><span class=\"crayon-sy\">_</span>id</div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7ca704331183-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>\n</p></blockquote>\n<h6>7、冗余和重复索引</h6>\n<p>冗余索引是指在相同的列上按照相同的顺序创建的相同类型的索引，应当尽量避免这种索引，发现后立即删除。比如有一个索引<code>(A,B)</code>，再创建索引<code>(A)</code>就是冗余索引。冗余索引经常发生在为表添加新索引时，比如有人新建了索引<code>(A,B)</code>，但这个索引不是扩展已有的索引<code>(A)</code>。</p>\n<p>大多数情况下都应该尽量扩展已有的索引而不是创建新索引。但有极少情况下出现性能方面的考虑需要冗余索引，比如扩展已有索引而导致其变得过大，从而影响到其他使用该索引的查询。</p>\n<h6>8、删除长期未使用的索引</h6>\n<p>定期删除一些长时间未使用过的索引是一个非常好的习惯。</p>\n<p>关于索引这个话题打算就此打住，最后要说一句，索引并不总是最好的工具，只有当索引帮助提高查询速度带来的好处大于其带来的额外工作时，索引才是有效的。对于非常小的表，简单的全表扫描更高效。对于中到大型的表，索引就非常有效。对于超大型的表，建立和维护索引的代价随之增长，这时候其他技术也许更有效，比如分区表。最后的最后，<strong><code>explain</code>后再提测是一种美德</strong>。</p>\n<h4>特定类型查询优化</h4>\n<h5>优化COUNT()查询</h5>\n<p><code>COUNT()</code>可能是被大家误解最多的函数了，它有两种不同的作用，其一是统计某个列值的数量，其二是统计行数。统计列值时，要求列值是非空的，它不会统计NULL。如果确认括号中的表达式不可能为空时，实际上就是在统计行数。最简单的就是当使用<code>COUNT(*)</code>时，并不是我们所想象的那样扩展成所有的列，实际上，它会忽略所有的列而直接统计行数。</p>\n<p>我们最常见的误解也就在这儿，在括号内指定了一列却希望统计结果是行数，而且还常常误以为前者的性能会更好。但实际并非这样，如果要统计行数，直接使用<code>COUNT(*)</code>，意义清晰，且性能更好。</p>\n<p>有时候某些业务场景并不需要完全精确的<code>COUNT</code>值，可以用近似值来代替，EXPLAIN出来的行数就是一个不错的近似值，而且执行EXPLAIN并不需要真正地去执行查询，所以成本非常低。通常来说，执行<code>COUNT()</code>都需要扫描大量的行才能获取到精确的数据，因此很难优化，MySQL层面还能做得也就只有覆盖索引了。如果不还能解决问题，只有从架构层面解决了，比如添加汇总表，或者使用redis这样的外部缓存系统。</p>\n<h5>优化关联查询</h5>\n<p>在大数据场景下，表与表之间通过一个冗余字段来关联，要比直接使用<code>JOIN</code>有更好的性能。如果确实需要使用关联查询的情况下，需要特别注意的是：</p>\n<ul>\n<li>确保<code>ON</code>和<code>USING</code>字句中的列上有索引。在创建索引的时候就要考虑到关联的顺序。当表A和表B用列c关联的时候，如果优化器关联的顺序是A、B，那么就不需要在A表的对应列上创建索引。没有用到的索引会带来额外的负担，一般来说，除非有其他理由，只需要在关联顺序中的第二张表的相应列上创建索引（具体原因下文分析）。</li>\n<li>确保任何的<code>GROUP BY</code>和<code>ORDER BY</code>中的表达式只涉及到一个表中的列，这样MySQL才有可能使用索引来优化。</li>\n</ul>\n<p>要理解优化关联查询的第一个技巧，就需要理解MySQL是如何执行关联查询的。当前MySQL关联执行的策略非常简单，它对任何的关联都执行<strong>嵌套循环关联</strong>操作，即先在一个表中循环取出单条数据，然后在嵌套循环到下一个表中寻找匹配的行，依次下去，直到找到所有表中匹配的行为为止。然后根据各个表匹配的行，返回查询中需要的各个列。</p>\n<p>太抽象了？以上面的示例来说明，比如有这样的一个查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7d2182959560\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT A.xx,B.yy \r\nFROM A INNER JOIN B USING(c)\r\nWHERE A.xx IN (5,6)\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d2182959560-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d2182959560-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d2182959560-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d2182959560-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d2182959560-1\"><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yy </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d2182959560-2\"><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">INNER </span><span class=\"crayon-i\">JOIN</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">USING</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d2182959560-3\"><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xx </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d2182959560-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>假设MySQL按照查询中的关联顺序A、B来进行关联操作，那么可以用下面的伪代码表示MySQL如何完成这个查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7d8023411410\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nouter_iterator = SELECT A.xx,A.c FROM A WHERE A.xx IN (5,6);\r\nouter_row = outer_iterator.next;\r\nwhile(outer_row) {\r\n    inner_iterator = SELECT B.yy FROM B WHERE B.c = outer_row.c;\r\n    inner_row = inner_iterator.next;\r\n    while(inner_row) {\r\n        output[inner_row.yy,outer_row.xx];\r\n        inner_row = inner_iterator.next;\r\n    }\r\n    outer_row = outer_iterator.next;\r\n}\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7d8023411410-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7d8023411410-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-1\"><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">A</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">xx </span><span class=\"crayon-st\">IN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">6</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-2\"><span class=\"crayon-v\">outer_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-3\"><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">SELECT</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">yy </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">WHERE</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">B</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">c</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-5\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">output</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">yy</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">xx</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">inner_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inner_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">outer_row</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">outer_iterator</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">next</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7d8023411410-11\"><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7d8023411410-12\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0027 seconds] -->\r\n<p>可以看到，最外层的查询是根据<code>A.xx</code>列来查询的，<code>A.c</code>上如果有索引的话，整个关联查询也不会使用。再看内层的查询，很明显<code>B.c</code>上如果有索引的话，能够加速查询，因此只需要在关联顺序中的第二张表的相应列上创建索引即可。</p>\n<h5>优化LIMIT分页</h5>\n<p>当需要分页操作时，通常会使用<code>LIMIT</code>加上偏移量的办法实现，同时加上合适的<code>ORDER BY</code>字句。如果有对应的索引，通常效率会不错，否则，MySQL需要做大量的文件排序操作。</p>\n<p>一个常见的问题是当偏移量非常大的时候，比如：<code>LIMIT 10000 20</code>这样的查询，MySQL需要查询10020条记录然后只返回20条记录，前面的10000条都将被抛弃，这样的代价非常高。</p>\n<p>优化这种查询一个最简单的办法就是尽可能的使用覆盖索引扫描，而不是查询所有的列。然后根据需要做一次关联查询再返回所有的列。对于偏移量很大时，这样做的效率会提升非常大。考虑下面的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7dd880888819\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT film_id,description FROM film ORDER BY title LIMIT 50,5;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7dd880888819-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7dd880888819-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7dd880888819-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-e\">description </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">title </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7dd880888819-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>如果这张表非常大，那么这个查询最好改成下面的样子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7e0005939960\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT film.film_id,film.description\r\nFROM film INNER JOIN (\r\n    SELECT film_id FROM film ORDER BY title LIMIT 50,5\r\n) AS tmp USING(film_id);\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7e0005939960-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7e0005939960-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7e0005939960-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7e0005939960-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7e0005939960-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7e0005939960-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-v\">film</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">film</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">description</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7e0005939960-2\"><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">INNER </span><span class=\"crayon-e\">JOIN</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7e0005939960-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">film_id </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-e\">film </span><span class=\"crayon-e\">ORDER </span><span class=\"crayon-e\">BY </span><span class=\"crayon-e\">title </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">50</span><span class=\"crayon-sy\">,</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7e0005939960-4\"><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">AS</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tmp </span><span class=\"crayon-e\">USING</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">film_id</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7e0005939960-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>这里的延迟关联将大大提升查询效率，让MySQL扫描尽可能少的页面，获取需要访问的记录后在根据关联列回原表查询所需要的列。</p>\n<p>有时候如果可以使用书签记录上次取数据的位置，那么下次就可以直接从该书签记录的位置开始扫描，这样就可以避免使用<code>OFFSET</code>，比如下面的查询：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0383f7e4464377775\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSELECT id FROM t LIMIT 10000, 10;\r\n改为：\r\nSELECT id FROM t WHERE id &gt; 10000 LIMIT 10;\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7e4464377775-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7e4464377775-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0383f7e4464377775-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0383f7e4464377775-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7e4464377775-1\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7e4464377775-2\">改为：</div><div class=\"crayon-line\" id=\"crayon-5ba9d0383f7e4464377775-3\"><span class=\"crayon-e\">SELECT </span><span class=\"crayon-e\">id </span><span class=\"crayon-i\">FROM</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">t</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">WHERE </span><span class=\"crayon-v\">id</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10000</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">LIMIT</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0383f7e4464377775-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>其他优化的办法还包括使用预先计算的汇总表，或者关联到一个冗余表，冗余表中只包含主键列和需要做排序的列。</p>\n<h5>优化UNION</h5>\n<p>MySQL处理<code>UNION</code>的策略是先创建临时表，然后再把各个查询结果插入到临时表中，最后再来做查询。因此很多优化策略在<code>UNION</code>查询中都没有办法很好的时候。经常需要手动将<code>WHERE</code>、<code>LIMIT</code>、<code>ORDER BY</code>等字句“下推”到各个子查询中，以便优化器可以充分利用这些条件先优化。</p>\n<p>除非确实需要服务器去重，否则就一定要使用<code>UNION ALL</code>，如果没有<code>ALL</code>关键字，MySQL会给临时表加上<code>DISTINCT</code>选项，这会导致整个临时表的数据做唯一性检查，这样做的代价非常高。当然即使使用ALL关键字，MySQL总是将结果放入临时表，然后再读出，再返回给客户端。虽然很多时候没有这个必要，比如有时候可以直接把每个子查询的结果返回给客户端。</p>\n<h4>结语</h4>\n<p>理解查询是如何执行以及时间都消耗在哪些地方，再加上一些优化过程的知识，可以帮助大家更好的理解MySQL，理解常见优化技巧背后的原理。希望本文中的原理、示例能够帮助大家更好的将理论和实践联系起来，更多的将理论知识运用到实践中。</p>\n<p>其他也没啥说的了，给大家留两个思考题吧，可以在脑袋里想想答案，这也是大家经常挂在嘴边的，但很少有人会思考为什么？</p>\n<ol>\n<li>有非常多的程序员在分享时都会抛出这样一个观点：尽可能不要使用存储过程，存储过程非常不容易维护，也会增加使用成本，应该把业务逻辑放到客户端。既然客户端都能干这些事，那为什么还要存储过程？</li>\n<li><code>JOIN</code>本身也挺方便的，直接查询就好了，为什么还需要视图呢？</li>\n</ol>\n<h4>参考资料</h4>\n<p>[1] <a href=\"https://link.jianshu.com?t=http://union-click.jd.com/jdc?d=6vMwSD\" target=\"_blank\" rel=\"nofollow\">姜承尧 著；MySQL技术内幕-InnoDB存储引擎；机械工业出版社，2013</a><br>\n[2] <a href=\"https://link.jianshu.com?t=http://union-click.jd.com/jdc?d=wMESxy\" target=\"_blank\" rel=\"nofollow\">Baron Scbwartz 等著；宁海元 周振兴等译；高性能MySQL（第三版）; 电子工业出版社， 2013</a><br>\n[3] <a href=\"https://link.jianshu.com?t=https://segmentfault.com/a/1190000004690721\" target=\"_blank\" rel=\"nofollow\">由 B-/B+树看 MySQL索引结构</a></p>\n<blockquote><p>备注：水平有限，难免疏漏，如果问题请留言</p></blockquote>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"114041\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"114041votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"114041\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 12 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a63042e23025aa5a9fbe75d0a79efd00a9a8582f.jpg"}
{"url_object_id": "a954aebbcc6c42bb9302d1a79cefaa26", "title": ["如何做人性化的代码审查？"], "url": "http://blog.jobbole.com/113665/", "create_date": "2018/05/30", "front_image_url": ["http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57nj93bj20lc0oe0xi.jpg"], "praise_nums": "1", "comment_nums": 2, "fav_nums": 4, "tags": "IT技术,Code Review,代码审查", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/buntamarui\">小米云豆粥</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://mtlynch.io/human-code-reviews-1/\">Michael Lynch</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>最近，我一直在读有关代码审查最佳范例的文章。我注意到这些文章的关注点是找到 bug，而忽略了代码审查其他的部分。用建设性、专业的问题沟通方式？不相关！只要识别出所有的 bug，剩下的部分会水到渠成。</p>\n<p>我只能假设我读过的这些文章都来自未来，那时候所有的开发人员都是机器人。在那个世界，你的队友欢迎对其代码未经过推敲措辞的批评，因为处理这样的信息能温暖他们冰冷的机器人之心。</p>\n<p>我要做一个大胆的假设，你想要在当前世界改进代码审查，此时你的队友都是人类。我还要做一个更大胆的假设，你与同事之间积极的关系本身就是一个目的，而不仅仅是一个可调整的变量来最小化缺陷的平均成本。在这些情况下，你的审查实践会发生怎样的变化呢？</p>\n<p>在这篇文章中，我讨论了一些技巧，把代码审查既看作是技术过程，也看作是社会过程。</p>\n<h2>什么是代码审查?</h2>\n<p>“代码审查（code review）”这一术语可以指一系列活动，从简单地站在队友身后读读代码，到 20 人与会的单行代码分析。我用这一术语指正式的、书面的过程，但也不像一系列现场代码审查会议那么重大。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57nj93bj20lc0oe0xi.jpg\" width=\"690\" height=\"789\"></p>\n<p>代码审查的参与者包括<strong>作者</strong>以及<strong>审查者</strong>：作者写代码并把代码送去审查，审查者读代码并决定代码什么时候就绪并入团队的代码库。一次审查可以由多个审查者完成，但是我做了简化的假设——你是唯一的审查者。</p>\n<p>在代码审查开始之前，作者必须创建一个<strong>变更表</strong>。作者想要将源代码并入团队代码库，变更表包括一系列源代码的变更。</p>\n<p>当作者把变更表发给审查者时，审查就开始了。代码审查是<strong>循环</strong>发生的。每个循环都是作者与审查者之间完整的往返：作者发送变更，审查者给予变更的书面反馈。每次代码审查都包括一次或者更多的循环。</p>\n<p>当审查者<strong>批准</strong>了这些变更，审查结束。这通常指的是给出 LGTM，“我觉得不错（looks good to me）”的简写。</p>\n<h2>这为什么很难？</h2>\n<p>如果程序员给你发了一份变更表，他们觉得这个变更表棒极了。你又给他们写了一份详细的清单，解释为什么这个变更表并不好。这是需要小心处理的信息。</p>\n<blockquote><p>这是我不想念 IT 的一个原因，因为程序员是非常不可爱的人……比如，在航空业，那些过分高估了自己技术水平的人都死了。</p>\n<p>Philip Greenspun，ArsDigita 的联合创始人，引自《<a href=\"http://amzn.to/2g6oTsV\">Founders at Work</a>》。</p></blockquote>\n<p>作者容易把对其代码的批评解读为暗示他们不是合格的程序员。代码审查是一个分享知识和做工程决定的机会。但是如果作者把讨论理解为个人攻击，这个目标无法达成。</p>\n<p>除此之外，你还面临着书面传达想法的挑战，词不达意的风险会更高。作者听不到你的语气，也看不到你的肢体语言，所以清晰地、小心地传达你的反馈更为重要。对一个有戒备心的作者来说，一句无冒犯意味的批注，比如“你忘了关闭文件句柄”，可以被理解成“真不敢相信你忘了关闭文件句柄！你真是个傻子。”</p>\n<h2>技巧</h2>\n<ol>\n<li>让电脑做无聊的部分</li>\n<li>用风格指南平息风格争论</li>\n<li>马上开始审查</li>\n<li>从高级别开始，逐步向下</li>\n<li>慷慨地使用代码示例</li>\n<li>永远别说“你<strong>”</strong></li>\n<li>把反馈表达成请求，而不是指令</li>\n<li>把批注与原则联系在一起，而不是观点</li>\n</ol>\n<h3>让电脑做无聊的部分</h3>\n<p>在会议和邮件的干扰下，可用来专注于代码的时间很少。你的精神毅力更是短缺。读队友的代码是认知上的负担，要求高强度的专注。别把这些资源浪费在电脑能做的任务上，尤其是当电脑能做得更好的时候。</p>\n<p>空白错误是一个显著的例子。比较一下人类审查者找到缩进错误并与作者一起改正所花费的精力，和仅仅使用一个自动排版工具所花费的精力：</p>\n<table style=\"height: 704px;\" width=\"687\">\n<thead>\n<tr>\n<td width=\"68%\"><strong>人类审查者需要的精力</strong></td>\n<td width=\"31%\"><strong>排版工具需要的精力</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"68%\">1.审查者寻找空白错误，找到错误的缩进\n<p>2.审查者写批注，指出错误缩进</p>\n<p>3.审查者重新读批注，确保措辞清晰，不含指责意味</p>\n<p>4.作者读批注</p>\n<p>5.作者改正代码缩进</p>\n<p>6.审查者核实作者适当地处理了批注</p></td>\n<td width=\"31%\">无！</td>\n</tr>\n</tbody>\n</table>\n<p>右边是空的，因为作者用了一个代码编辑器，每次他们点击“保存”时，该代码编辑器会自动规定空白的格式。在最糟的情况下，作者把代码发出去以供审查，<a href=\"https://en.wikipedia.org/wiki/Continuous_integration\">持续集成</a>解决方法报告说空格错误。作者在不需要审查者顾虑的情况下，修正这个问题。</p>\n<p>在代码审查中寻找可以被自动解决的机械性任务。以下是常见的例子：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"35%\"><strong>任务</strong></td>\n<td width=\"64%\"><strong>自动解决方法</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"35%\">验证代码的构建</td>\n<td width=\"64%\">持续集成方法，比如 <a href=\"https://travis-ci.com/\">Travis</a> 或者 <a href=\"https://circleci.com/\">CircleCI</a></td>\n</tr>\n<tr>\n<td width=\"35%\">证实通过了自动测试</td>\n<td width=\"64%\">持续集成方法，比如 <a href=\"https://travis-ci.com/\">Travis</a> 或者 <a href=\"https://circleci.com/\">CircleCI</a></td>\n</tr>\n<tr>\n<td width=\"35%\">验证代码空白与团队风格一致</td>\n<td width=\"64%\">代码排版器，比如 <a href=\"https://clang.llvm.org/docs/ClangFormat.html\">ClangFormat</a> (C/C++ 排版器) 或者 <a href=\"https://golang.org/cmd/gofmt/\">gofmt</a> (Go 排版器)</td>\n</tr>\n<tr>\n<td width=\"35%\">识别未使用的输入或者变量</td>\n<td width=\"64%\">代码 linter，比如 <a href=\"https://pypi.python.org/pypi/pyflakes\">pyflakes</a> (Python linter) 或者 <a href=\"http://jslint.com/help.html\">JSLint</a> (JavaScript linter)</td>\n</tr>\n</tbody>\n</table>\n<p>自动化使你作为审查者能做出更多有意义的贡献。当你能忽略一整个类别的问题，比如输入的排序或者源文件命名的约定，你能够关注更有趣的事情，比如函数错误或者可读性缺陷。</p>\n<p>自动化也能给作者带来好处。自动化使作者用几秒钟发现粗心的错误，而不是几小时。即时反馈使得从错误中学习更容易，修正错误的代价也更小，因为作者脑海中还有相关的背景。另外，如果他们不得不听到自己犯下的愚蠢错误，对自尊心来说，从电脑那听到要比从你那听到更容易被接受。</p>\n<p>和你的团队一起将这些自动检查加入代码审查的工作流程中（例如，在 Git 中的 <a href=\"https://git-scm.com/book/en/v2/Customizing-Git-Git-Hooks\">pre-commit hooks</a> 或者 Github 中的 <a href=\"https://developer.github.com/webhooks/\">webhooks</a>）。如果审查过程要求作者手动运行这些检查，你会损失大部分好处。作者总是会忘记一些情况，迫使你继续审查简单的问题，而这些问题本来就能被自动处理。</p>\n<h3>用风格指南平息风格争论</h3>\n<p>关于风格的争论浪费了审查的时间。一致的风格确实重要，但是代码审查不是争论花括号位置的时候。在审查中消除风格争论的最佳办法是，遵守一个风格指南。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57oasfpj20rs0h50zw.jpg\" width=\"690\" height=\"426\"></p>\n<p>好的风格指南不仅定义了像命名习惯或者空白规则这样的表面元素，而且定义了怎样使用给定编程语言的特征。比如，JavaScript 和 Perl 都包含了一些功能——他们提供了许多实现相同逻辑的方法。风格指南定义了做事的唯一方法，这样不会以一半队员用了一组语言特征而另一半队员用了完全不同的一组特征收尾。</p>\n<p>一旦有了一个风格指南，你就不需要浪费审查循环，来跟作者争论到底谁的命名习惯最好。只要遵从风格指南然后继续就行。如果你的风格指南没有指定某个特定问题的约定，那它一般都不值得争论。如果你遇到一个风格指南未涉及的问题，它又重要到需要讨论，和团队一起推敲。然后把决定加到风格指南，这样你们永远不需要再进行一次这个讨论。</p>\n<h4><em>选择</em><em> 1</em><em>：采纳一个现存的风格指南</em></h4>\n<p>如果从网上搜索，你能找到已发布的风格指南可供使用。<a href=\"https://google.github.io/styleguide/\">Google 的编程风格指南</a>是最知名的，但是如果它的风格不适合你，你可以找到其他的指南。通过采纳一个现存的指南，不需要从头创造一个风格指南的大量花费就能继承其好处。</p>\n<p>坏处是组织为他们自己特别的需要优化其风格指南。比如，Google 的风格指南在<a href=\"https://google.github.io/styleguide/cppguide.html#C++11\">使用新语言特征</a>上比较保守，因为他们有一个巨大的代码库，其中的代码要在所有东西上运行，从家用路由器到最新的 iPhone。如果你们是一个只有一个产品的四人小组，你可能选择在使用前沿语言特征或者扩展时更大胆。</p>\n<h4><em>选择</em><em> 2</em><em>：不断创造你自己的风格指南</em></h4>\n<p>如果你不想采纳现存的指南，你可以自己创造一个。在代码审查中每产生一次风格争论，向整个团队提问来决定官方约定应该是什么。当你们达成共识，把决定编进风格指南中。</p>\n<p>我倾向于将团队的风格指南作为源控制下的 Markdown（例如 <a href=\"https://pages.github.com/\">GitHub 页面</a>）。这样，对风格指南的任何改动都需要通过普通的审查过程——某人得明确批准改动，而且团队中的每个人都有提出疑虑的机会。Wikis 和 Google 文件都是可接受的选择。</p>\n<h4><em>选择</em><em> 3</em><em>：混合方法</em></h4>\n<p>合并选择 1 和选择 2，你可以采纳现存的风格指南作为基础，然后用本地风格指南来扩展或者覆盖这个基础。一个好例子是 <a href=\"https://chromium.googlesource.com/chromium/src/+/master/styleguide/c++/c++.md\">Chromium 的 C++ 风格指导</a>。它用 <a href=\"https://google.github.io/styleguide/cppguide.html\">Google 的 C++ 风格指导</a>作为基础，但是在其上添上自己的改动和附加。</p>\n<h3>马上开始审查</h3>\n<p>将代码审查视为高优先级。当你真正阅读代码并反馈时，慢点来，但是要马上<em>开始</em>审查——最好在几分钟内开始。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1frr57p1az8j20lc0h2jv0.jpg\" width=\"690\" height=\"552\"></p>\n<p>如果队员发给你一个变更表，这可能意味着直到你完成审查前，他们会卡在其他工作上。理论上，源控制系统使作者能建起新的分支，继续工作，然后从审查中把变动合并进新分支。实际上，一共有大约四个开发者能够高效地做这件事。其他人要花很长时间来清理三方差异，以致于抵消掉了等待审查完成这段时间里的进步。</p>\n<p>你马上开始审查，就创造了一个良性循环。你的审查时间完全变成了一个与作者的变更表大小和复杂度相关的函数。这激励作者发送短小、范围狭窄的变更表。对你来说这样的变更表审查起来更容易，也更愉悦，所以你能更快地审查，循环继续。</p>\n<p>想象一下你的队员要执行一个新特征，这个特征要求 1000 行代码变更。如果他们知道你能在大概 2 小时内完成一个 200 行的变更表的审查，他们可以把特征拆分成各包含 200 行的变更表，然后在一两天内检查完整个特征。但是，如果无论大小你都要花一天来完成所有的代码审查，现在就要花一周时间才能检查完整个特征。你的队员不想傻坐一周，所以他们被激励着去发送更大的代码审查，比如每个包含 500 到 600 行。这样审查起来花销更大，反馈也更差，因为记 600 行变更表的背景要比 200 行变更表难。</p>\n<p>一个审查循环的最大周期应该是一个工作日。如果你正在处理一个更高优先级的问题，不能在一天内完成一个审查循环，让你的队员知悉并给予他们把审查交给别人的机会。如果你一个月被强制回绝审查超过一次，可能意味着你的团队需要放慢脚步，这样你能保持理智的开发实践。</p>\n<h3>从高级别开始，逐步向下</h3>\n<p>在一个既定的审查循环中，你写的批注越多，让作者感觉受打压的风险越大。准确的界限随开发者的不同而不同，但是一个审查循环中 20 到 50 个批注一般是危险区的开始。</p>\n<p>如果你担心把作者淹没在批注的海洋里，约束你自己在早期循环中反馈高级别的问题。注意重新设计类接口或者拆分复杂函数这样的问题。等到这些问题都解决了再去处理低级别的问题，比如变量命名或者代码评论的清晰度。</p>\n<p>一旦作者整合了你高级别的批注，低级别的批注可能会变得无意义。把低级别的批注推迟到后期的循环中，你可以把自己从小心措辞的工作中解救出来，也免得作者处理不必要的批注。这个技巧也细分了审查过程中你所关注的抽象层，帮助你和作者用清晰、系统的方法完成变更表。</p>\n<h3>慷慨地使用代码示例</h3>\n<p>在一个理想的世界里，代码作者会感谢收到的每一次审查。这是他们学习的一个机会，也能防止他们犯错。事实上，有许多外部因素能导致作者负面地解读审查，怨恨你给他们批注。可能他们正面临着截止日期的压力，所以除了立刻不经审查的批准以外的东西都感觉像阻碍。可能你们没怎么在一起工作过，所以他们不相信你的反馈是好意的。</p>\n<p>一个让作者对审查过程感觉良好的方法是，在审查中找机会送他们礼物。所有开发者都爱收到的礼物是什么呢？当然是代码示例啦。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1frr57pwqjfj20lc0lc77i.jpg\" width=\"690\" height=\"690\"></p>\n<p>如果通过写一些建议的改动来减轻作者的负担，就证明了作为审查者，你对时间很慷慨。</p>\n<p>比如，想象一下你的一个同事不熟悉 Python 的<a href=\"http://treyhunner.com/2015/12/python-list-comprehensions-now-in-color/\">列表推导（list comprehension）</a>特征。他们给你发送了包含以下代码的审查：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0387fb3a272175683\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nurls = []\r\nfor path in paths:\r\n  url = 'https://'\r\n  url += domain\r\n  url += path\r\n  urls.append(url)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0387fb3a272175683-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0387fb3a272175683-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0387fb3a272175683-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0387fb3a272175683-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d0387fb3a272175683-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d0387fb3a272175683-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0387fb3a272175683-1\"><span class=\"crayon-v\">urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0387fb3a272175683-2\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">paths</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0387fb3a272175683-3\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'https://'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0387fb3a272175683-4\"><span class=\"crayon-h\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">domain</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d0387fb3a272175683-5\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">url</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d0387fb3a272175683-6\"><span class=\"crayon-e\">  </span><span class=\"crayon-v\">urls</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">append</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>回复“能用列表推导（list comprehension）简化这个吗？”会使他们苦恼，因为现在他们得花 20 分钟搜索他们之前从没用过的东西。</p>\n<p>收到像以下这样的批注他们会更开心：</p>\n<blockquote><p><em>考虑用像这样的列表推导（list comprehension）来进行简化：</em></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d0387fb44217683276\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nurls = ['https://' + domain + path for path in paths]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d0387fb44217683276-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d0387fb44217683276-1\"><span class=\"crayon-v\">urls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-s\">'https://'</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">domain</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">path </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">paths</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>\n</p></blockquote>\n<p>这个技巧并不局限于单命令程序。我会经常建立我自己的代码分支，向作者展示概念的一个大型证明，比如拆分一个大型函数或者增加一个单元测试来覆盖一个附加边界情况。</p>\n<p>为清晰、无争议的改进保留此技巧。在上面列表推导（list comprehension）示例中，极少有开发者会拒绝减少 83% 的代码行数。相反，如果你写了一个冗长的示例来演示某个变动“更好”，而这个变动是基于你自己的个人品味（比如，风格变动），代码示例让你看起来固执己见，而不是慷慨大方。</p>\n<p>限制你自己在每个审查循环中只写两到三个代码示例。如果你开始为作者写整个变更表，这标志着你觉得作者没能力写自己的代码。</p>\n<h3>永远别说“你”</h3>\n<p>这听起来挺怪异的，但是听我说：永远别在代码审查中使用“你”这个字。</p>\n<p>在审查中做的决定应该是基于什么能让代码更好，而不是谁出的主意。你的队员在他们的变更表中倾注了大量心血，而且很可能为自己的工作感到骄傲。他们听到对其工作的批评，自然反应是摆出防御和保护的姿态。</p>\n<p>组织反馈所使用的措辞，以最小化激起队员戒备心的风险。讲清楚你是在批评代码，而不是程序员。当作者在评论中看到“你”这个字，会将他们的注意力从代码转移到自己身上。这增加了他们把批评私人化的风险。</p>\n<p>考虑一下这个无害的评论：</p>\n<blockquote><p><em>你拼错了“</em><em>successfully</em><em>”。</em></p></blockquote>\n<p>作者可以把这个批注理解成两种不同的意思：</p>\n<ul>\n<li><strong>理解</strong><strong> 1</strong>：嗨，好家伙！你拼错了“successfully”。但是我还是觉得你聪明！那可能就是个笔误。</li>\n</ul>\n<ul>\n<li><strong>理解</strong><strong> 2</strong>：你拼错了“successfully”，笨蛋。</li>\n</ul>\n<p>把这个跟省略了“你”的批注比较一下：</p>\n<blockquote><p><em>sucessfully -&gt; successfully</em></p></blockquote>\n<p>后者是一个简单的修正而不是对作者的审判。</p>\n<p>幸运地是，在重新写反馈时避免使用“你”并不难。</p>\n<h4><em>选择</em><em> 1</em><em>：用“我们”替换“你”</em></h4>\n<blockquote><p><em><strong>你</strong>能重命名这个变量，让它更具有描述性吗？比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>变成：</p>\n<blockquote><p><em><strong>我们</strong>能重命名这个变量，让它更具有描述性吗？比如 seconds_remaining</em><em>。</em></p></blockquote>\n<p>“我们”加强了团队对代码的集体责任。作者可能跳槽到一个不同的公司去，你也可能，但是拥有这个代码的团队会一直以不同的形式存在。当你明显期望作者自己做某些事的时候，说“我们”听起来会比较傻，但是傻要比指责好。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1frr57qonq0j20lc0lcgpu.jpg\" width=\"690\" height=\"690\"></p>\n<h4><em>选择</em><em> 2</em><em>：移除句子的主语</em></h4>\n<p>另一个避免使用“你”的方法是用省略句子主语的简化句子：</p>\n<blockquote><p><em><strong>建议重命名</strong>为更具有描述性的名称，比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>你可以用<a href=\"https://en.wikipedia.org/wiki/English_passive_voice\">被动语态</a>实现相似的效果。我在技术写作中一般会避免像瘟疫一样使用被动语态，但是它是个有用的方法来避免使用“你”。</p>\n<blockquote><p><em>变量<strong>应该被重命名</strong>为更具有描述性的名称，比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<p>另一个选择是把它表述为一个问题，用“……如何”或者“……怎么样”开头：</p>\n<blockquote><p><em>把变量重命名为更具有表述性的名称<strong>怎么样</strong>？比如 </em><em>seconds_remaining</em><em>。</em></p></blockquote>\n<h4>把反馈表达成请求，而不是指令</h4>\n<p>代码审查相对平常的交流来说，要求更多的机智和谨慎，因为存在高风险把讨论转变成私人争论。你会期望审查者在审查中表示出礼貌，但是奇怪地是，我发现他们走向了另一个方向。多数人永远不会对同事说“给我订书机，再给我拿瓶汽水。”但是我看到过无数审查者用类似的指令来表达反馈，比如，“把这个类移到一个单独的文件里。”</p>\n<p>宁可在反馈中恼人地绅士。把批注表达成请求或者建议那样，而不是指令。</p>\n<p>比较用两种不同方式表达的同一个批注：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"45%\"><strong>表达成指令的反馈</strong></td>\n<td width=\"54%\"><strong>表达成请求的反馈</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"45%\">把 Foo 类移到一个单独的文件里。</td>\n<td width=\"54%\">我们能把 Foo 类移到一个单独的文件里吗？</td>\n</tr>\n</tbody>\n</table>\n<p>人们喜欢掌控自己的工作。向作者提出请求给他们带来自主意识。</p>\n<p>请求也让作者礼貌地反馈更容易。可能他们的选择是有合理的。如果把反馈表达成指令，来自作者的任何反馈都像违反指令。如果你把反馈表达成请求或者问题，作者能简单地回答你。</p>\n<p>比较对话的好斗程度，取决于审查者怎么表达他们的初始批注：</p>\n<table width=\"100%\">\n<thead>\n<tr>\n<td width=\"47%\"><strong>表达成指令的反馈（好斗的）</strong></td>\n<td width=\"52%\"><strong>表达成请求的反馈（合作的）</strong></td>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td width=\"47%\"><strong>审查者</strong>：把 Foo 类移到单独的文件里<br>\n<strong>作者</strong>：我不想这么做，因为那样就离 Bar 类太远了。客户几乎总会一起调用他们。</td>\n<td width=\"52%\"><strong>审查者</strong>：我们能把 Foo 类移到单独的文件里吗？<br>\n<strong>作者</strong>：可以，但是那样就离 Bar 类太远了，以及客户一般会一起使用这两个类。你觉得呢？</td>\n</tr>\n</tbody>\n</table>\n<p>看看当你<del>构建虚拟对话来证明观点</del>把批注表达成请求而非指令的时候，对话变得多么有礼貌。</p>\n<h4>把批注与原则联系在一起，而不是观点</h4>\n<p>当你给作者写批注时，既要给出变更建议，也要给出变更的<em>理由</em>。“现在，这个类既负责下载文件，也负责解析文件。我们应该依照<a href=\"https://en.wikipedia.org/wiki/Single_responsibility_principle\">单一责任原则</a>，把它拆分成一个下载类和一个解析类。”这么说会更好，而不是说“我们应该把这个类分成两个。”</p>\n<p>让你的批注有原则性的立足点，这样能让讨论走向更积极的方向更有建设性。但你有一个具体的原因，比如“我们应该把这个函数写成私有函数，来最小化 public 借口类”，作者就不能简单地回复“不，我倾向于我的方法。”更确切地说，他们<em>可以</em>，但是因为你演示了改动如何满足目标，而他们只陈述了一个偏好，他们会看起来很傻。</p>\n<p>软件开发既是艺术也是科学。你不可能永远都能用确定的原则来明确表达代码到底哪里出了问题。有时候代码只是难看或者不符合直觉，不容易确定为什么。在这些情况下，解释你能怎么做，但是保持客观性。如果你说“<strong>我</strong>发现这不容易理解”，这至少是个客观的陈述；相反，“<strong>这</strong>莫名其妙”是一个价值判断，不一定适用于所有人。</p>\n<p>尽可能以链接的形式提供支持证据。团队风格指南的相关部分是你能提供的最佳链接。你也可以链接到语言或者库的文件。高票 <a href=\"https://stackoverflow.com/\">StackOverflow</a> 回答也行，但是离权威文件越远，你的证据变得越不稳固。</p>\n<h2>第二部分：即将上线</h2>\n<p>敬请期待其他小技巧，包括：</p>\n<ul>\n<li>处理特别大的代码审查</li>\n</ul>\n<ul>\n<li>识别给予表扬的机会</li>\n</ul>\n<ul>\n<li>尊重审核的，以及</li>\n</ul>\n<ul>\n<li>化解僵局</li>\n</ul>\n<p><em>由 <a href=\"https://www.upwork.com/fl/samanthamason\">Samantha Mason</a> 编辑。插图来自 <a href=\"https://www.linkedin.com/in/lolo-ology/\">Loraine Yow</a>。感谢 <a href=\"https://twitter.com/global4g\">@global4g</a>为这篇文章的早期版本提供宝贵的反馈。</em></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113665\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113665votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113665\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/ec7be1fb92c486c238055e96fe14a331c8ef7b82.jpg"}
{"url_object_id": "249c4ace42a38cef57cda8a8fa492236", "title": ["如何编写 C++ 游戏引擎"], "url": "http://blog.jobbole.com/113960/", "create_date": "2018/06/05", "front_image_url": ["http://wx2.sinaimg.cn/mw690/63918611gy1fre7k2nnx5j20c806wgli.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 2, "tags": "C/C++,游戏,游戏引擎", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/nemoland\">李大萌</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://preshing.com/20171218/how-to-write-your-own-cpp-game-engine/\">Jeff Preshing</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>最近我在用 C++ 写游戏引擎，再用这个引擎做了一个移动端小游戏跳一跳（Hop Out）。下面是截自我的 iPhone6 的一个小片段。</p>\n<p>视频地址：http://preshing.com/images/hopoutclip.mp4</p>\n<p>跳一跳是我想玩的游戏类型：3D卡通外观的复古街机游戏。目标是改变每个填充块的颜色，就像Q * Bert一样。</p>\n<p>Hop Out仍在开发中，但引擎的功能已经很完善了，所以我想在这里分享一些关于引擎开发的技巧。</p>\n<p>你为什么想要写一个游戏引擎？可能有很多原因：</p>\n<p>你是个修理工，喜欢从头开始建立系统，直到系统完成。</p>\n<p>关于游戏开发你想了解更多。我在游戏行业工作了14年，现在我仍然在不停的琢磨。我甚至不确定我是否可以从头开始编写一个引擎，因为它与大型工作室的编程工作的日常职责大不相同。我想知道答案。</p>\n<p>你喜欢控制。对完全按照你想要的方式组织代码，知道一切都在哪里，感到满意。</p>\n<p>你可以从<a href=\"https://en.wikipedia.org/wiki/Adventure_Game_Interpreter\">AGI</a>（1984），<a href=\"https://en.wikipedia.org/wiki/Doom_engine\">id Tech 1</a>（1993），<a href=\"https://en.wikipedia.org/wiki/Build_(game_engine)\">Build</a>（1995）等经典游戏引擎以及Unity和Unreal等行业巨头那里获得灵感。</p>\n<p>你相信我们这个游戏产业应该试着去揭开引擎发展的序幕。我们并没有掌握制作游戏的艺术。还离得很远！我们对这个过程的研究越多，改进的机会就越大。</p>\n<p>2017年的游戏平台 – 手机，游戏机和电脑 – 非常强大，而且在很多方面都非常相似。游戏引擎的开发并不是像过去一样，在脆弱和怪异的硬件上挣扎。在我看来，更多是关于自己制造出来的复杂性的斗争。创造一个怪物很容易！这就是为什么本文建议围绕着保持事情可控的原因。我把它分成三部分：</p>\n<ol>\n<li>使用迭代方法</li>\n<li>在统一事物前要三思</li>\n<li>请注意，序列化是一个很大的课题</li>\n</ol>\n<p>这个建议适用于任何类型的游戏引擎。我不会告诉你如何编写着色器，八叉树是什么，或者如何添加物体。这些事儿，都是我假设你已经知道而且应该知道 – 这很大程度上取决于你想要制作的游戏类型。相反，我故意选择了一些似乎没有被广泛承认或提及的观点 – 这些是我在试图揭开一个主题神秘面纱时最感兴趣的一些观点。</p>\n<h2></h2>\n<h2>使用迭代方法</h2>\n<p>我的第一条建议是使一些东西（任何东西），快速运行起来，然后迭代。</p>\n<p>如果可能的话，从一个示例应用程序开始，初始化设备并在屏幕上绘制一些东西。就我而言，我下载了<a href=\"https://www.libsdl.org/\">SDL</a>，打开了Xcode-iOS / Test / TestiPhoneOS.xcodeproj，然后在我的iPhone上运行了testgles2示例。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k1rqtzj20c806v747.jpg\" width=\"440\" height=\"247\"></p>\n<p>瞧！我使用OpenGL ES 2.0，生成了一个可爱的旋转立方体。</p>\n<p>下一步，是下载一个其他人制作的马里奥3D 模型。我写了一个快速和粗糙的OBJ文件加载器 – 文件格式并不太复杂 – 并且修改了例程，来呈现Mario，而不是一个立方体。我还集成了<a href=\"https://www.libsdl.org/projects/SDL_image/\">SDL_Image</a>来帮助加载纹理。</p>\n<p><strong><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k28su5j20c806w3yd.jpg\"></strong></p>\n<p>然后我实现了一个双摇杆控制器用来操控马里奥（我本来想要创建的是一个双摇杆设计游戏，并不是马里奥。）</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k2nnx5j20c806wgli.jpg\"></p>\n<p>接下来，我想探索骨骼动画，所以我打开了<a href=\"https://www.blender.org/\">Blender</a>，做了一个触手模型，并且用一个前后摆动的双骨架来操纵它。</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fre7k31x17j20c7078dgc.jpg\"></p>\n<p>此时，我放弃了OBJ文件格式，编写了一个Python脚本来从Blender导出自定义的JSON文件。这些JSON文件描述了皮肤网格，骨架和动画数据。在<a href=\"https://github.com/nlohmann/json\">C ++ JSON库</a>的帮助下将这些文件加载到游戏中。</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k3ob2mj20c806wq2y.jpg\"></p>\n<p>一旦这个完成，我回到了Blender，并做了更详细的角色设计。 （这是我创造的第一个被操纵的3D人，我为他感到骄傲。）</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fre7k42k6mj20c806w3za.jpg\"></p>\n<p>在接下来的几个月里，我采取了以下几个步骤：</p>\n<ol>\n<li>开始将向量和矩阵函数分解成我自己的3D数学库。</li>\n<li>用CMake项目替换.xcodeproj。</li>\n<li>在Windows和iOS上运行引擎，因为我喜欢在Visual Studio下工作。</li>\n<li>开始将代码移动到单独的“引擎”和“游戏”库中。随着时间的推移，我把它们分成更细粒度的库。</li>\n<li>写了一个单独的应用程序将我的JSON文件转换为游戏可以直接加载的二进制数据。</li>\n<li>最终从iOS版本中删除所有SDL库。 （Windows版本仍然使用SDL。）</li>\n</ol>\n<p>重点是：在开始编程之前，我没有对引擎架构进行设计。这是一个经过深思熟虑的选择。相反，我只是写了实现下一个特性的最简单的代码，然后我会查看代码，看看会出现什么自然生成的架构。我说的“引擎架构”是指组成游戏引擎的模块集，这些模块之间的依赖关系，以及用于与每个模块交互的 <a href=\"https://en.wikipedia.org/wiki/Application_programming_interface\">API</a>。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fre7k4nmzbj20c405h3ye.jpg\"></p>\n<p>这是一个<a href=\"https://en.wikipedia.org/wiki/Iterative_and_incremental_development\">迭代</a>的方法，因为它关注于较小的可交付成果。它在编写游戏引擎时效果非常好，因为在每个步骤中，你都有一个正在运行的程序。如果在将代码合成到新模块中时出现问题，可以随时将做的更改与以前工作的代码进行比较。显然，我假设你在使用<a href=\"https://www.perforce.com/blog/list-of-equivalent-commands-in-git-mercurial-and-svn\">某种源代码管理工具</a>。</p>\n<p>你可能会认为这种方法浪费了很多时间，因为总是在编写糟糕的代码，之后需要清理。但是大部分的清理操作都是将代码从一个.cpp文件移动到另一个，将函数声明提取到.h文件中，或者直接进行简单的修改。决定事情应该去哪是难点，但是这在已经有代码的时候会更容易决定。</p>\n<p>我认为用相反的方法：试图设计出一个能够提前完成所有需求的架构，会浪费更多的时间。我最喜欢的两篇关于系统过度设计风险的文章是 <a href=\"http://altdevblog.com/2011/04/01/vicious-circle-of-generalization/\">Tomasz Dąbrowski 的《泛化的恶性循环》</a>和 <a href=\"https://www.joelonsoftware.com/2001/04/21/dont-let-architecture-astronauts-scare-you/\">Joel Spolsky 的《不要让架构太空人吓到你》</a>。</p>\n<p>我并不是说在用代码处理问题之前，不应该在纸上进行设计。我也不是说你不应该事先决定你想要的功能。比如，我从一开始就知道我想让我的引擎在后台线程中加载所有资源。我只是没有尝试设计或实现该功能，直到我的引擎首先加载一些资源。</p>\n<p>迭代的方法给了我一个比我以前盯着一张白纸冥思苦想更优雅的架构。我的引擎的iOS版本现在是 100％ 原始代码，包括自定义数学库，容器模板，反射/序列化系统，渲染框架，物理模块和音频混合器。我可以编写每一个模块，但是你可能没有必要自己写所有这些东西。你可能会发现适合自己引擎的许多优秀的开源代码库。 <a href=\"https://glm.g-truc.net/\">GLM</a>、<a href=\"https://pybullet.org/wordpress/\">Bullet Physics</a> 和 <a href=\"https://github.com/nothings/stb\">STB 头文件</a>只是一些有趣的例子。</p>\n<h2>在整合事物太多之前要三思</h2>\n<p>作为程序员，我们尽量避免代码重复，喜欢代码遵循统一的风格。不过，我认为不要让这些本能凌驾于每一个决定之上。</p>\n<h4>偶尔要抵制一下 DRY 原则</h4>\n<p>举个例子，我的引擎包含了几个“智能指针”模板类，与 std :: shared_ptr 类似。每一个指针作为一个原始指针的包装，有助于防止内存泄漏。</p>\n<ul>\n<li>&lt;&gt; 是用于具有单个所有者的动态分配的对象。</li>\n<li>Reference&lt;&gt; 使用引用计数来允许一个对象拥有多个所有者。</li>\n<li>audio :: AppOwned &lt;&gt; 被音频混音器以外的代码调用，允许游戏系统拥有音频混音器使用的对象，例如当前播放的语音。</li>\n<li>audio :: AudioHandle &lt;&gt; 使用音频混音器内部的引用计数系统。</li>\n</ul>\n<p>这样可能看起来像其中一些类复制了其它的功能，违反 <a href=\"https://en.wikipedia.org/wiki/Don%27t_repeat_yourself\">DRY（不要重复自己）</a>的原则。事实上，在开发早期，我尽可能地重用现有的Reference &lt;&gt;类。但是，我发现音频对象的生命周期是由特殊规则来管理的：如果一个音频语音已经完成了一个样本的播放，并且游戏没有指向该语音的指针，那么该语音会被立即到删除排队等待。如果游戏持有指针，则不应删除这个语音对象。如果游戏持有一个指针，但指针的所有者在语音结束之前被销毁，这段语音应该被取消，而不是增加Reference &lt;&gt;的复杂性，我决定引入单独的模板类，这样更为实用。</p>\n<p>95％ 的时间都在重用现有的代码。但是，如果你开始感到麻痹，或者发现自己增加了一件简单的事情的复杂性，那就问自己，代码库中的东西是否应该是两件事。</p>\n<h4>可以使用不同的调用规则</h4>\n<p>我不喜欢Java的一件事是，它强迫你在一个类中定义每个函数。在我看来，这是无稽之谈。这可能会使你的代码看起来更加一致，但是它也鼓励过度工程，并且不适合我前面描述的迭代方法。</p>\n<p>在我的 C++ 引擎中，一些函数属于类，有些则不属于类。例如，游戏中的每个敌人都是一个类，可能就像你预料的那样，大部分敌人的行为都是在这个类内部实现的。另一方面，在我的引擎中投射的球体是通过调用 <a href=\"https://stackoverflow.com/questions/7136449/shape-casting-a-capsule-against-convex-polyhedra\">sphereCast(</a>) 函数来执行的，这是物理命名空间中的一个函数。 sphereCast() 不属于任何类 – 它只是物理模块的一部分。我构建了一个系统来管理模块之间的依赖关系，这使得我的代码组织得很好。将这个函数包装在一个任意的类中不会以任何有意义的方式改善代码的组织。</p>\n<p>然后是<a href=\"https://en.wikipedia.org/wiki/Dynamic_dispatch\">动态调度</a>，这是一种<a href=\"https://en.wikipedia.org/wiki/Polymorphism_(computer_science)\">多态的形式</a>。我们经常需要为一个对象调用一个函数，而不知道该对象的确切类型。 C ++程序员的第一本能是用虚函数定义抽象基类，然后在派生类中重写这些函数。这是有效的，但这只是一种技术。还有其他动态调度技术，不会引入额外的代码，或带来其他好处：</p>\n<p> </p>\n<ul>\n<li>C ++ 11引入了std :: function，这是存储回调函数的一个简便方法。也可以编写自己的std :: function版本，这样在调试中不会那么痛苦。</li>\n<li>许多回调函数可以用一对指针来实现：一个函数指针和一个类型不确定的参数。它只需要在回调函数中进行明确的转换。你在纯C语言库中经常看到。</li>\n<li>有时候，底层类型实际上是在编译时已知的，你可以绑定这个函数调用而不用额外的运行开销。 <a href=\"https://github.com/preshing/turf\">Turf</a>是我在游戏引擎中使用的一个库，它非常依赖这种技术。例如看到turf:: Mutex,这只是针对特定平台类的定义。</li>\n<li>有时，最直接的方法是自己构建和维护一个原始函数指针表。我在我的音频混音器和序列化系统中使用了这种方法。Python解释器也大量使用这种技术，如下所述。</li>\n<li>你甚至可以将函数指针存储在散列表中，使用函数名称作为关键字。我使用这种技术来调度输入事件，如多点触控事件。这是记录游戏输入并用重放系统回放的策略的一部分。</li>\n</ul>\n<p>动态调度是一个很大的课题。我只是想表明，有很多方法来实现它。你编写的可扩展底层代码越多（这在游戏引擎中很常见），越会发现替代方法越多。如果你不习惯这种编程，C语言编写的Python解释器是一个很好的学习资源。它实现了一个强大的对象模型：每个PyObject都指向一个PyTypeObject，每个PyTypeObject都包含一个用于动态分配的函数指针表。如果你想直接跳转到其中的话，<a href=\"https://docs.python.org/3/extending/newtypes.html\">定义新类型</a>的文档是一个很好的起点。</p>\n<h2>注意序列化是一个大问题</h2>\n<p><a href=\"https://en.wikipedia.org/wiki/Serialization\">序列化</a>是将运行时对象转换为字节序列的操作。换句话说，就是保存和加载数据。</p>\n<p>对于许多游戏引擎来说，游戏内容以各种可编辑的格式创建，例如.png，.json，.blend或专有格式，然后最终转换为特定于平台的可以快速加载到引擎的游戏格式。流水线中的最后一个应用通常被称为“炊具”。炊具可能被集成到另一个工具，甚至分布在几台机器上。通常，炊具和一些工具是与游戏引擎本身一起开发和维护的。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fre7k503gcj20c6079dfs.jpg\"></p>\n<p>在建立这样的流水线时，每个阶段的文件格式的选择取决于你。你可以定义自己的一些文件格式，这些格式可能会随着添加引擎功能而变化。渐渐地可能会发现有必要保持某些程序与以前保存的文件兼容。不管什么格式，你最终都需要用C++来序列化它。</p>\n<p>用C ++实现序列化有无数种方法。一个相当明显的方式是将加载和保存函数添加到要序列化的C ++类。可以通过在文件头中存储版本号来实现向后兼容，然后将这个数字传递给每个加载函数。这是可行的，尽管这样代码可能维护起来比较繁琐。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9cd6293792521234273\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" touchscreen minimize scroll-mouseover\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    void load(InStream&amp; in, u32 fileVersion) {\r\n        // 加载预期的成员变量\r\n        in &gt;&gt; m_position;\r\n        in &gt;&gt; m_direction;\r\n\r\n        // 仅当正在加载的文件版本是2或更大时才加载新的变量\r\n        if (fileVersion &gt;= 2) {\r\n            in &gt;&gt; m_velocity;\r\n        }\r\n    }</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9cd6293792521234273-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9cd6293792521234273-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9cd6293792521234273-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9cd6293792521234273-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9cd6293792521234273-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9cd6293792521234273-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9cd6293792521234273-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9cd6293792521234273-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9cd6293792521234273-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9cd6293792521234273-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9cd6293792521234273-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">InStream</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">u32 </span><span class=\"crayon-v\">fileVersion</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9cd6293792521234273-2\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 加载预期的成员变量</span></div><div class=\"crayon-line\" id=\"crayon-5ba9cd6293792521234273-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_position</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9cd6293792521234273-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_direction</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9cd6293792521234273-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9cd6293792521234273-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-c\">// 仅当正在加载的文件版本是2或更大时才加载新的变量</span></div><div class=\"crayon-line\" id=\"crayon-5ba9cd6293792521234273-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">fileVersion</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9cd6293792521234273-8\"><span class=\"crayon-h\">            </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">m_velocity</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9cd6293792521234273-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9cd6293792521234273-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>通过<a href=\"https://en.wikipedia.org/wiki/Reflection_(computer_programming)\">反射</a>（特别是通过创建描述C ++类型布局的运行时数据），可以编写更灵活，不容易出错的序列化代码。想要快速了解反射如何进行序列化，请看一下开源项目<a href=\"https://www.blender.org/get-involved/developers/\">Blender</a>是如何实现的。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fre7k5evdlj20g308b3yo.jpg\"></p>\n<p> </p>\n<p>从源代码构建Blender时，有许多步骤。首先，编译并运行一个名为makesdna的自定义实用程序。该实用程序解析Blender源代码树中的一组C语言头文件，然后以<a href=\"https://wiki.blender.org/index.php/Dev:Source/Architecture/SDNA_Notes\">SDNA</a>的自定义格式输出所有C定义类型的汇总。这个SDNA数据作为反射数据，链接到Blender本身，并保存在Blender写入的每个.blend文件中。从这一刻开始，每当Blender加载一个.blend文件，就会将.blend文件的SDNA与链接到当前版本的SDNA进行比较，并使用通用序列化代码来处理差异。这个策略使Blender具有令人印象深刻的向前和向后兼容性。你仍然可以在最新版本的Blender中加载<a href=\"https://www.blendernation.com/2008/12/01/blender-dna-rna-and-backward-compatibility/\">1.0版本</a>的文件，也可以在旧版本中加载新的.blend文件。</p>\n<p>像Blender一样，许多游戏引擎及其相关工具都会生成并使用自己的反射数据。有很多方法可以做到这一点：可以像Blender一样解析自己的C / C ++源代码来提取类型信息。你可以创建一个单独的数据描述语言，并编写一个工具来从该语言生成C ++类型定义和反射数据。可以使用预处理器宏和C ++模板在运行时生成反射数据。一旦你有反射数据可用，有无数的方法来编写一个通用的序列化器。</p>\n<p>显然，我省略了很多细节。在这篇文章中，我只想表明有很多不同的方法来序列化数据，其中一些非常复杂。程序员不会像其他引擎系统那样讨论序列化，尽管大多数其他系统依赖于它。例如，在<a href=\"https://www.gdcvault.com/browse/gdc-17/?categories=Pg\">GDC 2017</a>给出的96个程序设计讲座中，我数了一下，共有31次关于图形，11次关于在线，10次关于工具，4次关于AI，3关于物理模块，2关于音频的 – 但只有一个<a href=\"https://www.gdcvault.com/play/1024444/The-Data-Building-Pipeline-of\">直接涉及到序列化</a>。</p>\n<p>至少，试着想一想你的需求会有多复杂。如果你正在制作一个像Flappy Bird这样的小游戏，只有少数资源.，那么你可能不需要想太多的序列化。你可以直接从PNG加载纹理，这样很好处理。如果你需要一个向后兼容的紧凑的二进制格式，但不想自己开发，可以看看第三方库，比如<a href=\"https://uscilab.github.io/cereal/\">Cereal</a>或者<a href=\"https://theboostcpplibraries.com/boost.serialization\">Boost.Serialization</a>。我不认为<a href=\"https://developers.google.com/protocol-buffers/\">Google协议缓冲区</a>是序列化游戏资产的理想选择，但是值得研究。</p>\n<p>编写一个游戏引擎，即使是一个小游戏引擎，也是一个很大的任务。关于这个我可以说的还有很多，但是对于这个长度的帖子来说，这真的是我认为最有用的建议：迭代地工作，抵制统一代码的冲动，并且知道序列化是一个大问题，你需要选择一个合适的策略。根据我的经验，如果忽视这些事情，每一件事情都可能成为一个绊脚石。</p>\n<p>我喜欢比较这些东西，真的很想听到其他开发人员的意见。如果你已经写了一个引擎，你的经验是否让你有什么相同的结论吗？如果你没有写，或者只是在构思，我也对你的想法也很感兴趣。你认为什么是好的学习资源？哪些部分对你来说看起来很神秘？你可以在下面评论或在<a href=\"https://twitter.com/preshing\">Twitter</a>上给我留言！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113960\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113960votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113960\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">李大萌</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            码农一枚        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/nemoland\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/nemoland/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/nemoland/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 25</a> · <a title=\"QQ：727231337\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：qq_nemo\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/50bda070535be329674b77c46cecd71fae0e4cad.jpg"}
{"url_object_id": "ca9b7fe440dbafc569069b9a27e98bef", "title": ["Reddit 如何面试工程师？"], "url": "http://blog.jobbole.com/113744/", "create_date": "2018/04/20", "front_image_url": ["http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "职场,Reddit,工程师", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/liuchang\">刘唱</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://redditblog.com/2017/08/02/acing-your-technical-interviews-at-reddit/\">Redditblog</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><blockquote><p>Reddit 给来应聘者写的官方指南，描述了整个面试的流程、该如何准备。</p></blockquote>\n<hr>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fqeikwffd2j20xc0g4ju2.jpg\" width=\"578\" height=\"280\"></p>\n<p><strong>在 Reddit，我们理解面试</strong>可能非常令人头疼，因此我们做了这份指南来帮你顺利通过面试。你不会不学习就去参加期末考试，对吧？同样，我们也不希望你不准备就来参加面试。请把这篇文章作为通过面试的学习指南。</p>\n<p><img class=\"aligncenter size-large wp-image-21663\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-1.png?w=720&amp;h=61\"></p>\n<p>到目前为止，你大概已经与我们招聘团队的成员通过电话了，完成了初步的电话面试。那么恭喜你能继续下一步的面试！接下来要面对你的第一个技术面试了——这一次是与我们的工程师进行的电话面试。</p>\n<h3>电话技术面试</h3>\n<p>这部分面试更偏向于一般的能力倾向测试，旨在了解你对网络及其安全漏洞相关基本概念的技能。这部分面试基本上一半是问答形式的题目，一半是编程训练。你可能不知道所有问题的答案，这是可以接受的。重要的是，我们可以了解你的能力范围，并据此决定你的专长能否满足我们团队的需求。</p>\n<p>在回答这些问题时，一定要解释你是如何得到这个答案的，以及为什么采用这种方法。</p>\n<p><em>提示：打开你的笔记本并准备好面试。确保你接上了网线或者连上了可靠的 </em><em>WIFI</em><em>，并仔细检查你准备接电话的地方手机信号是否够强。</em></p>\n<h3>现场面试</h3>\n<p>如果你走到了这一步，那已经快成功啦。现场面试会分成三个技术面试和三个问答形式的面试。总之，面试应该会持续 5 个小时左右，所以来之前请休息好。</p>\n<p><img class=\"aligncenter size-large wp-image-21664\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-2.png?w=720&amp;h=54\"></p>\n<h3>面试环境</h3>\n<p>你参加面试的房间里有一块白板，在技术面试中需要用到它。来参加面试时还要带上你的笔记本电脑，或者告诉我们你更希望我们提供一个笔记本电脑给你。你的技术面试要么是通过白板，要么是通过笔记本上的 coderpad（面试官会在你们见面时分享给你）。</p>\n<p>考虑到我们工作的性质，我们办公室的氛围比较休闲（当然是合理范围内！）。我们没有着装标准，建议你怎么舒服怎么穿。</p>\n<h3>技术面试</h3>\n<p>技术面试占你和我们在一起的大部分时间，总共大概是 3 个小时（每个技术面试占一个小时）。正是因为想看看你的实际编程水平，我们才要求你带笔记本来面试。尽管面试主要是看你的技术水平，但是面试官还要评估其他重要的因素，比如工作风格和团队配合。</p>\n<ul>\n<li><strong>编程</strong><strong>/</strong><strong>算法。</strong>在现场面试中你要完成两个编程面试，一个针对一般软件工程概念，另一个则更深入到你擅长的领域（无论是前端、后端还是机器学习等等）。对于一般的编程面试，我们鼓励你使用最习惯的语言来解决。在这部分会遇到的问题通常都可以利用递归和迭代技巧，用多种不同的方法来解决。</li>\n<li><strong>系统设计。</strong>与其他技术面试不同，这部分面试不是以编程为主的，但是你很可能会用到白板。你应该准备好碰到这种问题：“怎样构建一个这样的服务？”以及“如何扩大上述服务？”。此外，你还应该对互联网工作原理有扎实的理解。</li>\n</ul>\n<p><img class=\"aligncenter size-full wp-image-21665\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-3.gif?w=720\"></p>\n<h3>应当牢记的几点</h3>\n<p><strong>别忽视面试的语言交流方面。</strong></p>\n<p>技术面试不是为了看你能否得出正确答案，而是为了检验你能够多好地与他人合作。把面试官当成一个帮助你解决问题的人，就像你的队友一样。我们明白一个人不可能完成所有事情，因此特意招募了不同背景和有不同技能的人来建立我们的团队。我们更想知道你有哪些领域的技能，而不是想找到完美的工程师。如果你忘了这篇指南里的其他内容，把下面这三点牢记于心就能让你在技术面试中遥遥领先：</p>\n<ul>\n<li><strong>倾听并认真考虑面试官的建议</strong>。他们很可能已经问过上百遍同样的问题，并见识了不同的解决方法。他们的工作就是帮你找到<em>最好</em>的方法。</li>\n<li><strong>把你的思考过程说出来，并能够解释你所用方法的优缺点</strong>。比起你能否想出解决方法，我们更在意你是怎样想出这个解决方法的。</li>\n<li><strong>在你没想好解决方法之前，别急着写代码</strong>。正如我们的一个工程师曾经告诉我的那样，在没有考虑木头的尺寸和如何把每个零件拼在一起之前是不会开始建工作台的；同样，在你开始写代码之前你也应该知道要怎样解决问题。</li>\n</ul>\n<h3>问答面试（Q&amp;A Interviews）</h3>\n<p>在 Reddit，我们给予人们自主权来让他们能做自己。尽管技术面试可能需要集中精神，但是问答面试要轻松得多。问答面试的面试官通常不在你申请的团队中，主要是为了让我们在技术能力层面之外更好地了解你。</p>\n<ul>\n<li><strong>申请者 </strong><strong>AMA</strong><strong>（</strong><strong>Ask Me Anything</strong><strong>）。</strong>这项面试是为了从个人的角度了解你，因为大部分面试更关注你在电脑上能做什么。这说明，应对这项面试最好的方法是准备好谈谈你自己。这是你要面对的所有面试中最随意的，但是它有希望让你更深入地了解我们如何工作，反之亦然。</li>\n</ul>\n<p><em>提示：准备好，会有关我们企业文化、方针和办公室的日常生活的问题。你的动力和<a href=\"https://about.reddit.com/\">我们公司的价值观</a>应该有相似之处。</em></p>\n<ul>\n<li><strong>跨部门面试。</strong>从名字大概就能看出来，这项面试是为了让你初步了解怎样与其他团队合作。除非你负责基础设施，否则你就要和我们的产品团队密切合作，所以我们需要确保你能很好地连接其他技能，而这些技能与你自己所掌握的技能不同；这就意味着你能够流畅地交流并有效解决冲突。在这项面试中，你会见到我们的产品经理之一，因此此时是询问 Reddit 如何运作以及今年的产品路线图（product roadmap）等相关问题的理想时机。</li>\n</ul>\n<p><em>提示：准备一些专业轶事来帮助你突出人际交往能力。提前想好你准备怎么讲故事，从而在面试中传达某些行为属性。</em></p>\n<ul>\n<li><strong>团队负责人面试。</strong>这项面试非常可能是一天中最后一项面试（耶！）。你未来的团队负责人会从高水平上审查你的工作，深入探究你完成过的具体项目，以便确定你能怎样融入团队。这是个很好的机会，可以问问在你未来要做的项目上还不清楚的问题，组织结构的问题，以及下半年团队的规划。</li>\n</ul>\n<h3>接下来呢？</h3>\n<p>你顺利完成了现场面试，好样的！我们知道这不容易。既然你已经完成了最难的部分，那么你可以准备好在面试后一周内接到招聘官的消息。还有问题吗？不要犹豫，联系我们吧！你在每一步都能得到我们的支持。</p>\n<p><img class=\"aligncenter size-full wp-image-21666\" src=\"https://redditupvoted.files.wordpress.com/2017/08/recruiting-image-4.gif?w=720\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113744\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113744votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113744\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/eb460a6c40dc597b739b2313a4c5c7ca08296694.jpg"}
{"url_object_id": "a8bea411b8efb78652e2e1348eb0a11a", "title": ["从 Linux 源码看 socket 的阻塞和非阻塞"], "url": "http://blog.jobbole.com/113858/", "create_date": "2018/04/12", "front_image_url": ["http://wx2.sinaimg.cn/mw690/63918611gy1fq9n10wguaj20vi0katb1.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 5, "tags": "IT技术,socket,阻塞,非阻塞", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://my.oschina.net/alchemystar/blog/1791017\">无毁的湖光-Al</a>   </div><p>笔者一直觉得如果能知道从应用到框架再到操作系统的每一处代码，是一件Exciting的事情。</p>\n<p>大部分高性能网络框架采用的是非阻塞模式。笔者这次就从linux源码的角度来阐述socket阻塞(block)和非阻塞(non_block)的区别。 本文源码均来自采用Linux-2.6.24内核版本。</p>\n<h2 id=\"h2_1\">一个TCP非阻塞client端简单的例子</h2>\n<p>如果我们要产生一个非阻塞的socket,在C语言中如下代码所示:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d3448818f863824638\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// 创建socket\r\nint sock_fd = socket(AF_INET, SOCK_STREAM, 0);\r\n...\r\n// 更改socket为nonblock\r\nfcntl(sock_fd, F_SETFL, fdflags | O_NONBLOCK);\r\n// connect\r\n....\r\nwhile(1)  {  \r\n    int recvlen = recv(sock_fd, recvbuf, RECV_BUF_SIZE) ; \r\n    ......\r\n} \r\n...</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448818f863824638-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448818f863824638-12\">12</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-1\"><span class=\"crayon-c\">// 创建socket</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-2\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock_fd</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-3\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-4\"><span class=\"crayon-c\">// 更改socket为nonblock</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-5\"><span class=\"crayon-e\">fcntl</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock_fd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">F_SETFL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fdflags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_NONBLOCK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-6\"><span class=\"crayon-c\">// connect</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-7\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-8\"><span class=\"crayon-st\">while</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-9\"><span class=\"crayon-h\">    </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recvlen</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">recv</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock_fd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">recvbuf</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RECV_BUF_SIZE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-10\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448818f863824638-11\"><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448818f863824638-12\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>由于网络协议非常复杂，内核里面用到了大量的面向对象的技巧，所以我们从创建连接开始，一步一步追述到最后代码的调用点。</p>\n<h3 id=\"h3_2\">socket的创建</h3>\n<p>很明显，内核的第一步应该是通过AF_INET、SOCK_STREAM以及最后一个参数0定位到需要创建一个TCP的socket,如下图绿线所示:</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fq9n10wguaj20vi0katb1.jpg\"></p>\n<p>我们跟踪源码调用</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34488198079488873\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsocket(AF_INET, SOCK_STREAM, 0)\r\n\t|-&gt;sys_socket 进入系统调用\r\n\t\t|-&gt;sock_create\r\n\t\t\t|-&gt;__sock_create</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34488198079488873-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34488198079488873-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34488198079488873-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34488198079488873-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34488198079488873-1\"><span class=\"crayon-e\">socket</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">AF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34488198079488873-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sys</span><span class=\"crayon-sy\">_</span>socket<span class=\"crayon-h\"> </span>进入系统调用</div><div class=\"crayon-line\" id=\"crayon-5ba9d34488198079488873-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sock_create</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34488198079488873-4\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">__sock_create</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>进一步分析__sock_create的代码判断:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d3448819c563664967\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconst struct net_proto_family *pf;\r\n// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述\r\n// family=INET\r\npf = rcu_dereference(net_families[family]);\r\nerr = pf-&gt;create(net, sock, protocol);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448819c563664967-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448819c563664967-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448819c563664967-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d3448819c563664967-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d3448819c563664967-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d3448819c563664967-1\"><span class=\"crayon-r\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">net_proto_family</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">pf</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448819c563664967-2\"><span class=\"crayon-c\">// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448819c563664967-3\"><span class=\"crayon-c\">// family=INET</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d3448819c563664967-4\"><span class=\"crayon-v\">pf</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">rcu_dereference</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">net_families</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">family</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d3448819c563664967-5\"><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pf</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">protocol</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p><span class=\"hljs-keyword\">const</span> <span class=\"hljs-class\"><span class=\"hljs-keyword\"><span class=\"hljs-class\"><span class=\"hljs-keyword\">struct</span></span></span> <span class=\"hljs-title\"><span class=\"hljs-class\"><span class=\"hljs-title\">net_proto_family</span></span></span></span> *pf; <span class=\"hljs-comment\"><span class=\"hljs-comment\">// RCU(Read-Copy Update)是linux的一种内核同步方法，在此不阐述</span></span> <span class=\"hljs-comment\"><span class=\"hljs-comment\">// family=INET</span></span> pf = rcu_dereference(net_families[family]); err = pf-&gt;create(net, sock, protocol);</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fq9n11nhljj20ui0eadi7.jpg\"></p>\n<p>则通过源码可知，由于是AF_INET(PF_INET),所以net_families[PF_INET].create=inet_create(以后我们都用PF_INET表示)，即<br>\npf-&gt;create = inet_create; 进一步追溯调用:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881a1688138912\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ninet_create(struct net *net, struct socket *sock, int protocol){\r\n\tSock* sock;\r\n\t......\r\n\t// 此处是寻找对应协议处理器的过程\r\nlookup_protocol:\r\n\t// 迭代寻找protocol==answer-&gt;protocol的情况\r\n\tlist_for_each_rcu(p, &amp;inetsw[sock-&gt;type]) answer = list_entry(p, struct inet_protosw, list);\r\n\r\n\t\t/* Check the non-wild match. */\r\n\t\tif (protocol == answer-&gt;protocol) {\r\n\t\t\tif (protocol != IPPROTO_IP)\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t......\r\n\t// 这边answer指的是SOCK_STREAM\r\n\tsock-&gt;ops = answer-&gt;ops;\r\n\tanswer_no_check = answer-&gt;no_check;\r\n\t// 这边sk-&gt;prot就是answer_prot=&gt;tcp_prot\r\n\tsk = sk_alloc(net, PF_INET, GFP_KERNEL, answer_prot);\r\n\tsock_init_data(sock, sk);\r\n\t......\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a1688138912-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a1688138912-22\">22</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-1\"><span class=\"crayon-e\">inet_create</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">net</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">socket</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">protocol</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">Sock</span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 此处是寻找对应协议处理器的过程</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-5\"><span class=\"crayon-v\">lookup_protocol</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 迭代寻找protocol==answer-&gt;protocol的情况</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">list_for_each_rcu</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">inetsw</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">sock</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">type</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">answer</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">list_entry</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">p</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inet_protosw</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">list</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">/* Check the non-wild match. */</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">answer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-11\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">IPPROTO_IP</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-12\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-13\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-15\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 这边answer指的是SOCK_STREAM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">sock</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">ops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">answer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">ops</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-17\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">answer_no_check</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">answer</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">no_check</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-18\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 这边sk-&gt;prot就是answer_prot=&gt;tcp_prot</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-19\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">sk</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sk_alloc</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">net</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PF_INET</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">GFP_KERNEL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">answer_prot</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-20\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">sock_init_data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a1688138912-21\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a1688138912-22\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p>上面的代码就是在INET中寻找SOCK_STREAM的过程了 我们再看一下inetsw[SOCK_STREAM]的具体配置:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881a4794869348\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic struct inet_protosw inetsw_array[] =\r\n{\r\n\t{\r\n\t\t.type =       SOCK_STREAM,\r\n\t\t.protocol =   IPPROTO_TCP,\r\n\t\t.prot =       &amp;tcp_prot,\r\n\t\t.ops =        &amp;inet_stream_ops,\r\n\t\t.capability = -1,\r\n\t\t.no_check =   0,\r\n\t\t.flags =      INET_PROTOSW_PERMANENT |\r\n\t\t\t      INET_PROTOSW_ICSK,\r\n\t},\r\n\t......\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a4794869348-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a4794869348-14\">14</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">inet_protosw </span><span class=\"crayon-v\">inetsw_array</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-4\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">type</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">       </span><span class=\"crayon-v\">SOCK_STREAM</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-5\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">protocol</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">   </span><span class=\"crayon-v\">IPPROTO_TCP</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-6\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">prot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">       </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">tcp_prot</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-7\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">ops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">        </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">inet_stream_ops</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-8\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">capability</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-9\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">no_check</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-10\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\">      </span><span class=\"crayon-v\">INET_PROTOSW_PERMANENT</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-11\"><span class=\"crayon-h\">\t\t\t      </span><span class=\"crayon-v\">INET_PROTOSW_ICSK</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a4794869348-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a4794869348-14\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>这边也用了重载，AF_INET有TCP、UDP以及Raw三种:</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fq9n12m0pcj20wg0eetbd.jpg\"></p>\n<p>从上述代码，我们可以清楚的发现sock-&gt;ops=&amp;inet_stream_ops;</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881a8671332908\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconst struct proto_ops inet_stream_ops = {\r\n\t.family\t\t   = PF_INET,\r\n\t.owner\t\t   = THIS_MODULE,\r\n\t......\r\n\t.sendmsg\t   = tcp_sendmsg,\r\n\t.recvmsg\t   = sock_common_recvmsg,\r\n\t......\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a8671332908-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a8671332908-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a8671332908-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a8671332908-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a8671332908-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a8671332908-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881a8671332908-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881a8671332908-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881a8671332908-1\"><span class=\"crayon-r\">const</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">proto_ops </span><span class=\"crayon-v\">inet_stream_ops</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a8671332908-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">family</span><span class=\"crayon-h\">\t\t   </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">PF_INET</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a8671332908-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">owner</span><span class=\"crayon-h\">\t\t   </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">THIS_MODULE</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a8671332908-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a8671332908-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">sendmsg</span><span class=\"crayon-h\">\t   </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp_sendmsg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a8671332908-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recvmsg</span><span class=\"crayon-h\">\t   </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock_common_recvmsg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881a8671332908-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881a8671332908-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>即sock-&gt;ops-&gt;recvmsg = sock_common_recvmsg;<br>\n同时sock-&gt;sk-&gt;sk_prot = tcp_prot;</p>\n<p>我们再看下tcp_prot中的各个函数重载的定义:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881ab436199134\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstruct proto tcp_prot = {\r\n\t.name\t\t\t= \"TCP\",\r\n\t.close\t\t\t= tcp_close,\r\n\t.connect\t\t= tcp_v4_connect,\r\n\t.disconnect\t\t= tcp_disconnect,\r\n\t.accept\t\t\t= inet_csk_accept,\r\n\t......\r\n\t// 我们重点考察tcp的读\r\n\t.recvmsg\t\t= tcp_recvmsg,\r\n\t......\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881ab436199134-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881ab436199134-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881ab436199134-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881ab436199134-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881ab436199134-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881ab436199134-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-1\"><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">proto </span><span class=\"crayon-v\">tcp_prot</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881ab436199134-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">name</span><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"TCP\"</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">close</span><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp_close</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881ab436199134-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">connect</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp_v4_connect</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">disconnect</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp_disconnect</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881ab436199134-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">accept</span><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">inet_csk_accept</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881ab436199134-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 我们重点考察tcp的读</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recvmsg</span><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">tcp_recvmsg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881ab436199134-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881ab436199134-11\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0017 seconds] -->\r\n<p></p>\n<h2 id=\"h2_3\">fcntl控制socket的阻塞\\非阻塞状态</h2>\n<p>我们用fcntl修改socket的阻塞\\非阻塞状态。 事实上: fcntl的作用就是将O_NONBLOCK标志位存储在sock_fd对应的filp结构的f_lags里,如下图所示。</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fq9n13is3fj20ws0j4go5.jpg\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881af840779449\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfcntl(sock_fd, F_SETFL, fdflags | O_NONBLOCK);\r\n\t|-&gt;setfl</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881af840779449-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881af840779449-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881af840779449-1\"><span class=\"crayon-e\">fcntl</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock_fd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">F_SETFL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fdflags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_NONBLOCK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881af840779449-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">setfl</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>追踪setfl代码:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881b2004201300\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic int setfl(int fd, struct file * filp, unsigned long arg) {\r\n\t......\r\n\tfilp-&gt;f_flags = (arg &amp; SETFL_MASK) | (filp-&gt;f_flags &amp; ~SETFL_MASK);\r\n\t......\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b2004201300-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881b2004201300-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b2004201300-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881b2004201300-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b2004201300-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881b2004201300-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">setfl</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">fd</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">file</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">filp</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">arg</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881b2004201300-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881b2004201300-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">filp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">f_flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">arg</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">SETFL_MASK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">filp</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">f_flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-v\">SETFL_MASK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881b2004201300-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881b2004201300-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>上图中，由sock_fd在task_struct(进程结构体)-&gt;files_struct-&gt;fd_array中找到对应的socket的file描述符，再修改file-&gt;flags</p>\n<h2 id=\"h2_4\">在调用socket.recv的时候</h2>\n<p>我们跟踪源码调用:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881b5725817240\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsocket.recv\r\n\t|-&gt;sys_recv\r\n\t\t|-&gt;sys_recvfrom\r\n\t\t\t|-&gt;sock_recvmsg\r\n\t\t\t\t|-&gt;__sock_recvmsg\r\n\t\t\t\t\t|-&gt;sock-&gt;ops-&gt;recvmsg</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b5725817240-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881b5725817240-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b5725817240-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881b5725817240-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881b5725817240-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881b5725817240-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881b5725817240-1\"><span class=\"crayon-v\">socket</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">recv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881b5725817240-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sys_recv</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881b5725817240-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sys_recvfrom</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881b5725817240-4\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sock_recvmsg</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881b5725817240-5\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">__sock_recvmsg</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881b5725817240-6\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sock</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">ops</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">recvmsg</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>由上文可知: sock-&gt;ops-&gt;recvmsg = sock_common_recvmsg;</p>\n<h3 id=\"h3_5\">sock</h3>\n<p>值得注意的是,在sock_recmsg中,有对标识O_NONBLOCK的处理</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881be567595396\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\tif (sock-&gt;file-&gt;f_flags &amp; O_NONBLOCK)\r\n\t\tflags |= MSG_DONTWAIT;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881be567595396-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881be567595396-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881be567595396-1\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sock</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">file</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">f_flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">O_NONBLOCK</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881be567595396-2\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSG_DONTWAIT</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>上述代码中sock关联的file中获取其f_flags,如果flags有O_NONBLOCK标识，那么就设置msg_flags为MSG_DONTWAIT(不等待)。<br>\nfcntl与socket就是通过其共同操作File结构关联起来的。</p>\n<h3 id=\"h3_6\">继续跟踪调用</h3>\n<p>sock_common_recvmsg</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881c1517490206\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint sock_common_recvmsg(struct kiocb *iocb, struct socket *sock,\r\n\t\t\tstruct msghdr *msg, size_t size, int flags) {\r\n\t......\r\n\t// 如果flags的MSG_DONTWAIT标识置位，则传给recvmsg的第5个参数为正,否则为0\r\n\terr = sk-&gt;sk_prot-&gt;recvmsg(iocb, sk, msg, size, flags &amp; MSG_DONTWAIT,\r\n\t\t\t\t   flags &amp; ~MSG_DONTWAIT, &amp;addr_len);\r\n\t.....\t\t\t\t   \r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c1517490206-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c1517490206-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c1517490206-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c1517490206-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c1517490206-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c1517490206-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c1517490206-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c1517490206-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881c1517490206-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sock_common_recvmsg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">kiocb *</span><span class=\"crayon-v\">iocb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">socket *</span><span class=\"crayon-v\">sock</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c1517490206-2\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-e \">msghdr *</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c1517490206-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c1517490206-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 如果flags的MSG_DONTWAIT标识置位，则传给recvmsg的第5个参数为正,否则为0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c1517490206-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_prot</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-e\">recvmsg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">iocb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">size</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSG_DONTWAIT</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c1517490206-6\"><span class=\"crayon-h\">\t\t\t\t   </span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-v\">MSG_DONTWAIT</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">addr_len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c1517490206-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">\t\t\t\t   </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c1517490206-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0020 seconds] -->\r\n<p>由上文可知: sk-&gt;sk_prot-&gt;recvmsg 其中sk_prot=tcp_prot,即最终调用的是tcp_prot-&gt;tcp_recvmsg,<br>\n上面的代码可以看出，如果fcntl(O_NONBLOCK)=&gt;MSG_DONTWAIT置位=&gt;(flags &amp; MSG_DONTWAIT)&gt;0, 再结合tcp_recvmsg的函数签名,即如果设置了O_NONBLOCK的话，设置给tcp_recvmsg的nonblock参数&gt;0,关系如下图所示:</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fq9n14e3v5j212g09wdh9.jpg\"></p>\n<h3 id=\"h3_7\">最终的调用逻辑tcp_recvmsg</h3>\n<p>首先我们看下tcp_recvmsg的函数签名:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881c5541666546\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint tcp_recvmsg(struct kiocb *iocb, struct sock *sk, struct msghdr *msg,\r\n\t\tsize_t len, int nonblock, int flags, int *addr_len)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c5541666546-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c5541666546-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881c5541666546-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp_recvmsg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kiocb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">iocb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">msghdr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c5541666546-2\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonblock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">addr_len</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>显然我们关注焦点在(int nonblock这个参数上):</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881c8442515880\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint tcp_recvmsg(struct kiocb *iocb, struct sock *sk, struct msghdr *msg,\r\n\t\tsize_t len, int nonblock, int flags, int *addr_len){\r\n\t......\t\r\n\t// copied是指向用户空间拷贝了多少字节，即读了多少\r\n\tint copied;\r\n\t// target指的是期望多少字节\r\n\tint target;\r\n\t// 等效为timo = noblock ? 0 : sk-&gt;sk_rcvtimeo;\r\n\ttimeo = sock_rcvtimeo(sk, nonblock);\r\n\t......\t\r\n\t// 如果设置了MSG_WAITALL标识target=需要读的长度\r\n\t// 如果未设置，则为最低低水位值\r\n\ttarget = sock_rcvlowat(sk, flags &amp; MSG_WAITALL, len);\r\n\t......\r\n\r\n\tdo{\r\n\t\t// 表明读到数据\r\n\t\tif (copied) {\r\n\t\t\t// 注意，这边只要!timeo，即nonblock设置了就会跳出循环\r\n\t\t\tif (sk-&gt;sk_err ||\r\n\t\t\t    sk-&gt;sk_state == TCP_CLOSE ||\r\n\t\t\t    (sk-&gt;sk_shutdown &amp; RCV_SHUTDOWN) ||\r\n\t\t\t    !timeo ||\r\n\t\t\t    signal_pending(current) ||\r\n\t\t\t    (flags &amp; MSG_PEEK))\r\n\t\t\tbreak;\r\n\t\t}else{\r\n\t\t\t// 到这里，表明没有读到任何数据\r\n\t\t\t// 且nonblock设置了导致timeo=0，则返回-EAGAIN,符合我们的预期\r\n\t\t\tif (!timeo) {\r\n\t\t\t\tcopied = -EAGAIN;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t// 这边如果堵到了期望的数据，继续，否则当前进程阻塞在sk_wait_data上\r\n\t\tif (copied &gt;= target) {\r\n\t\t\t/* Do not sleep, just process backlog. */\r\n\t\t\trelease_sock(sk);\r\n\t\t\tlock_sock(sk);\r\n\t\t} else\r\n\t\t\tsk_wait_data(sk, &amp;timeo);\r\n\t} while (len &gt; 0);\t\t\r\n\t......\r\n\treturn copied\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881c8442515880-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881c8442515880-44\">44</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tcp_recvmsg</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">kiocb</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">iocb</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sock</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">msghdr</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">msg</span><span class=\"crayon-sy\">,</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-2\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-e\">size_t </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonblock</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-v\">addr_len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// copied是指向用户空间拷贝了多少字节，即读了多少</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">copied</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// target指的是期望多少字节</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 等效为timo = noblock ? 0 : sk-&gt;sk_rcvtimeo;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">timeo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sock_rcvtimeo</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">nonblock</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-10\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-11\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 如果设置了MSG_WAITALL标识target=需要读的长度</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 如果未设置，则为最低低水位值</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-13\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">target</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sock_rcvlowat</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSG_WAITALL</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">len</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-14\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-16\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">do</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-17\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// 表明读到数据</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-18\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">copied</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-19\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 注意，这边只要!timeo，即nonblock设置了就会跳出循环</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-20\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_err</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-21\"><span class=\"crayon-h\">\t\t\t    </span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_state</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TCP_CLOSE</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-22\"><span class=\"crayon-h\">\t\t\t    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_shutdown</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RCV_SHUTDOWN</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-23\"><span class=\"crayon-h\">\t\t\t    </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">timeo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-24\"><span class=\"crayon-h\">\t\t\t    </span><span class=\"crayon-e\">signal_pending</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">||</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-25\"><span class=\"crayon-h\">\t\t\t    </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">flags</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">MSG_PEEK</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-26\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-27\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-st\">else</span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-28\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 到这里，表明没有读到任何数据</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-29\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">// 且nonblock设置了导致timeo=0，则返回-EAGAIN,符合我们的预期</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-30\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">timeo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-31\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-v\">copied</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">EAGAIN</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-32\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-st\">break</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-33\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-34\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-c\">// 这边如果堵到了期望的数据，继续，否则当前进程阻塞在sk_wait_data上</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-35\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">copied</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">target</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-36\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-c\">/* Do not sleep, just process backlog. */</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-37\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">release_sock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-38\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">lock_sock</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-39\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">else</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-40\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-e\">sk_wait_data</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">timeo</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-41\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">while</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">len</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">\t\t</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-42\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881c8442515880-43\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">copied</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881c8442515880-44\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0064 seconds] -->\r\n<p>上面的逻辑归结起来就是：<br>\n(1)在设置了nonblock的时候，如果copied&gt;0,则返回读了多少字节,如果copied=0，则返回-EAGAIN,提示应用重复调用。<br>\n(2)如果没有设置nonblock，如果读取的数据&gt;=期望，则返回读取了多少字节。如果没有则用sk_wait_data将当前进程等待。<br>\n如下流程图所示:</p>\n<p><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fq9n15gvtaj20z60k8acz.jpg\"></p>\n<h3 id=\"h3_8\">阻塞函数sk_wait_data</h3>\n<p>sk_wait_data代码-函数为:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881cc648415349\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n\t// 将进程状态设置为可打断INTERRUPTIBLE\r\n\tprepare_to_wait(sk-&gt;sk_sleep, &amp;wait, TASK_INTERRUPTIBLE);\r\n\tset_bit(SOCK_ASYNC_WAITDATA, &amp;sk-&gt;sk_socket-&gt;flags);\r\n\t// 通过调用schedule_timeout让出CPU，然后进行睡眠\r\n\trc = sk_wait_event(sk, timeo, !skb_queue_empty(&amp;sk-&gt;sk_receive_queue));\r\n\t// 到这里的时候，有网络事件或超时事件唤醒了此进程，继续运行\r\n\tclear_bit(SOCK_ASYNC_WAITDATA, &amp;sk-&gt;sk_socket-&gt;flags);\r\n\tfinish_wait(sk-&gt;sk_sleep, &amp;wait);</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881cc648415349-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881cc648415349-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881cc648415349-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881cc648415349-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881cc648415349-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881cc648415349-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881cc648415349-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881cc648415349-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881cc648415349-1\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 将进程状态设置为可打断INTERRUPTIBLE</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881cc648415349-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">prepare_to_wait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_sleep</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">TASK_INTERRUPTIBLE</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881cc648415349-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">set_bit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SOCK_ASYNC_WAITDATA</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_socket</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881cc648415349-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 通过调用schedule_timeout让出CPU，然后进行睡眠</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881cc648415349-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">rc</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sk_wait_event</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeo</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-e\">skb_queue_empty</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_receive_queue</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881cc648415349-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 到这里的时候，有网络事件或超时事件唤醒了此进程，继续运行</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881cc648415349-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">clear_bit</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">SOCK_ASYNC_WAITDATA</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_socket</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">flags</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881cc648415349-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">finish_wait</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_sleep</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">wait</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0022 seconds] -->\r\n<p>该函数调用schedule_timeout进入睡眠，其进一步调用了schedule函数，首先从运行队列删除，其次加入到等待队列，最后调用和体系结构相关的switch_to宏来完成进程间的切换。<br>\n如下图所示:</p>\n<p><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fq9n16qg5xj21540rw43a.jpg\"></p>\n<h3 id=\"h3_9\">阻塞后什么时候恢复运行呢</h3>\n<h4 id=\"h4_10\">情况1:有对应的网络数据到来</h4>\n<p>首先我们看下网络分组到来的内核路径，网卡发起中断后调用netif_rx将事件挂入CPU的等待队列，并唤起软中断(soft_irq)，再通过linux的软中断机制调用net_rx_action，如下图所示:</p>\n<p><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fq9n17pdxbj213s0oc0vh.jpg\"></p>\n<p>注:上图来自PLKA(&lt;&lt;深入Linux内核架构&gt;&gt;)<br>\n紧接着跟踪next_rx_action</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881d0920660333\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nnext_rx_action\r\n\t|-process_backlog\r\n\t\t......\r\n\t\t\t|-&gt;packet_type-&gt;func 在这里我们考虑ip_rcv\r\n\t\t\t\t\t|-&gt;ipprot-&gt;handler 在这里ipprot重载为tcp_protocol\r\n\t\t\t\t\t\t(handler 即为tcp_v4_rcv)</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d0920660333-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d0920660333-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d0920660333-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d0920660333-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d0920660333-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d0920660333-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881d0920660333-1\"><span class=\"crayon-v\">next_rx_action</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d0920660333-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">process</span><span class=\"crayon-sy\">_</span>backlog</div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d0920660333-3\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d0920660333-4\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">packet_type</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">func</span><span class=\"crayon-h\"> </span>在这里我们考虑<span class=\"crayon-v\">ip_rcv</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d0920660333-5\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">ipprot</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-i\">handler</span><span class=\"crayon-h\"> </span>在这里<span class=\"crayon-i\">ipprot</span>重载为<span class=\"crayon-e\">tcp_protocol</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d0920660333-6\"><span class=\"crayon-h\">\t\t\t\t\t\t</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">handler</span><span class=\"crayon-h\"> </span>即为<span class=\"crayon-v\">tcp_v4_rcv</span><span class=\"crayon-sy\">)</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>紧接着tcp_v4_rcv:</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881d3252246211\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ntcp_input.c\r\ntcp_v4_rcv\r\n\t|-tcp_v4_do_rcv\r\n\t\t|-tcp_rcv_state_process\r\n\t\t\t|-tcp_data_queue\r\n\t\t\t\t|-sk-&gt;sk_data_ready=sock_def_readable\r\n\t\t\t\t\t|-wake_up_interruptible\r\n\t\t\t\t\t\t|-__wake_up\r\n\t\t\t\t\t\t\t|-__wake_up_common</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d3252246211-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d3252246211-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d3252246211-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d3252246211-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d3252246211-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d3252246211-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d3252246211-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d3252246211-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d3252246211-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881d3252246211-1\"><span class=\"crayon-v\">tcp_input</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">c</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d3252246211-2\"><span class=\"crayon-v\">tcp_v4_rcv</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d3252246211-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tcp_v4_do_rcv</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d3252246211-4\"><span class=\"crayon-h\">\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tcp_rcv_state_process</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d3252246211-5\"><span class=\"crayon-h\">\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">tcp_data_queue</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d3252246211-6\"><span class=\"crayon-h\">\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">sk</span><span class=\"crayon-o\">-&gt;</span><span class=\"crayon-v\">sk_data_ready</span><span class=\"crayon-o\">=</span><span class=\"crayon-v\">sock_def_readable</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d3252246211-7\"><span class=\"crayon-h\">\t\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">wake_up_interruptible</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d3252246211-8\"><span class=\"crayon-h\">\t\t\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">__wake_up</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d3252246211-9\"><span class=\"crayon-h\">\t\t\t\t\t\t\t</span><span class=\"crayon-o\">|</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">__wake_up_common</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>在这里__wake_up_common将停在当前wait_queue_head_t中的进程唤醒，即状态改为task_running，等待CFS调度以进行下一步的动作,如下图所示。</p>\n<p><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fq9n18hqx2j20zq0kigng.jpg\"></p>\n<h4 id=\"h4_11\">情况2:设定的超时时间到来</h4>\n<p>在前面调用sk_wait_event中调用了schedule_timeout</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881d7667640840\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfastcall signed long __sched schedule_timeout(signed long timeout) {\r\n\t......\r\n\t// 设定超时的回掉函数为process_timeout\r\n\tsetup_timer(&amp;timer, process_timeout, (unsigned long)current);\r\n\t__mod_timer(&amp;timer, expire);\r\n\t// 这边让出CPU\r\n\tschedule();\r\n\tdel_singleshot_timer_sync(&amp;timer);\r\n\ttimeout = expire - jiffies;\r\n out:\r\n \t// 返回经过了多长事件\r\n\treturn timeout &lt; 0 ? 0 : timeout;\t\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881d7667640840-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881d7667640840-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-1\"><span class=\"crayon-e\">fastcall </span><span class=\"crayon-t\">signed</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">__sched </span><span class=\"crayon-e\">schedule_timeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">signed</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-2\"><span class=\"crayon-h\">\t</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 设定超时的回掉函数为process_timeout</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-4\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">setup_timer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">timer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">process_timeout</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">current</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-5\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">__mod_timer</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">timer</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">expire</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-6\"><span class=\"crayon-h\">\t</span><span class=\"crayon-c\">// 这边让出CPU</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-7\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">schedule</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-8\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">del_singleshot_timer_sync</span><span class=\"crayon-sy\">(</span><span class=\"crayon-o\">&amp;</span><span class=\"crayon-v\">timer</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-9\"><span class=\"crayon-h\">\t</span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">expire</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">jiffies</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">out</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-11\"><span class=\"crayon-h\"> \t</span><span class=\"crayon-c\">// 返回经过了多长事件</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881d7667640840-12\"><span class=\"crayon-h\">\t</span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">timeout</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\">\t</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881d7667640840-13\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0024 seconds] -->\r\n<p>process_timeout函数即是将此进程重新唤醒</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344881da714049190\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div><span class=\"crayon-language\">C</span></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nstatic void process_timeout(unsigned long __data)\r\n{\r\n\twake_up_process((struct task_struct *)__data);\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881da714049190-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881da714049190-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344881da714049190-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344881da714049190-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344881da714049190-1\"><span class=\"crayon-m\">static</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">process_timeout</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">unsigned</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">long</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">__data</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881da714049190-2\"><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344881da714049190-3\"><span class=\"crayon-h\">\t</span><span class=\"crayon-e\">wake_up_process</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">task_struct</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">*</span><span class=\"crayon-sy\">)</span><span class=\"crayon-v\">__data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344881da714049190-4\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<h2 id=\"h2_12\">总结</h2>\n<p>linux内核源代码博大精深，阅读其代码很费周折。希望笔者这篇文章能帮助到阅读linux网络协议栈代码的人。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113858\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113858votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113858\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/83781eed2f7e726b14e5d4ca2e1a602b8b53d469.jpg"}
{"url_object_id": "c4047562c0b4ecb3f07bd8265ef26273", "title": ["命令行乐趣：嘲讽输错 Bash 命令的用户"], "url": "http://blog.jobbole.com/113854/", "create_date": "2018/04/13", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102653o0g177wl8dug2kw2.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 0, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/howto/insult-linux-unix-bash-user-when-typing-wrong-command/\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9497-1.html\">Linux中国/ChenYi</a>   </div><p class=\"article_img\"><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102653o0g177wl8dug2kw2.jpg\"></p>\n<p>你可以通过配置 <code>sudo</code> 命令去嘲讽输入错误密码的用户。但是现在，当用户在 shell 输错命令时，也能嘲讽他了（滥用？）。</p>\n<h3 id=\"toc_1\">你好 bash-insulter</h3>\n<p>来自 Github 页面：</p>\n<blockquote><p>当用户键入错误命令，随机嘲讽。它使用了一个 bash4.x. 版本的全新内置错误处理函数，叫 <code>command_not_found_handle</code>。</p></blockquote>\n<h3 id=\"toc_2\">安装</h3>\n<p>键入下列 git 命令克隆一个仓库：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c78911499701\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ngit clone https://github.com/hkbakke/bash-insulter.git bash-insulter</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c78911499701-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c78911499701-1\"><span class=\"crayon-e\">git </span><span class=\"crayon-r\">clone</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">https</span><span class=\"crayon-o\">:</span><span class=\"crayon-c\">//github.com/hkbakke/bash-insulter.git bash-insulter</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>示例输出：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c80910415747\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nCloning into 'bash-insulter'...\r\nremote: Counting objects: 52, done.\r\nremote: Compressing objects: 100% (49/49), done.\r\nremote: Total 52 (delta 12), reused 12 (delta 2), pack-reused 0\r\nUnpacking objects: 100% (52/52), done.</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c80910415747-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c80910415747-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c80910415747-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c80910415747-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c80910415747-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c80910415747-1\"><span class=\"crayon-e\">Cloning </span><span class=\"crayon-i\">into</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'bash-insulter'</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c80910415747-2\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Counting </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c80910415747-3\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Compressing </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">49</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">49</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c80910415747-4\"><span class=\"crayon-v\">remote</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Total</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">delta</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">reused</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">delta</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pack</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">reused</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c80910415747-5\"><span class=\"crayon-e\">Unpacking </span><span class=\"crayon-v\">objects</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-o\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">52</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">52</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">done</span><span class=\"crayon-sy\">.</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>用文本编辑器，比如说使用 <code>vi</code>，编辑你的 <code>~/.bashrc</code> 或者 <code>/etc/bash.bashrc</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c84092716083\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi ~/.bashrc</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c84092716083-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c84092716083-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">~</span><span class=\"crayon-o\">/</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">bashrc</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>在其后追加这一行（具体了解请查看 <a class=\"ext\" href=\"https://bash.cyberciti.biz/guide/If..else..fi\" target=\"_blank\" rel=\"external nofollow\">if..else..fi 声明</a><span class=\"sup\">[1]</span> 和 <a class=\"ext\" href=\"https://bash.cyberciti.biz/guide/Source_command\" target=\"_blank\" rel=\"external nofollow\">source 命令</a><span class=\"sup\">[2]</span>）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c88779459856\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif [ -f $HOME/bash-insulter/src/bash.command-not-found ]; then\r\n    source $HOME/bash-insulter/src/bash.command-not-found\r\nfi</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c88779459856-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c88779459856-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c88779459856-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c88779459856-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">f</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">found</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c88779459856-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-i\">source</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">found</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c88779459856-3\"><span class=\"crayon-v\">fi</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>保存并关闭文件。重新登录，如果不想退出账号也可以手动运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c8c536819846\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ . $HOME/bash-insulter/src/bash.command-not-found</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c8c536819846-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c8c536819846-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">.</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">found</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p></p>\n<h3 id=\"toc_3\">如何使用它？</h3>\n<p>尝试键入一些无效命令：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c8f839636241\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ ifconfigs\r\n$ dates</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c8f839636241-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c8f839636241-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c8f839636241-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ifconfigs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c8f839636241-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dates</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>示例输出:</p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102702uazyc5tf7qmhcccy.jpg\" alt=\"一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。\"></a><span class=\"sup\"><em>一个有趣的 bash 钩子功能，嘲讽输入了错误命令的你。</em>[3]</span></p>\n<h3 id=\"toc_4\">自定义</h3>\n<p>你需要编辑 <code>$HOME/bash-insulter/src/bash.command-not-found</code>：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c92072672891\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vi $HOME/bash-insulter/src/bash.command-not-found</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c92072672891-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c92072672891-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vi</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-v\">HOME</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">insulter</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">src</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bash</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">command</span><span class=\"crayon-o\">-</span><span class=\"crayon-st\">not</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">found</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>示例代码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c96708905839\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ncommand_not_found_handle () {\r\n    local INSULTS=(\r\n        \"Boooo!\"\r\n        \"Don't you know anything?\"\r\n        \"RTFM!\"\r\n        \"Hahaha, n00b!\"\r\n        \"Wow! That was impressively wrong!\"\r\n        \"What are you doing??\"\r\n        \"Pathetic\"\r\n        \"...and this is the best you can do??\"\r\n        \"The worst one today!\"\r\n        \"n00b alert!\"\r\n        \"Your application for reduced salary has been sent!\"\r\n        \"lol\"\r\n        \"u suk\"\r\n        \"lol... plz\"\r\n        \"plz uninstall\"\r\n        \"And the Darwin Award goes to.... ${USER}!\"\r\n        \"ERROR_INCOMPETENT_USER\"\r\n        \"Incompetence is also competence\"\r\n        \"Bad.\"\r\n        \"Fake it till you make it!\"\r\n        \"What is this...? Amateur hour!?\"\r\n        \"Come on! You can do it!\"\r\n        \"Nice try.\"\r\n        \"What if... you type an actual command the next time!\"\r\n        \"What if I told you... it is possible to type valid commands.\"\r\n        \"Y u no speak computer???\"\r\n        \"This is not Windows\"\r\n        \"Perhaps you should leave the command line alone...\"\r\n        \"Please step away from the keyboard!\"\r\n        \"error code: 1D10T\"\r\n        \"ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.\"\r\n        \"Pro tip: type a valid command!\"\r\n    )\r\n\r\n    # 设置“随机”种子发生器 \r\n    RANDOM=$(date +%s%N)\r\n    VALUE=$((${RANDOM}%2))\r\n\r\n    if [[ ${VALUE} -lt 1 ]]; then\r\n        printf \"\\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e \"${INSULTS[@]}\")$(tput sgr0)\\n\\n\"\r\n    fi\r\n\r\n    echo \"-bash: $1: command not found\"\r\n\r\n    # 无效命令，常规返回已存在的代码\r\n    return 127\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-26\">26</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-27\">27</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-28\">28</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-29\">29</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-30\">30</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-31\">31</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-32\">32</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-33\">33</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-34\">34</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-35\">35</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-36\">36</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-37\">37</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-38\">38</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-39\">39</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-40\">40</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-41\">41</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-42\">42</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-43\">43</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-44\">44</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-45\">45</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-46\">46</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-47\">47</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490c96708905839-48\">48</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c96708905839-49\">49</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-1\"><span class=\"crayon-e\">command_not_found_handle</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">local </span><span class=\"crayon-v\">INSULTS</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">(</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Boooo!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-4\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Don't you know anything?\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"RTFM!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Hahaha, n00b!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-7\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Wow! That was impressively wrong!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-8\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What are you doing??\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-9\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Pathetic\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-10\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"...and this is the best you can do??\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-11\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"The worst one today!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-12\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"n00b alert!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-13\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Your application for reduced salary has been sent!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-14\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lol\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-15\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"u suk\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-16\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"lol... plz\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-17\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"plz uninstall\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-18\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"And the Darwin Award goes to.... ${USER}!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-19\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"ERROR_INCOMPETENT_USER\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-20\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Incompetence is also competence\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-21\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Bad.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-22\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Fake it till you make it!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-23\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What is this...? Amateur hour!?\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-24\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Come on! You can do it!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-25\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Nice try.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-26\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What if... you type an actual command the next time!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-27\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"What if I told you... it is possible to type valid commands.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-28\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Y u no speak computer???\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-29\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"This is not Windows\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-30\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Perhaps you should leave the command line alone...\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-31\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Please step away from the keyboard!\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-32\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"error code: 1D10T\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-33\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"ACHTUNG! ALLES TURISTEN UND NONTEKNISCHEN LOOKENPEEPERS! DAS KOMPUTERMASCHINE IST NICHT FÜR DER GEFINGERPOKEN UND MITTENGRABEN! ODERWISE IST EASY TO SCHNAPPEN DER SPRINGENWERK, BLOWENFUSEN UND POPPENCORKEN MIT SPITZENSPARKEN. IST NICHT FÜR GEWERKEN BEI DUMMKOPFEN. DER RUBBERNECKEN SIGHTSEEREN KEEPEN DAS COTTONPICKEN HÄNDER IN DAS POCKETS MUSS. ZO RELAXEN UND WATSCHEN DER BLINKENLICHTEN.\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-34\"><span class=\"crayon-h\">        </span><span class=\"crayon-s\">\"Pro tip: type a valid command!\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-35\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-36\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-37\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 设置“随机”种子发生器 </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-38\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">RANDOM</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">date</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-39\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-o\">=</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">RANDOM</span><span class=\"crayon-sy\">}</span><span class=\"crayon-o\">%</span><span class=\"crayon-cn\">2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-40\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-41\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">VALUE</span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">lt</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-42\"><span class=\"crayon-h\">        </span><span class=\"crayon-i\">printf</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"\\n  $(tput bold)$(tput setaf 1)$(shuf -n 1 -e \"</span><span class=\"crayon-sy\">$</span><span class=\"crayon-sy\">{</span><span class=\"crayon-v\">INSULTS</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">@</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">}</span><span class=\"crayon-s\">\")$(tput sgr0)\\n\\n\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-43\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">fi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-44\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-45\"><span class=\"crayon-e\">    </span><span class=\"crayon-i\">echo</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"-bash: $1: command not found\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-46\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-47\"><span class=\"crayon-h\">    </span><span class=\"crayon-p\"># 无效命令，常规返回已存在的代码</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490c96708905839-48\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">127</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490c96708905839-49\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0037 seconds] -->\r\n<p></p>\n<h3 id=\"toc_5\">赠品：sudo 嘲讽</h3>\n<p>编辑 <code>sudoers</code> 文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c9a267896581\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo visudo</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c9a267896581-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c9a267896581-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">visudo</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>追加下面这一行：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490c9d917134452\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults insults</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490c9d917134452-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490c9d917134452-1\"><span class=\"crayon-e\">Defaults </span><span class=\"crayon-v\">insults</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或者像下面尾行增加一句嘲讽语：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490ca0118057206\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults !lecture,tty_tickets,!fqdn,insults</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca0118057206-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca0118057206-1\"><span class=\"crayon-v\">Defaults</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">lecture</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">tty_tickets</span><span class=\"crayon-sy\">,</span><span class=\"crayon-o\">!</span><span class=\"crayon-v\">fqdn</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">insults</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>这是我的文件：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490ca3425166164\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-mixed-highlight\" title=\"含多种语言\"></span><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nDefaults    env_reset\r\nDefaults    mail_badpass\r\nDefaults    secure_path = \"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\"\r\n## If set, sudo will insult users when they enter an incorrect password. ##\r\nDefaults    insults\r\n\r\n# Host alias specification\r\n\r\n# User alias specification\r\n\r\n# Cmnd alias specification\r\n\r\n# User privilege specification\r\nroot ALL = (ALL:ALL) ALL\r\n\r\n# Members of the admin group may gain root privileges\r\n% admin ALL = (ALL) ALL   \r\n\r\n# Allow members of group sudo to execute any command\r\n% sudo ALL = (ALL:ALL) ALL   \r\n\r\n# See sudoers(5) for more information on \"#include\" directives:\r\n\r\n#includedir /etc/sudoers.d</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca3425166164-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca3425166164-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-1\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-e\">env_reset</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-2\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-e\">mail_badpass</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-3\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-v\">secure_path</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">\"/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/snap/bin\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-4\"><span class=\"crayon-p\">## If set, sudo will insult users when they enter an incorrect password. ##</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-5\"><span class=\"crayon-e\">Defaults    </span><span class=\"crayon-v\">insults</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-7\"><span class=\"crayon-p\"># Host alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-9\"><span class=\"crayon-p\"># User alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-11\"><span class=\"crayon-p\"># Cmnd alias specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-12\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-13\"><span class=\"crayon-p\"># User privilege specification</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-14\"><span class=\"crayon-e\">root </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">ALL</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-15\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-16\"><span class=\"crayon-p\"># Members of the admin group may gain root privileges</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-17\"><span class=\"crayon-ta\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">admin</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-18\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-19\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-20\"><span class=\"crayon-p\"># Allow members of group sudo to execute any command</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-21\"><span class=\"crayon-ta\">%</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ALL</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">ALL</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ALL</span><span class=\"crayon-h\"> </span> <span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-22\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-23\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-24\"><span class=\"crayon-p\"># See sudoers(5) for more information on \"#include\" directives:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca3425166164-25\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca3425166164-26\"><span class=\"crayon-p\">#includedir /etc/sudoers.d</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0044 seconds] -->\r\n<p>试一试：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490ca7149620890\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo -k # 清除缓存，从头开始\r\n$ sudo ls /root/\r\n$ sudo -i</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca7149620890-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d34490ca7149620890-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490ca7149620890-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca7149620890-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">k</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># 清除缓存，从头开始</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d34490ca7149620890-2\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-v\">ls</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">root</span><span class=\"crayon-o\">/</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d34490ca7149620890-3\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sudo</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">i</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>样例对话：</p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102702kp19pqb2egl8hlw2.jpg\" alt=\"当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。\"></a><span class=\"sup\"><em>当输入错误密码时，你会被一个有趣的的 sudo 嘲讽语戏弄。</em>[4]</span></p>\n<h3 id=\"toc_6\">赠品：你好 sl</h3>\n<p><a class=\"ext\" href=\"https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html\" target=\"_blank\" rel=\"external nofollow\">sl 或是 UNIX 经典捣蛋软件</a><span class=\"sup\">[5]</span> 游戏。当你错误的把 <code>ls</code> 输入成 <code>sl</code>，将会有一辆蒸汽机车穿过你的屏幕。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d34490cab388740139\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sl</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d34490cab388740139-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d34490cab388740139-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">sl</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<p style=\"text-align: center\"><a class=\"ext\" href=\"https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html\" target=\"_blank\" rel=\"external nofollow\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201803/30/102703s739gw183ll5454a.png\" alt=\"Linux / UNIX 桌面乐趣: 蒸汽机车\"></a><span class=\"sup\"><em>Linux / UNIX 桌面乐趣: 蒸汽机车</em>[6]</span></p>\n<p style=\"text-align: left\">[1]: https://bash.cyberciti.biz/guide/If..else..fi<br>\n[2]: https://bash.cyberciti.biz/guide/Source_command<br>\n[3]: https://www.cyberciti.biz/media/new/cms/2017/11/bash-insulter-Insults-the-user-when-typing-wrong-command.jpg<br>\n[4]: https://www.cyberciti.biz/media/new/cms/2017/11/sudo-insults.jpg<br>\n[5]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html<br>\n[6]: https://www.cyberciti.biz/tips/displays-animations-when-accidentally-you-type-sl-instead-of-ls.html<br>\n[7]: https://www.cyberciti.biz<br>\n[8]: https://github.com/CYLeft<br>\n[9]: https://github.com/wxy<br>\n[10]: https://github.com/LCTT/TranslateProject<br>\n[11]: https://linux.cn/article-9497-1.html?pr</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113854\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113854votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113854\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/521831f2ac1c9590fa6ac824e27690afeb69956d.jpg"}
{"url_object_id": "627fba360f907b35e30cde7e75e233df", "title": ["软件复杂性正在杀死我们"], "url": "http://blog.jobbole.com/113820/", "create_date": "2018/04/14", "front_image_url": ["http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg"], "praise_nums": "2", "comment_nums": 2, "fav_nums": 5, "tags": "业界", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/wx138099575\">风木</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://www.simplethread.com/software-complexity-killing-us/\">Justin Etheredge</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>代码量少了不代表软件的复杂度降低了，而是编程语言的表达力更强了。太多开发人员痴迷于框架，过度追求软件灵活性、可组合性等等，而忘记自己是不是真的需要这些。</p>\n<hr>\n<p><img class=\"alignnone\" src=\"http://ww3.sinaimg.cn/mw690/7cc829d3gw1ezy0oepjyrj21hc0u0wk6.jpg\" width=\"690\" height=\"388\"></p>\n<p>在有软件之前，只有黑暗。自从时代的黎明到来后，一直存在一个不变的事实：企业想要构建价格更低、运行更快的软件。</p>\n<p>当然，这是可以理解并且值得称赞的目标——尤其是你曾经花费时间跟软件开发人员打过交道。每个工程师都应该全心支持此目标，并且在当前环境的约束下，应该始终努力尽可能有效率地创造产品。</p>\n<p>然而，事实上，我们经常做不到这一点。并非故意为之，只是随着时间流逝，在构建软件时会因为意料之外的复杂性而陷入困境，因此自我训练以寻找边界案例、差距分析以及所有可能起源于同一个需求要点的隐藏故障。</p>\n<p>我们被大量的复杂度以及设计优雅解决方案的精神执念所迷惑：另一层抽象！干起来！分离相关量！继承构成！这也是可以理解的，但是在这个过程中，我们经常忽略正在被解决的业务问题，忘记管理复杂度是软件开发人员<strong>次重要</strong>的责任。</p>\n<p><strong>为什么会造成现在这样的局面？</strong></p>\n<h3>软件在某些方面上已经变得更加简单了</h3>\n<p>在过去的几十年里，软件产业非常成功地降低了编写大多数软件所需要的自定义代码量。</p>\n<p>这种减少大部分是通过使编程语言更有表现性来实现的。像 Python、Ruby 或 JavaScript 这些语言可以用<strong>不到 </strong>C 语言<strong>三分之一的代码</strong>来实现相似的功能。使用 C 语言取代汇编语言编写程序也同样带来了类似的优势。可以预见，在未来，语言设计不大可能带来如同过去几十年一样的改进。</p>\n<p>然而也有很多其他不需要让语言更具有表现力的方法，可以精简构建软件的代码总量。截止到现在，在过去的二十年里，我们最大的收获是开源软件（OSS）。如果没有个人和公司将资金投入到他们为社区免费赠予的软件中，没有这么多的代价和努力，那么我们今天所构建的大部分软件将不会实现。</p>\n<p>这些项目使我们能够站在巨人的肩膀上解决问题，利用工具让我们更专注于解决业务问题，而不是花时间建设基础设施。</p>\n<p>也就是说，业务是复杂的。可笑的复杂，而且只会更多，开源软件非常适合生成用以构建系统的框架和工具，但在很大程度上为了获得关注，又必须解决大量人员共享的问题。因此，大多数开源项目要么是相对通用的，要么是处于非常受欢迎的领域。因此，这些工具中的大部分都是建立系统的绝佳平台，但最终我们仍然需要在日益复杂且要求苛刻的系统中构建所有业务逻辑和接口。</p>\n<p>所以我们剩下的是一个看起来像这样的栈（对于 web 应用程序）…</p>\n<blockquote><p>&lt;Our Code/我们的代码&gt;<br>\n&lt;Libraries/库&gt;<br>\n&lt;Web Framework/Web 框架&gt;<br>\n&lt;Web Server/Web 服务器&gt;<br>\n&lt;Data Stores/数据存储&gt;<br>\n&lt;Operating System/操作系统&gt;</p></blockquote>\n<p>“Our Code”部分最终变得非常复杂，因为它反映了业务及其流程。如果我们有自定义的业务逻辑和自定义流程，那么我们只需编写组建应用程序的接口、工作流程和逻辑即可。当然，我们可以尝试用不同的方式来记录该逻辑（记住业务规则引擎？），但最终，没有其他人会为您的业务编写业务逻辑。实际上似乎没有办法解决这个问题……至少是在机器人到来并将我们从工作中解救出来之前。</p>\n<h3>不喜欢代码，那么低代码（Low-Code）如何？</h3>\n<p>如果我们必须开发应用程序的接口、工作流程和逻辑，这听起来像是难住我们了，对吗？ 在某种程度上，是的，但我们仍有几个选择。</p>\n<p>对于大多数开发者来说，软件等于代码，现实并非如此。 开发软件有许多方法，其中一种是使用可视化工具。 在网络普及之前，视觉开发和 RAD 工具在市场上占有更大的地位。 诸如 PowerBuilder、visual Foxpro、Delphi、VB 和 Access 等工具都具有可视化设计功能，允许开发人员在不输入任何代码的情况下创建界面。</p>\n<p>这些工具涵盖了需要编写的代码，但总的来说，你可以直观地设计应用程序，然后编写大量代码来实现应用程序的逻辑。 在很多情况下，你仍然用编程操作接口，因为使用这些工具构建的接口通常是静态的。 但是，对于大量应用程序，这些工具通过舍弃其他性能获得了巨大的生产力，主要是以灵活性为代价。</p>\n<p>自从网络兴起后，这些工具可能已经不再流行，但公司对它们的渴望并没有降低，尤其是因为势不可挡的软件需求仍然持续不断。 整个行业最新趋势是“低代码”系统。 低代码开发工具是最新一代拖放式软件开发工具的现代术语。 这些工具和其他工具之间最大的区别在于，它们主要基于 Web（和移动端），并且通常被托管于云平台。</p>\n<p>许多公司正活跃于这些平台上。Salesforce（App Cloud）、Outsystems、Mendix 以及 Kony 等厂商承诺能够比“传统”应用程序开发快许多倍。 虽然他们的很多说法可能很夸张，但也有一定的可信度。依赖类似上述平台的所有弊端，可能的确导致某些类型的程序比使用 .NET 或 Java 的传统程序开发更快。</p>\n<h3>那么，问题是什么呢？</h3>\n<p>的确有几个问题。 首先，有经验的开发人员经常讨厌这些工具。 大多数严肃的开发人员™ 喜欢使用真实代码™ 编写真正的软件™。 我知道这听起来像我正在迎合一群呜咽的婴儿（也许我有点儿），但如果你传递的核心价值是技术，那么采用顶尖开发人员不喜欢使用的工具并非是个好主意。</p>\n<p>其次，像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p>\n<p>如果你 10 年前用 PHP 搭建了一个应用程序，那么这个应用程序可能会显老，但它现在仍然可以嗡嗡作响。 语言和生态系统都是开源的，并由社区维护的。 你需要保持应用程序持续更新，却不必担心供应商断定不再值得花时间支持。</p>\n<blockquote><p>像我这样的人看着这些被封装的平台，说“不，不要在这里构建应用程序”。这是合情合理的忧虑，也是最让我困扰的事情。</p></blockquote>\n<p>如果你 10 年前选择了有自己平台的供应商，那么如果他们关闭工具或频繁更改工具（<a href=\"https://techcrunch.com/2017/01/30/facebooks-parse-developer-platform-is-shutting-down-today/\">还记得 Parse 么？</a>），你可能会被迫重写程序。或者更糟，你的系统会停滞在一个停止更新、不再支持服务的平台上。</p>\n<p>有很多理由去警惕这类平台，但对许多企业来说，以更少的付出来搭建软件太具诱惑以至于不忍拒绝。 软件的复杂性仍在持续，不幸的是软件工程师帮不上任何忙。</p>\n<h3>什么需要改变？</h3>\n<p>有高效的平台，可以让我们用真实代码™ 构建真正的软件™，但不幸的是，软件行业太过担心于跟随科技巨头地领导，以至于没有意识到他们的工具并没有对项目添加任何价值。</p>\n<p>我无法告诉你有多少次，曾遇到开发人员跟我说，相比于仅仅渲染 HTML，构建单一页面应用程序（SPA）类似的东西并不会增加开销。我曾听开发人员说过，所有应用都应该基于 NoSQL 数据库来开发，而关系数据库逐渐没落了。也曾听开发人员质疑为什么应用程序不是用 CQRS 和事件溯源编写的。</p>\n<p>正是这种思维过程和常规的开销导致公司认为软件开发过于昂贵。 你可能会说，“但事件溯源如此优雅！在微服务之上搭建 SPA 如此整洁！”当然，它可能是，但对你这种正在写十个微服务的人来说不是这样的。这种额外的复杂性往往是<strong>不必要的</strong>。</p>\n<p>作为从业人员，我们需要找到各种方法来简化搭建软件的过程，并且不忽视业务的合理复杂性。 我们需要承认，并非每个应用程序都需要与 Gmail 相同层次的界面复杂性和运营扩展性。 有很多应用程序需要经过深思熟虑的界面、复杂的逻辑、坚实的体系结构、流畅的工作流程等。但不需要微服务、AI、chatbots、NoSQL、Redux、Kafka、Containers 或任何类似的工具。</p>\n<p>如今很多开发人员似乎对技术能力非常着迷，以至于他们不能退后一步，问问自己是否真的需要这些。</p>\n<p>就像 MasterChef 上的人一样，他们以分子美食家的身份入场兜售自己。 他们将原料分成不同的组成部分，使用科学配对口味的方法，然后用大量的二氧化碳和液氮来制作你见过的最有创意的食物。 然后他们会在一两集之后被踢开，因为他们忘记了大多数烹饪的核心原则，即食物需要口感好。 他们似乎真的很惊讶于没有人喜欢他们发酵的茴香和芒果精华珍珠加上抹了鳀鱼沫的鳕鱼肉。</p>\n<p>对灵活性、可组合性和机敏性的痴迷正在给我们带来巨大的痛苦，并迫使公司远离我们所喜爱的平台和工具。 并不是说我上面列出的那些工具不会增加价值，尽管大公司在大规模操作系统时会遇到典型问题，工具也仅是为了解决真正的痛点而产生的。</p>\n<p>我所说的是，我们需要回到简单化的方向，并开始以更简单的方式创造事物，而不是仅仅一直讨论简单性。 也许我们可以依靠更多的<strong>集成</strong>技术栈来提供开箱即用的模式和工具，以便软件开发人员能够更高效地创建软件。</p>\n<blockquote><p>我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p></blockquote>\n<p>我们需要停止假装二十行的程序是一些需要认真手工缝制的独特挂毯。</p>\n<h3>聚焦简单性</h3>\n<p>写完之后，我仿佛听到一百万位开发人员磨刀的声音，但我相信如果我们继续坚持如下方向：想写所有东西、配置一切、编写所有内容、无论多大规模的问题都使用相同的堆栈，那么我们将把越来越多的业务添加到“低代码”平台和其他通过简化、移除起初写过的代码来降低软件成本的工具中。</p>\n<p>我们对业务日益复杂的回答不会增加开发过程的复杂性 – 无论它看起来多么优雅。</p>\n<p>我们必须设法通过简化开发流程来管理复杂性。 因为管理复杂性是次重要的责任，我们必须始终记住软件开发人员最重要的责任：通过使用软件来实现价值。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113820\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113820votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113820\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">风木</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/e496dcafc16ff266b061f892352783db.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/wx138099575\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/wx138099575/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/wx138099575/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 11</a> · <a title=\"微博主页\" target=\"_blank\" href=\"https://weibo.com/6426355449/profile?rightmod=1&amp;wvr=6&amp;mod=personinfo&amp;is_all=1\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/1ee8b23b2be55de42dc12bc7e4b5d4a4385a1ff4.jpg"}
{"url_object_id": "3de2dfc429d04bf285e94ece0ab02d8d", "title": ["15 分钟参透比特币和区块链"], "url": "http://blog.jobbole.com/111954/", "create_date": "2018/04/10", "front_image_url": ["http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7lkjvcdmj20sd0g445z.jpg"], "praise_nums": "4", "comment_nums": 2, "fav_nums": 3, "tags": "IT技术,区块链,比特币", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://mp.weixin.qq.com/s/JEkjYdvRw2x3PzxKDR7FQQ\">来自 ChenJunXuan 的投稿</a>   </div><div>\n<blockquote><p>区块链就是比特币世界这个村子的账本，谁挖到矿，谁就有权在这个账本翻开新的一页，并在新的一页记下“X年X日，本村某某挖矿得到比特币一枚，并得到奖励的手续费若干”。</p></blockquote>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7lkjvcdmj20sd0g445z.jpg\" width=\"690\" height=\"392\"></p>\n<p>比特币又火了。为什么要说又呢？因为比特币在 2013 年已经火过一次了。这次与 2013 年相同的是，比特币的价格一路飙升，让人咂舌。与 2013 年不同的是，这次人们不仅仅关注比特币的价格，也开始关注比特币背后的技术——<strong>区块链</strong>。</p>\n<p>一夜之间，区块链从舞台背后站到了聚光灯下，成为了人们追捧的热点。物流、医药、版权…好像哪都可以凭借区块链脱胎换骨。那么，这么神奇的技术，到底是怎么回事？</p>\n<p>本文就以最通俗的语言，不涉及任何高等数学和计算机知识，来介绍一下比特币和区块链系统。</p>\n<p>说到区块链就不得不说比特币，比特币是区块链技术最好的载体，所以本文就以比特币为例来介绍区块链。</p>\n<p>比特币很牛，牛在两个特点：<strong>去中心化、</strong><strong>电子货币</strong>。</p>\n<p>别小瞧这两点，这两点同时存在可不是一件容易事儿。</p>\n<p>首先来说说去中心化，通常去中心化的货币一般都要追溯到很久以前了，远古时代人们自发地使用贝壳、石子做为雏形货币进行交易，这时候的货币可以看作是去中心化的货币——无需中央银行来组织发行、确认交易合法性。</p>\n<p>但是使用这类货币的弊端也不必我多说，货币供给不稳定，取决于每年的贝类产量；货币质量不一，有的大有的小，有的是花蛤有的是文蛤；交易很繁琐，大宗交易动不动就要好几车的贝壳，这么多货币运来运去还容易被抢劫。</p>\n<p>于是货币进化，信用货币时代到来，货币成了银行账户里的数字，上面的问题都解决了，但是我们必须需要银行来控制货币的发行、防伪，来进行交易结算，我们的财产权全掌握在了银行的手中。银行喜欢动不动搞点QE放点水，我们银行卡里的钱越来越贬值。</p>\n<p><strong>这时候，我们就希望能有一种货币，既能像使用贝壳一样无需银行插手，又能符合当前信息时代对货币功能的需求。于是，集这两种特点于一身的比特币诞生了。</strong></p>\n<h2>比特币的基本原理</h2>\n<p>做为一种货币，通常就要满足几个特点：得有人<strong>发行</strong>它，得能<strong>持有</strong>它，人与人之间可以互相<strong>交换</strong>它。</p>\n<h3>持有</h3>\n<p>持有比特币非常简单，只要有一个<strong>收款地址</strong>，就可以持有比特币并接受比特币。所持有的比特币数量只是这个地址下的一个数字。</p>\n<p>有人会问，这不跟银行账户一样么，确实很像，但实质又很不一样。银行系统是一个中心化的系统，账户的余额是由银行说了算的，哪天银行系统出错余额变成0，那你就真的从ATM机里取不出钱。</p>\n<p>比特币不使用这种权威的中心机构，又需要一个稳定的记账系统，所以解决办法是每一个“矿工”都把比特币世界发生过的所有交易记录存在自己的硬盘上。有了全部的交易记录，推算每个人有多少余额也就很容易了。这个被保存在所有人电脑里的交易记录，学名就是<strong>区块链</strong>。黑客可以黑掉一些人保存的区块链，但是他做不到黑掉全世界大部分人，只要有大部分仍保存着正确的区块链，那么整个系统就可以通过纠错重新恢复正常。</p>\n<blockquote><p>就像打麻将时，我们有时候用记账方式来记录每回合的应收应付，比特币世界也通过记账来交易，每发生一笔交易都会公之于众，然后大家把这笔交易记录在自己的小账本上，这样每家有多少钱，大家在自己的小账本上都能查清楚。只不过当记账由4个人变成全比特币世界的村民时，这就需要一个稍微复杂点的系统了。</p></blockquote>\n<h3>发行</h3>\n<p>再来看看发行。我们先看纸币是怎么发行的，很简单，央行开动印刷机，一瞬间出现大把“毛爷爷”。而做为一种去中心化的电子货币，比特币是没有央行的，那怎么发行呢？</p>\n<p>比特币规定，人们可以去解答一个困难的问题，谁最先答出来，谁就可以发行一块比特币，也就是我们所谓的“挖矿”。</p>\n<p>这个困难的问题是什么呢？是哈希(hashing)的问题。哈希是一个函数<strong>F</strong>，对输入<strong>X</strong>进行一些运算来得到<strong>哈希值</strong><strong>Y</strong>。就是咱们高中学过的<strong>Y = F(X)</strong>。比特币让你解答的问题就是，告诉你哈希值<strong>Y</strong>和<strong>F</strong>，求<strong>X</strong>。</p>\n<p>这时候你会说了，这不就是个反函数的事么。抱歉，哈希函数这个函数比较特殊，找不到合适的反函数，要想求出<strong>X</strong>，唯一的方法就是一个一个数来试，把每一个数都代入到<strong>F</strong>里，看看结果是不是<strong>Y</strong>，如果恰好蒙对了，那也就把这个问题解答出来了。</p>\n<p>所以说所谓的货币发行、挖矿，实际上就是一帮人在用最好的计算机来撞大运蒙这个数。当一名矿工蒙对<strong>X</strong>后，也就是挖到矿后，他就获得了在原有的区块链末端创造一个新的<strong>交易区块</strong>的权利，在这个新创建的交易区块上，这位矿工可以附带一个由<strong>比特币世界</strong>作为付款人，收款人是任何人交易，这样，他就通过这个交易，创造并发行了一枚比特币。</p>\n<p>区块链就是由一串交易区块组成的。我们来看看交易区块上包含什么。</p>\n<p>一个交易区块会显示谁是它的父区块，包含本区块上的交易记录，以及本区块的哈希值。</p>\n<p> </p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7ljddkbdj20ht06ydil.jpg\" width=\"641\" height=\"250\"></p>\n<p>这样，随着矿工们不断挖矿创建新的交易区块，一个接一个的区块就串成了一串，成为了名副其实的区块链！在比特币世界中，由于某些原因，区块链会发生分叉（为什么会分叉下文会提到），因而比特币世界规定：唯一合法的区块链是当前最长的区块链。</p>\n<blockquote><p>区块链就是比特币世界这个村子的账本，谁挖到矿，谁就有权在这个账本翻开新的一页，并在新的一页记下“X年X日，本村某某挖矿得到比特币一枚，并得到奖励的手续费若干”。这个账本很特殊，并不是由村支书管理，而是所有的村民人手一本，谁挖到矿以后，都可以自己翻页记账，并让全村人按照同样的方式做，以保证全村所有人的账本一致。当全村人的账本出现不一致时，规定谁家的账本最长就听谁的。</p></blockquote>\n<h3>发行</h3>\n<p>比特币的关键点在于交易。对于一个去中心化的电子货币系统，交易是很有风险的。想象一下，你和另一个人的电子货币交易就类似于打欠条，而且这个欠条没有第三方公证人。如果其中一方突然翻脸，欠条的有效性是很难保障的。</p>\n<p>由于不能使用类似银行结算中心的第三方公证人（使用了就是中心化系统了），所以比特币干脆就让全世界人做为公证人。</p>\n<p>所有比特币的交易都不能偷偷摸摸进行，都需要将这笔交易通过互联网广播到全世界。如果C想给B 0.5个比特币，会向全世界广播“C给了B 0.5个比特币！”，这时所有挖矿的矿工们，会把这条交易记录加到他们正在挖的这个交易区块中。</p>\n<p>他们为什么要加呢？因为当矿工挖出矿时，除了规定奖励的一枚比特币外，每加多一条交易记录，还会额外再多给一点点手续费。蚊子肉也是肉，辛勤的矿工们没有不喜欢的。</p>\n<p>在把交易记录加到区块的过程中，矿工们首先会验证一下这笔交易合不合法，也就是查查村里的账本，当C名下货币不足0.5个时，这条交易记录就会被拒绝加入到区块中。</p>\n<p>加入到区块中并不代表交易已经成功，只有当包含这个交易记录的区块的随机数X被某位矿工发现，并创造了新的交易区块链接在当前区块后，才能被认为是合法交易，这条交易记录也就成为被验证的交易。</p>\n<p>B可能会问了，那也就是说C发了给我钱的广播后，我还不能马上确定我是不是收到钱了啊？</p>\n<blockquote><p>没错，C发广播，只相当于C站在村口朝全村人喊了一句 “我给B 五毛钱！”，只有当全村的人都听见，把这件事都记在了个自账本上，并且记下这件事的那页被矿工翻过去以后，B的户头上多了五毛钱这件事才真正得到了全村村民的认可。由于参与比特币挖矿的矿工众多，通常每笔交易所需的验证时间是非常短的，不会给交易带来延迟感。</p></blockquote>\n<p>由此比特币的发行和交易首尾相连扣在了一起。交易通过发布广播的形式进行，矿工们听到广播后把交易写在交易区块中；矿工们通过挖矿来确认历史交易的完成，并由此创建新的区块，延长区块链，发行新的比特币。</p>\n<section>\n<section class=\"\">\n<h2>区块链的分叉</h2>\n</section>\n</section>\n<p>之前提到了<strong>区块链的分叉</strong>。为什么区块链会发生分叉呢？原因就在于<strong>去中心化</strong>。</p>\n<p>没有中心，大家都各自维护账本，因此受困于网络的延时、交流的不充分，难免有出现分歧的时候。</p>\n<p>举两个例子，一个是在挖矿时容易出现的问题：矿工B蒙对了随机数，挖矿成功，延长了区块链，注意，此时矿工B延长的区块链仅仅是自己的，其他人还都不知道这件事。当然，矿工B马上向全世界发布挖矿成功的消息，让大家按照他的方式延长区块链。</p>\n<p>但是这时，另一位矿工C也蒙对了随机数，他或者因为网速延迟还没听到B的广播，或者听到广播但不甘心，存心想破坏规则，于是他也把自己的区块链延长了，并开始向全世界发广播。</p>\n<p>因为网速的延迟，并不是所有人都先听到B的广播，此时就会出现一部分人按照B的指示更新区块链，一部分人按照C的指示更新区块链，而且因为网速的延迟，大家没办法确定到底是B还是C先发布的广播，从而引起区块链分叉。</p>\n<blockquote><p>就好比村里两位矿工B和C分别住在村东和村西，B和C差不多在同一时间挖矿成功，把自家账本翻页，在新的一页写下属于自己的宣言“X年X月，本村B(C)挖矿得到比特币一枚”，并开始向全村大喊让全村人翻页并写下这句话。由于他们分别住在村子的两头，结果村东头的人先听到B大喊于是按找B的话记账，村西头的人先听到C大喊于是按照C的话记账，导致全村的账本此时出现了两个版本。</p></blockquote>\n<p>第二种情况是<strong>双重交易</strong>，B与C进行交易，发布广播宣布付给C一枚比特币，但是B同时还跟D勾搭，几乎同时又发布广播宣布付给D一枚比特币，更糟糕的是，B宣布付出的是同一枚。</p>\n<p>跟第一种情况一样，由于网速问题，一部分矿工先听到B与C交易的广播，并将这条交易记录计入到当前交易区块中，后听到B与D的交易，并判定不合法，拒不添加到交易区块。而另一部分矿工正相反，只把B与D的交易添加到交易区块中。</p>\n<p>这两种情况并不是罕见的，由于比特币世界由全世界各地的人参与，有的地区用的是100M光宽带，有的地方用的是56K拨号上网，网速千差万别，而且又有很多人心怀不轨，存心作恶，因此区块链分叉几乎时时刻刻都在发生。此时，比特币世界的最高原则就起作用了：<strong>唯一合法的区块链是当前最长的区块链。</strong></p>\n<p>可是就上面两种分叉的情况来看，此时分叉的两个区块链一样长啊？没关系，这两条都合法，也都不合法，咱们搁置争议，继续开挖，看谁挖得快，谁先再蒙对新的X，让自己的区块链再进一步，谁的区块链就变成最长，也就成了唯一合法的了。这么一听，怎么感觉这个区块链系统这么随意，有些不靠谱的样子啊，如果大家都不守规则，随意分叉，世界岂不乱套。</p>\n<p>别急，接下来咱们通过分析会发现，最终区块链肯定会恢复成稳定的一条。</p>\n<p>让我们回到第一个情况矿工B和矿工C分歧问题中，假设B的链条再进一步，成为了最长链条，这条链条也就成为比特币世界认定的合法链条。此时C有两个选择，一是放弃努力，乖乖的扔掉自己的区块链，使用B的。另一种选择是不甘心失败，扔坚持自己的区块链，希望自己能很快继续追平B并反超。</p>\n<p>选择前者是大家都开心的，比特币世界的区块链从此统一，选择后者实际上继续让区块链保持分叉状态。那么从理性角度，C应该如何做呢？实际上C此时应该果断放弃自己的链条。</p>\n<p>我们可以分析一下，当B和C的链条分叉时，此时比特币世界存在4种矿工、两种势力，B和拥护B的吃瓜矿工，C和拥护C的吃瓜矿工。此时B势力与C势力大体相当，所以大家各挖各的。</p>\n<p>当B势力先一步延长了B的链条后，此时C势力就会发生分化，绝大部分拥护C的吃瓜群众只要听到B链条延长的消息，马上会转投到B链条上，因为此时B链条更长，在更长的链条上继续挖矿显然更有前途。势力马上发生逆转，C会尴尬地发现，全世界都在与他为敌（哭）。所以C不得不放弃。</p>\n<p>当然，假设是C的势力先延长了区块链，那么情形正好相反，全世界的矿工都会马上投入C的怀抱。尽管可能确实是B先挖到的矿，但此时B也不得不选择放弃自己的那条已经无人问津的区块链。按照这种理性的假设，全世界大部分矿工都会安分守己的选择在最长的链条上工作，所以偶尔的分叉也不是什么大不了的事。</p>\n<p>当然仍存在一种极端情况，即B或C一个人的算力超过全世界算力的50%，这时候他们凭借一己之力就有可能反超。但是事实上，由于全世界都在参与，很难有人或组织有这么强的算力，其次即使C有这么强的算力，他老老实实地在最长链条上挖矿就好了，也没必要硬刚全世界，非要显示霸权只会让全世界都不陪他玩了，最后比特币失去价值，C损失更大。</p>\n<p>上面所说的第二种分叉情况的解决办法与第一种情况同理，坚持“唯一合法的区块链是当前最长的区块链”原则不动摇，最终合法的一条区块链只会记录B与C交易或B与D交易的其中一个，具体原因读者可以自己想一想。</p>\n<p> </p>\n<p>讲了这么多，大家可以发现，比特币凭借区块链的巧妙设计，使得交易与发行以一种非常稳定的状态进行，而保持稳定的核心力量是什么呢？就是无数矿工提供的算力。</p>\n<p>只要矿工够多，算力够大，验证速度够快，比特币的交易就可以快速地被验证，不小心出现的区块链分叉状态可以很快结束，保证整个系统稳定运行。所以挖矿可不光只是费电，这些电能实际上转化成为维持整个系统稳定的能量！</p>\n<p>这也告诉我们为什么比特币可以一个币价值数万，而有些新发行的各种币一文不值，因为比特币做为历史最长、受众最广的电子货币，也拥有数量最多、分布最广泛的矿工和算力，是最稳定的电子货币。</p>\n<p>而新发行的货币矿工数量很少，参与的算力低，根本起不到稳定整个系统的作用，算力低也意味着每笔交易的验证时间会变长，从而降低货币的可用性，所以这样的新兴货币一文不值。</p>\n<p>好了，关于比特币以及比特币系统所用到的区块链技术就介绍到这里，如有大牛对文中内容有异议，欢迎拍砖探讨！</p>\n<p> </p>\n<p><strong>参考文献：</strong></p>\n<p>Satoshi《Bitcoin: A Peer-to-Peer Electronic Cash System》</p>\n</div>\n<p> </p>\n<p><strong>关于作者：</strong></p>\n<p>ChenJunXuan / CC，17 年硕士毕业于上海交大，目前在阿里达摩院做计算机视觉方向/智能医学影像相关的算法开发，喜欢 Python。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"111954\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"111954votetotal\">4</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"111954\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/6ee5b64dfb633d1d06e3478d949e5f0b666c3d17.jpg"}
{"url_object_id": "c9d9c3009f6783bc6fdee771e14f8aa2", "title": ["机器学习如何发现你喜欢的音乐"], "url": "http://blog.jobbole.com/113821/", "create_date": "2018/04/13", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l3ts6p3j20ps0ocq78.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 4, "tags": "IT技术", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/1789912317\">XiaofengYue_DXY</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/spotifys-discover-weekly-how-machine-learning-finds-your-new-music-19a41ab76efe\">Sophia Ciocca</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><h2>机器学习如何发现你喜欢的音乐：音乐个性化推荐背后的科学原理</h2>\n<p>本周一，正如其它每个周一，一亿多 Spotify 用户每人都收到了一个崭新的歌单。这个叫做每周发现的歌单内混合了用户从未听过但是可能会喜欢的 30首歌曲。效果堪称神奇。</p>\n<p>我自己是 Spotify 的超级粉丝，对每周发现尤其喜爱。为什么呢？因为我觉得它懂我。它比我生命中的任何人都更清楚我的音乐品味。我很高兴每周它都能满足我的需求，一如既往地推荐一些我自己永远都不会找到或知道会喜欢的歌曲。</p>\n<p>对于那些两耳不闻窗外事的人们，请允许我介绍一下我的虚拟好友：</p>\n<p><img id=\"pic\" class=\"M_cur_zoom_out aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l3ts6p3j20ps0ocq78.jpg\"></p>\n<p style=\"text-align: center;\">[图片说明: 我的 Spotify 每周发现歌单]</p>\n<p>没想到，在这方面我不是一个人，不光是我对每周发现如此着迷 – 整个用户群体都趋之若鹜。这股热潮使得 Spotify 重新调整了它的重心，并在基于算法的歌单上投入了更多的资源。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l3uppwxj20dy0bwabh.jpg\" width=\"502\" height=\"428\"></p>\n<blockquote><p>Dave Howitz: @Spotfiy 每周发现的歌单对我的了解程度简直毛骨悚然，熟悉到就像一个曾经与我有过一起濒死体验的前女友一样。</p>\n<p>Amanda Whitbred: 现在 @Spotify 的每周发现对我已经了解到如果它现在求婚，我也会说同意的地步了。</p></blockquote>\n<p>自「每周发现」在 2015 年第一次上线以来，我就迫切想知道它是怎么运作的（而且由于我是 Spotify 公司的迷妹，我喜欢假装在那里工作并研究他们的产品）。 经过三周的疯狂Google，我终于满怀感恩地获取了一些幕后的知识。</p>\n<p>所以 Spotify 到底是如何成功做到给每人每周挑选 30 首歌曲的？我们先来仔细看下其它的音乐服务是如何做音乐推荐，以及 Spotify 是如何更胜一筹的。</p>\n<p> </p>\n<h3>在线音乐甄选服务简史</h3>\n<p><span style=\"font-weight: normal;\"><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3vdopfj20iu07n756.jpg\" width=\"678\" height=\"275\"></span></p>\n<p><span style=\"font-weight: normal;\">早在千禧年之初，Songza 就开始使用手动甄选为用户提供歌单。手动甄选的意思就是所谓的音乐专家或者其他编辑会手动挑选一些他们自己认为不错的音乐做成歌单，然后听众可以直接拿来听。（稍后，Beats 音乐也采取了同样的策略）。手动甄选效果尚可，但是由于这种方法只是纯手工挑选，方式方法也比较简单，它并不能照顾到每个听众音乐品味的微妙差异。</span></p>\n<p>跟 Songza 一样， Pandora 也是音乐甄选服务领域的早期玩家之一。它使用了一个略为更高级的方法来代替给歌曲属性手工打标签。即大众在听音乐的时候，对每首歌曲挑选一些描述性的词语来作为标签。进而，Pandora 的程序可以直接过滤特定的标签来生成包含相似歌曲的歌单。</p>\n<p>差不多同一时间，一个隶属于麻省理工学院媒体实验室的名叫 The Echo Nest 的音乐信息机构，采用了一个完全不同的高级策略来定制音乐。The Echo Nest 使用算法来分析音频和音乐的文本内容，以完成音乐识别，个性化推荐，歌单创建和分析等。</p>\n<p>最后，是 Last.fm 另辟蹊径，采取了另一个沿用至今的策略。那就是利用协同过滤来识别用户可能喜欢的音乐。稍后本文会展开讨论更多这方面的内容。</p>\n<p>所以说既然其他的音乐甄选服务都实现了推荐功能，Spotify 究竟是怎么操作自己的神奇引擎，来实现甩出竞争对手几条街的用户品味默契度的呢？</p>\n<p> </p>\n<h3>Spotify 的三种推荐模型</h3>\n<p>事实上 Spotify 并没有使用什么单一的革命性推荐模型，而是<strong>混合了一些其他公司使用的最好的策略来创建他们自己独一无二的强大发现引擎。</strong></p>\n<p>Spotify 使用三种主要的推荐模型来创建每周发现：</p>\n<ol>\n<li><strong>协同过滤模型</strong>（即 Last.fm 最早使用的那些模型）。工作原理为分析你和<strong>其他</strong>用户的行为。</li>\n<li><strong>自然语言处理（NLP）</strong>模型 。工作原理为分析文本。</li>\n<li><strong>音频</strong>模型。工作原理为分析<strong>原始音频声道本身</strong>。</li>\n</ol>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3vwrx4j20mv0dgjw0.jpg\" width=\"690\" height=\"406\"></p>\n<p>我们来具体看下这些推荐模型是怎么工作的！</p>\n<h3>推荐模型之一：协同过滤</h3>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l3wmkvhj218g094tah.jpg\" width=\"445\" height=\"91\"></p>\n<p>首先介绍下背景：当很多人听到协同过滤这几个词的时候，他们会立刻联想到 <strong>Netflix</strong>，因为它是第一个利用协同过滤来实现推荐模型的公司之一。其做法主要是使用用户提交的电影星级来计算推荐那些电影给其他<strong>类似的</strong>用户。</p>\n<p>自 <strong>Netflix </strong>将其成功应用以来，协同过滤开始快速流传开来。现在无论是谁想实现一个推荐模型的话，一般都会拿它作为初次尝试。</p>\n<p>与<strong>Netflix</strong>不同的是，Spotify 并没有用户对他们音乐的星级评价数据。Spotify 所用的数据是<strong>隐形反馈</strong>的，具体来说就是我们在线听歌的<strong>歌曲次数</strong>，以及其他额外信息，诸如用户是否保存歌曲到个人歌单，或者听完歌曲后是否接着访问艺术家主页等。</p>\n<p>但什么是协同过滤，到底它是如何工作的呢？下面用一段简短对话来做一个大致的介绍。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fq7l3x7gfyj20go0cytht.jpg\"></p>\n<p>啥情况? 原来这俩人里面每人都有自己的一些歌曲偏好 – 左边的人喜欢歌曲 P, Q, R 和 S; 右边的人喜欢 Q, R, S 和 T。</p>\n<p>协同过滤系统进而利用这些数据得出结论，</p>\n<blockquote><p><em>“</em><em>嗯。既然你俩都喜欢相同的歌曲 – Q</em><em>，R </em><em>和 S – </em><em>那么你们可能是类似的用户。所以你们应该会喜欢另一个人听过但是你还没有听过的歌曲。”</em></p></blockquote>\n<p>系统然后建议右边的人去体验下歌曲 P，以及左边的人去体验下歌曲 T。听起来够简单吧？</p>\n<p>但是 Spotify 具体是怎么具体应用这个概念，来计算<strong>基于百万级</strong>的用户偏好从而得出<strong>数以百万计</strong>的用户歌曲推荐呢？</p>\n<p> </p>\n<h3>…矩阵运算，用 Python 库即可实现</h3>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/7cc829d3gy1fq7l3xy4boj20ay071t9u.jpg\" width=\"394\" height=\"253\"></p>\n<p>现实中，此处提及的矩阵是极其庞大的。<strong>每行都代表了</strong><strong> Spotify </strong><strong>的一亿四千万用户中的一员</strong>（如果你也用 Spotify，那么你也是这个矩阵中的一行），而每一列则代表了 Spotify 数据库中<strong>三亿首歌曲</strong>中的一首。</p>\n<p>然后，Python 库就开始跑这个漫长而复杂的矩阵分解公式：</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3yp06ej20oy01v3zg.jpg\" width=\"690\" height=\"51\"></p>\n<p>计算完成后，系统会生成两种类型的向量，在此分别命名为 X 和 Y。X 为用户向量，代表单个用户的音乐品味。Y 则为歌曲向量，代表单支歌曲的特征。</p>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l3zb0mxj20mn0a8di9.jpg\" width=\"690\" height=\"312\"></p>\n<p>现在我们得到了一亿四千万个用户向量，每人一个，还有三亿歌曲向量。这些向量的具体内容只是一些单独拎出来自身并无意义的数字，但是在后面进行比较时会非常有用。</p>\n<p>为了找到那些跟我相似品味的用户，协同过滤系统会拿我的向量跟其他用户的向量作比较，最终会找到那些跟我最相似的用户。对于 Y 向量，也是同样的流程 – 你可以拿一首歌的向量与其他的歌曲向量做比较，进而找出哪些歌曲是跟你现在正在看的歌曲最相似。</p>\n<p>协同过滤确实效果不错，但是 Spotify 深知再添加另外一个引擎的话效果会更出色。这就到了自然语言处理出场的时候了。</p>\n<p> </p>\n<h3>推荐模型之二：自然语言处理</h3>\n<p>Spotify 采用的第二个推荐模型就是<strong>自然语言处理</strong>。这些模型的源数据，正如名字所示，就是一些普通的<strong>语言文字</strong> – 例如歌曲的元数据，新闻文章，博客，和互联网上的其它文本等。</p>\n<p><img class=\"alignnone\" src=\"http://wx4.sinaimg.cn/mw690/7cc829d3gy1fq7l40111lj20dr09h41u.jpg\" width=\"495\" height=\"341\"></p>\n<p> </p>\n<p>自然语言处理 – 计算机理解人类语言的能力 – 本身就是一个巨大的领域，通常通过情感分析应用编程接口（API）来进行操作处理。</p>\n<p>自然语言处理背后的具体原理超出了本文的讨论范畴，但是在此本文可以提供一些粗略的描述：Spotify 会在网上不断爬取博客帖子以及其它音乐相关的文本，并找出人们对特定的艺术家和歌曲的评论 – 比如说人们对这些歌曲经常使用哪些形容词和语言, 以及哪些其他艺术家和歌曲也会和它们放在一起讨论。</p>\n<p>虽然我不知道 Spotify 如何处理他们抓取的数据，但是我可以介绍下 The Echo Nest 是如何使用它们的。他们会把数据分类成“文化向量”和“最佳评语集”。每个艺术家和歌曲都有数以千计的每日更新的最佳评语集。每个评语都有一个相关的权重，来表示其描述的重要性（简单说就是某人可能会用该评语描述某个音乐的概率）。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l40o7dnj20jm07qaej.jpg\" width=\"690\" height=\"272\"></p>\n<p style=\"text-align: center;\">[ “Cultural vectors”, or “top terms”, as used by the Echo Nest. Table from Brian Whitman]</p>\n<p>然后，与协同过滤类似，自然语言处理模型用这些评语和权重来创建一个歌曲的表达向量，可以用来确定两首音乐是否相似。很酷吧？</p>\n<p> </p>\n<h3>推荐模型之三：原始音频模型</h3>\n<p><img class=\"alignnone\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l41ibqgj20pn09btap.jpg\" width=\"690\" height=\"250\"></p>\n<p>首先，你可能会问这个问题：</p>\n<blockquote><p><em>但是，Sophia</em><em>，我们已经从前两种模型中获取了这么多数据！为什么还要继续分析音频本身呢？</em></p></blockquote>\n<p>额，首先要说的是，引入第三个模型会进一步提高这个已经很优秀的推荐服务的准确性。但实际上，采用这个模型还有另外一个次要目的：<strong>原始音频模型会把新歌考虑进来。</strong></p>\n<p>比如说，你的创作歌手朋友在 Spotify 上刚放上了一首新歌。可能它只有 50 次听歌记录，所以很少能有其他听众来一起协同过滤它。与此同时，它也在网上也没有留下多少痕迹，所以自然语言处理模型也不会注意到它。幸运的是，原始音频模型并不区分新歌曲和热门歌曲。所以有了它的帮忙，你朋友的歌曲也可以和流行歌曲一道出现在每周发现的歌单里面。</p>\n<p>好了，到了“如何”的部分了。我们如何才能分析这些看起来如此抽象的<strong>原始音频数据</strong>呢？</p>\n<p>…用<strong>卷积神经网络！</strong></p>\n<p>卷积神经网络同样也是支撑面部识别的技术。只不过在 Spotify 的案例中，他们被稍作修改以基于音频数据处理而不是像素点。下面是一个神经网络架构的例子：</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fq7l426503j20sg0gl423.jpg\" width=\"690\" height=\"402\"></p>\n<p style=\"text-align: center;\">[<em>Image credit: Sander Dieleman</em>]</p>\n<p>这个特定的神经网络有四个<strong>卷积层</strong>，具体为图中左侧的宽柱，和右边的稍微窄些的三根柱。输入是音频帧的时频表示，进而连接起来形成频谱图。</p>\n<p>音频帧会穿过这些卷积层，经过最后一个卷积层，你可以看到一个“全局临时池”层。该层在整个时间轴上汇集数据，并有效计算和统计歌曲时长内的学习特征。</p>\n<p>处理完之后，神经网络会得出其对歌曲的理解，包括估计的<strong>时间签名，音调，调式，拍子及音量</strong>等特征。下面就是 Draft Punk 的 “Around the World” 30 秒片段的数据图。</p>\n<p><img class=\"alignnone aligncenter\" src=\"http://wx1.sinaimg.cn/mw690/7cc829d3gy1fq7l43abdwj20fq0hkdk4.jpg\" width=\"566\" height=\"632\"></p>\n<p style=\"text-align: center;\">[Image Credit: <a href=\"http://docs.echonest.com.s3-website-us-east-1.amazonaws.com/_static/AnalyzeDocumentation.pdf\">Tristan Jehan &amp; David DesRoches (The Echo Nest)</a>]</p>\n<p>最终，对这些对歌曲关键特征的理解可以让 Spotify 来决定歌曲之间的相似度，以及根据用户听歌历史来判断哪些用户可能会喜欢它们。</p>\n<p>这些基本涵盖了为每周发现提供支持的推荐作业流程所依赖的三种主要模型。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fq7l4426xrj20q70ec7ad.jpg\"></p>\n<p style=\"text-align: center;\">[ Cassandra instances]</p>\n<p>当然了，这些推荐模型也和 Spotify 其它更大的生态系统连接在一起，其中包括利用海量的数据存储以及<strong>非常多</strong>的 Hadoop 集群来做推荐服务的扩展，使得引擎得以计算巨型矩阵，无穷无尽的互联网音乐文章和大量的音频文件。</p>\n<p>我希望本文可以对你有所启发，并且像当时它对我一样能够激起你的好奇。怀着对幕后的机器学习技术的了解和感激之情，现在我将通过我自己的每周发现来寻找我喜欢的音乐。</p>\n<p>文章结束。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113821\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113821votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113821\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 4 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317\">XiaofengYue_DXY</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2017/05/301e4d82055cbc30afc5d8e4ca14ea75.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            Backend Dev.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/1789912317\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/1789912317/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/1789912317/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 10</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/1789912317\"><i class=\"fa fa-weibo\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/yuexiaofeng\"><i class=\"fa fa-github\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/3b7e7bed23407111b13cf9f458c1f31bf494ba05.jpg"}
{"url_object_id": "a0e861fe08356d9eabe96fbd21c0753d", "title": ["使用 Graylog 和 Prometheus 监视 Kubernetes 集群"], "url": "http://blog.jobbole.com/113875/", "create_date": "2018/04/13", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png"], "praise_nums": "1", "comment_nums": 2, "fav_nums": 2, "tags": "IT技术,集群", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://insights.ubuntu.com/2018/01/16/monitor-your-kubernetes-cluster/\">Kevin Monroe</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9534-1.html\">Linux中国/qhwdw</a>   </div><p>这篇文章最初发表在 <a href=\"https://medium.com/@kwmonroe/monitor-your-kubernetes-cluster-a856d2603ec3\">Kevin Monroe 的博客</a> 上。</p>\n<p>监视日志和指标状态是集群管理员的重点工作。它的好处很明显：指标能帮你设置一个合理的性能目标，而日志分析可以发现影响你工作负载的问题。然而，困难的是如何找到一个与大量运行的应用程序一起工作的监视解决方案。</p>\n<p>在本文中，我将使用 <a href=\"https://www.graylog.org/\">Graylog</a> （用于日志）和 <a href=\"https://prometheus.io/\">Prometheus</a> （用于指标）去打造一个 Kubernetes 集群的监视解决方案。当然了，这不仅是将三个东西连接起来那么简单，实现上，最终结果看起来应该如题图所示：</p>\n<p><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201804/10/182842hu1toaq9hhh9uiou.png\" alt=\"\"></p>\n<p>正如你所了解的，Kubernetes 不是一件东西 —— 它由主控节点、工作节点、网络连接、配置管理等等组成。同样，Graylog 是一个配角（apache2、mongodb、等等），Prometheus 也一样（telegraf、grafana 等等）。在部署中连接这些点看起来似乎有些让人恐惧，但是使用合适的工具将不会那么困难。</p>\n<p>我将使用 <a href=\"https://conjure-up.io/\">conjure-up</a> 和 <a href=\"https://jujucharms.com/canonical-kubernetes\">Canonical 版本的 Kubernetes</a> (CDK) 去探索 Kubernetes。我发现 <code>conjure-up</code> 接口对部署大型软件很有帮助，但是我知道一些人可能不喜欢 GUI、TUI 以及其它用户界面。对于这些人，我将用命令行再去部署一遍。</p>\n<p>在开始之前需要注意的一点是，Graylog 和 Prometheus 是部署在 Kubernetes 外侧而不是集群上。像 Kubernetes 仪表盘和 Heapster 是运行的集群的非常好的信息来源，但是我的目标是为日志/指标提供一个分析机制，而不管集群运行与否。</p>\n<h3 id=\"toc_1\">开始探索</h3>\n<p>如果你的系统上没有 <code>conjure-up</code>，首先要做的第一件事情是，请先安装它，在 Linux 上，这很简单：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eecff299599194\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install conjure-up --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eecff299599194-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eecff299599194-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eecff299599194-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eecff299599194-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>对于 macOS 用户也提供了 brew 包：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed08361967457\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install conjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed08361967457-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed08361967457-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed08361967457-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed08361967457-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>你需要最新的 2.5.2 版，它的好处是添加了 CDK spell，因此，如果你的系统上已经安装了旧的版本，请使用 <code>sudo snap refresh conjure-up</code> 或者 <code>brew update &amp;&amp; brew upgrade conjure-up</code> 去更新它。</p>\n<p>安装完成后，运行它：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed0c983681600\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nconjure-up\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed0c983681600-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed0c983681600-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed0c983681600-1\"><span class=\"crayon-v\">conjure</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">up</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed0c983681600-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/0a84a2dc6e19e9e92a195dbe6c5eb6b1.png\" alt=\"\"></p>\n<p>你将发现有一个 spell 列表。选择 CDK 然后按下回车。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/5c2e2762a0bb2a81dd5939d4a657c69d.png\" alt=\"\"></p>\n<p>这个时候，你将看到 CDK spell 可用的附加组件。我们感兴趣的是 Graylog 和 Prometheus，因此选择这两个，然后点击 “Continue”。</p>\n<p>它将引导你选择各种云，以决定你的集群部署的地方。之后，你将看到一些部署的后续步骤，接下来是回顾屏幕，让你再次确认部署内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/e8a7154940f22e1ee5c1035698a2fab3.png\" alt=\"\"></p>\n<p>除了典型的 K8s 相关的应用程序（etcd、flannel、load-balancer、master 以及 workers）之外，你将看到我们选择的日志和指标相关的额外应用程序。</p>\n<p>Graylog 栈包含如下：</p>\n<ul>\n<li>apache2：graylog web 界面的反向代理</li>\n<li>elasticsearch：日志使用的文档数据库</li>\n<li>filebeat：从 K8s master/workers 转发日志到 graylog</li>\n<li>graylog：为日志收集器提供一个 api，以及提供一个日志分析界面</li>\n<li>mongodb：保存 graylog 元数据的数据库</li>\n</ul>\n<p>Prometheus 栈包含如下：</p>\n<ul>\n<li>grafana：指标相关的仪表板的 web 界面</li>\n<li>prometheus：指标收集器以及时序数据库</li>\n<li>telegraf：发送主机的指标到 prometheus 中</li>\n</ul>\n<p>你可以在回顾屏幕上微调部署，但是默认组件是必选 的。点击 “Deploy all Remaining Applications” 继续。</p>\n<p>部署工作将花费一些时间，它将部署你的机器和配置你的云。完成后，<code>conjure-up</code> 将展示一个摘要屏幕，它包含一些链接，你可以用你的终端去浏览各种感兴趣的内容：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/77927d348a0c12ef4855bd1116947ef5.png\" alt=\"\"></p>\n<h4 id=\"toc_2\">浏览日志</h4>\n<p>现在，Graylog 已经部署和配置完成，我们可以看一下采集到的一些数据。默认情况下，filebeat 应用程序将从 Kubernetes 的 master 和 worker 中转发系统日志（ <code>/var/log/*.log</code> ）和容器日志（<code>/var/log/containers/*.log</code>）到 graylog 中。</p>\n<p>记住如下的 apache2 的地址和 graylog 的 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed11591717348\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml apache2/0 | grep public-address\r\n public-address: &lt;your-apache2-ip&gt;\r\njuju run-action --wait graylog/0 show-admin-password\r\n admin-password: &lt;your-graylog-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed11591717348-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed11591717348-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed11591717348-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed11591717348-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed11591717348-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed11591717348-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed11591717348-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">show</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed11591717348-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-apache2-ip&gt;</code> ，然后以管理员用户名（admin）和密码（&lt;your-graylog-password&gt;）登入。</p>\n<p><strong>注意：</strong> 如果这个界面不可用，请等待大约 5 分钟时间，以便于配置的反向代理生效。</p>\n<p>登入后，顶部的 “Sources” 选项卡可以看到从 K8s 的 master 和 workers 中收集日志的概述：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/8e0dc56257a324ee2f0f33426b3c105e.png\" alt=\"\"></p>\n<p>通过点击 “System / Inputs” 选项卡深入这些日志，选择 “Show received messages” 查看 filebeat 的输入：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/6b187118ff50bc41d040ef954b607ffe.png\" alt=\"\"></p>\n<p>在这里，你可以应用各种过滤或者设置 Graylog 仪表板去帮助识别大多数比较重要的事件。查看 <a href=\"http://docs.graylog.org/en/2.3/pages/dashboards.html\">Graylog Dashboard</a> 文档，可以了解如何定制你的视图的详细资料。</p>\n<h4 id=\"toc_3\">浏览指标</h4>\n<p>我们的部署通过 grafana 仪表板提供了两种类型的指标：系统指标，包括像 K8s master 和 worker 的 CPU /内存/磁盘使用情况，以及集群指标，包括像从 K8s cAdvisor 端点上收集的容器级指标。</p>\n<p>记住如下的 grafana 的地址和 admin 密码：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed16175158537\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju status --format yaml grafana/0 | grep public-address\r\n public-address: &lt;your-grafana-ip&gt;\r\njuju run-action --wait grafana/0 get-admin-password\r\n password: &lt;your-grafana-password&gt;</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed16175158537-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed16175158537-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed16175158537-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed16175158537-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed16175158537-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">status</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">format </span><span class=\"crayon-e\">yaml </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">|</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">grep </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">address</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed16175158537-2\"><span class=\"crayon-e\"> </span><span class=\"crayon-m\">public</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">address</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed16175158537-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">get</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">admin</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">password</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed16175158537-4\"><span class=\"crayon-e\"> </span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">your</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">password</span><span class=\"crayon-o\">&gt;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0016 seconds] -->\r\n<p>在浏览器中输入 <code>http://&lt;your-grafana-ip&gt;:3000</code>，输入管理员用户（admin）和密码（&lt;your-grafana-password&gt;）登入。成功登入后，点击 “Home” 下拉框，选取 “Kubernetes Metrics (via Prometheus)” 去查看集群指标仪表板：</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/76a0a9d93a75c76c8033b51957615741.png\" alt=\"\"></p>\n<p>我们也可以通过下拉框切换到 “Node Metrics (via Telegraf) ” 去查看 K8s 主机的系统指标。</p>\n<p><img src=\"http://jbcdn2.b0.upaiyun.com/2018/04/a708ae229aeffef775184db190b97c95.png\" alt=\"\"></p>\n<h3 id=\"toc_4\">另一种方法</h3>\n<p>正如在文章开始的介绍中提到的，我喜欢用 <code>conjure-up</code> 的向导去完成像 Kubernetes 这种复杂软件的部署。现在，我们来看一下 <code>conjure-up</code> 的另一种方法，你可能希望去看到实现相同结果的一些命令行的方法。还有其它的可能已经部署了前面的 CDK，并想去扩展使用上述的 Graylog/Prometheus 组件。不管什么原因你既然看到这了，既来之则安之，继续向下看吧。</p>\n<p>支持 <code>conjure-up</code> 的工具是 <a href=\"https://jujucharms.com/\">Juju</a>。CDK spell 所做的一切，都可以使用 <code>juju</code> 命令行来完成。我们来看一下，如何一步步完成这些工作。</p>\n<h4 id=\"toc_5\">从 Scratch 中启动</h4>\n<p>如果你使用的是 Linux，安装 Juju 很简单，命令如下：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed1a377224326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsudo snap install juju --classic\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed1a377224326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed1a377224326-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed1a377224326-1\"><span class=\"crayon-e\">sudo </span><span class=\"crayon-e\">snap </span><span class=\"crayon-e\">install </span><span class=\"crayon-v\">juju</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-i\">classic</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed1a377224326-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>对于 macOS，Juju 也可以从 brew 中安装：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed1d807125229\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nbrew install juju\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed1d807125229-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed1d807125229-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed1d807125229-1\"><span class=\"crayon-e\">brew </span><span class=\"crayon-e\">install </span><span class=\"crayon-i\">juju</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed1d807125229-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>现在为你选择的云配置一个控制器。你或许会被提示请求一个凭据（用户名密码）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed20023012631\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju bootstrap\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed20023012631-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed20023012631-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed20023012631-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-i\">bootstrap</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed20023012631-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>我们接下来需要基于 CDK 捆绑部署：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed23824492956\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\njuju deploy canonical-kubernetes\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed23824492956-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed23824492956-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed23824492956-1\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">canonical</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">kubernetes</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed23824492956-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_6\">从 CDK 开始</h4>\n<p>使用我们部署的 Kubernetes 集群，我们需要去添加 Graylog 和 Prometheus 所需要的全部应用程序：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed26317107056\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy graylog-related applications\r\njuju deploy xenial/apache2\r\njuju deploy xenial/elasticsearch\r\njuju deploy xenial/filebeat\r\njuju deploy xenial/graylog\r\njuju deploy xenial/mongodb\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed26317107056-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed26317107056-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed26317107056-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed26317107056-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed26317107056-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed26317107056-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed26317107056-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed26317107056-1\"><span class=\"crayon-p\">## deploy graylog-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed26317107056-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed26317107056-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">elasticsearch</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed26317107056-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">filebeat</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed26317107056-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">graylog</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed26317107056-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">mongodb</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed26317107056-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed2a417970182\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## deploy prometheus-related applications\r\njuju deploy xenial/grafana\r\njuju deploy xenial/prometheus\r\njuju deploy xenial/telegraf\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2a417970182-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed2a417970182-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2a417970182-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed2a417970182-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2a417970182-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2a417970182-1\"><span class=\"crayon-p\">## deploy prometheus-related applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed2a417970182-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">grafana</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2a417970182-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-e\">prometheus</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed2a417970182-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">deploy </span><span class=\"crayon-v\">xenial</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">telegraf</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2a417970182-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>现在软件已经部署完毕，将它们连接到一起，以便于它们之间可以相互通讯：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed2d533726020\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate graylog applications\r\njuju relate apache2:reverseproxy graylog:website\r\njuju relate graylog:elasticsearch elasticsearch:client\r\njuju relate graylog:mongodb mongodb:database\r\njuju relate filebeat:beats-host kubernetes-master:juju-info\r\njuju relate filebeat:beats-host kubernetes-worker:jujuu-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2d533726020-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed2d533726020-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2d533726020-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed2d533726020-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2d533726020-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed2d533726020-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed2d533726020-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2d533726020-1\"><span class=\"crayon-p\">## relate graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed2d533726020-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">apache2</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">reverseproxy </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">website</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2d533726020-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">elasticsearch</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">client</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed2d533726020-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">mongodb </span><span class=\"crayon-v\">mongodb</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">database</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2d533726020-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed2d533726020-6\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">filebeat</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">beats</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">host </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">jujuu</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed2d533726020-7\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed30779978725\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## relate prometheus applications\r\njuju relate prometheus:grafana-source grafana:grafana-source\r\njuju relate telegraf:prometheus-client prometheus:target\r\njuju relate kubernetes-master:juju-info telegraf:juju-info\r\njuju relate kubernetes-worker:juju-info telegraf:juju-info\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed30779978725-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed30779978725-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed30779978725-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed30779978725-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed30779978725-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed30779978725-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed30779978725-1\"><span class=\"crayon-p\">## relate prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed30779978725-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">source</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed30779978725-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">client </span><span class=\"crayon-v\">prometheus</span><span class=\"crayon-o\">:</span><span class=\"crayon-e\">target</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed30779978725-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">master</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed30779978725-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">relate </span><span class=\"crayon-v\">kubernetes</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">worker</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">info </span><span class=\"crayon-v\">telegraf</span><span class=\"crayon-o\">:</span><span class=\"crayon-v\">juju</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">info</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed30779978725-6\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0015 seconds] -->\r\n<p>这个时候，所有的应用程序已经可以相互之间进行通讯了，但是我们还需要多做一点配置（比如，配置 apache2 反向代理、告诉 prometheus 如何从 K8s 中取数、导入到 grafana 仪表板等等）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed34928541056\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure graylog applications\r\njuju config apache2 enable_modules=\"headers proxy_html proxy_http\"\r\njuju config apache2 vhost_http_template=\"$(base64 &lt;vhost-tmpl&gt;)\"\r\njuju config elasticsearch firewall_enabled=\"false\"\r\njuju config filebeat \\\r\n logpath=\"/var/log/*.log /var/log/containers/*.log\"\r\njuju config filebeat logstash_hosts=&lt;graylog-ip&gt;\":5044\"\r\njuju config graylog elasticsearch_cluster_name=\"&lt;es-cluster&gt;\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed34928541056-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed34928541056-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed34928541056-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed34928541056-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed34928541056-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed34928541056-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed34928541056-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed34928541056-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed34928541056-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed34928541056-1\"><span class=\"crayon-p\">## configure graylog applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed34928541056-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">enable_modules</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"headers proxy_html proxy_http\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed34928541056-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">apache2 </span><span class=\"crayon-v\">vhost_http_template</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;vhost-tmpl&gt;)\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed34928541056-4\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">elasticsearch </span><span class=\"crayon-v\">firewall_enabled</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"false\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed34928541056-5\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-i\">filebeat</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed34928541056-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">logpath</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"/var/log/*.log /var/log/containers/*.log\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed34928541056-7\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">filebeat </span><span class=\"crayon-v\">logstash_hosts</span><span class=\"crayon-o\">=</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">graylog</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">ip</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-s\">\":5044\"</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed34928541056-8\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">graylog </span><span class=\"crayon-v\">elasticsearch_cluster_name</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;es-cluster&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed34928541056-9\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed37027520647\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## configure prometheus applications\r\njuju config prometheus scrape-jobs=\"&lt;scraper-yaml&gt;\"\r\njuju run-action --wait grafana/0 import-dashboard \\\r\n dashboard=\"$(base64 &lt;dashboard-json&gt;)\"\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed37027520647-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed37027520647-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed37027520647-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed37027520647-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed37027520647-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed37027520647-1\"><span class=\"crayon-p\">## configure prometheus applications</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed37027520647-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">config </span><span class=\"crayon-e\">prometheus </span><span class=\"crayon-v\">scrape</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">jobs</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"&lt;scraper-yaml&gt;\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed37027520647-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-v\">run</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">action</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-e\">wait </span><span class=\"crayon-v\">grafana</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">import</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">dashboard</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">\\</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed37027520647-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-v\">dashboard</span><span class=\"crayon-o\">=</span><span class=\"crayon-s\">\"$(base64 &lt;dashboard-json&gt;)\"</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed37027520647-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>以上的步骤需要根据你的部署来指定一些值。你可以用与 <code>conjure-up</code> 相同的方法得到这些：</p>\n<ul>\n<li><code>&lt;vhost-tmpl&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/graylog/steps/01_install-graylog/graylog-vhost.tmpl\">模板</a></li>\n<li><code>&lt;graylog-ip&gt;</code>： <code>juju run --unit graylog/0 'unit-get private-address'</code></li>\n<li><code>&lt;es-cluster&gt;</code>： <code>juju config elasticsearch cluster-name</code></li>\n<li><code>&lt;scraper-yaml&gt;</code>： 从 github 获取我们的示例 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/prometheus-scrape-k8s.yaml\">scraper</a> ；<code>[K8S_PASSWORD][20]</code> 和 <code>[K8S_API_ENDPOINT][21]</code> <a href=\"https://github.com/conjure-up/spells/blob/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/after-deploy#L25\">substitute</a> 的正确值</li>\n<li><code>&lt;dashboard-json&gt;</code>： 从 github 获取我们的 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-telegraf.json\">主机</a> 和 <a href=\"https://raw.githubusercontent.com/conjure-up/spells/master/canonical-kubernetes/addons/prometheus/steps/01_install-prometheus/grafana-k8s.json\">k8s</a> 仪表板</li>\n</ul>\n<p>最后，发布 apache2 和 grafana 应用程序，以便于可以通过它们的 web 界面访问：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d344eed3b207100863\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n## expose relevant endpoints\r\njuju expose apache2\r\njuju expose grafana\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed3b207100863-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed3b207100863-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d344eed3b207100863-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d344eed3b207100863-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d344eed3b207100863-1\"><span class=\"crayon-p\">## expose relevant endpoints</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed3b207100863-2\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-e\">apache2</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d344eed3b207100863-3\"><span class=\"crayon-e\">juju </span><span class=\"crayon-e\">expose </span><span class=\"crayon-i\">grafana</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d344eed3b207100863-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p>现在我们已经完成了所有的部署、配置、和发布工作，你可以使用与上面的<strong>浏览日志</strong>和<strong>浏览指标</strong>部分相同的方法去查看它们。</p>\n<h3 id=\"toc_7\">总结</h3>\n<p>我的目标是向你展示如何去部署一个 Kubernetes 集群，很方便地去监视它的日志和指标。无论你是喜欢向导的方式还是命令行的方式，我希望你清楚地看到部署一个监视系统并不复杂。关键是要搞清楚所有部分是如何工作的，并将它们连接到一起工作，通过断开/修复/重复的方式，直到它们每一个都能正常工作。</p>\n<p>这里有一些像 conjure-up 和 Juju 一样非常好的工具。充分发挥这个生态系统贡献者的专长让管理大型软件变得更容易。从一套可靠的应用程序开始，按需定制，然后投入到工作中！</p>\n<p>大胆去尝试吧，然后告诉我你用的如何。你可以在 Freenode IRC 的 <strong>#conjure-up</strong> 和 <strong>#juju</strong> 中找到像我这样的爱好者。感谢阅读！</p>\n<h3 id=\"toc_8\">关于作者</h3>\n<p>Kevin 在 2014 年加入 Canonical 公司，他专注于复杂软件建模。他在 Juju 大型软件团队中找到了自己的位置，他的任务是将大数据和机器学习应用程序转化成可重复的（可靠的）解决方案。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113875\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113875votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113875\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8163b569212cff9b9756ab2724d7a551f380e188.jpg"}
{"url_object_id": "942003ecbc643f51f276927739872b18", "title": ["计算机语言的巨变"], "url": "http://blog.jobbole.com/113828/", "create_date": "2018/04/08", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201804/01/123903dpmgspk0trmlpkwl.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 5, "tags": "IT技术,语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"http://esr.ibiblio.org/?p=7724\">Eric Raymond</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9503-1.html\">Linux中国/name1e5s</a>   </div><p>我的上一篇博文《<a href=\"http://blog.jobbole.com/113538/\">与 C 语言长别离</a>》引来了我的老朋友，一位 C++ 专家的评论。在评论里，他推荐把 C++ 作为 C 的替代品。这是不可能发生的，如果 C++ 代替 C 是趋势的话，那么 Go 和 Rust 也就不会出现了。</p>\n<p class=\"article_img\"><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201804/01/123903dpmgspk0trmlpkwl.jpg\" alt=\"\"></p>\n<p>但是我不能只给我的读者一个光秃秃的看法（LCTT 译注：此处是双关语）。所以，在这篇文章中，我来讲述一下为什么我不再碰 C++ 的故事。这是关于计算机语言设计经济学专题文章的起始点。这篇文章会讨论为什么一些真心不好的决策会被做出来，然后进入语言的基础设计之中，以及我们该如何修正这些问题。</p>\n<p>在这篇文章中，我会一点一点的指出人们（当然也包括我）自从 20 世纪 80 年代以来就存在的关于未来的编程语言的预见失误。直到最近，我们才找到了证明我们错了的证据。</p>\n<p>我记得我第一次学习 C++ 是因为我需要使用 GNU eqn 输出 MathXML，而 eqn 是使用 C++ 写的。那个项目不错。在那之后，21 世纪初，我在韦诺之战Battle For Wesnoth那边当了多年的资深开发人生，并且与 C++ 相处甚欢。</p>\n<p>在那之后啊，有一天我们发现一个不小心被我们授予提交权限的人已经把游戏的 AI 核心搞崩掉了。显然，在团队中只有我是不那么害怕查看代码的。最终，我把一切都恢复正常了 —— 我折腾了整整两周。再那之后，我就发誓我再也不靠近 C++ 了。</p>\n<p>在那次经历过后，我发现这个语言的问题就是它在尝试使得本来就复杂的东西更加复杂，来粗陋补上因为基础概念的缺失造成的漏洞。对于裸指针这样东西，它说“别这样做”，这没有问题。对于小规模的个人项目（比如我的魔改版 eqn），遵守这些规定没有问题。</p>\n<p>但是对于大型项目，或者开发者水平参差不齐的多人项目（这是我经常要处理的情况）就不能这样。随着时间的推移以及代码行数的增加，有的人就会捅篓子。当别人指出有 BUG 时，因为诸如 STL 之类的东西给你增加了一层复杂度，你处理这种问题所需要的精力就比处理同等规模的 C 语言的问题就要难上很多。我在韦诺之战时，我就知道了，处理这种问题真的相当棘手。</p>\n<p>我给 Stell Heller（我的老朋友，C++ 的支持者）写代码时不会发生的问题在我与非 Heller 们合作时就被放大了，我和他们合作的结局可能就是我得给他们擦屁股。所以我就不用 C++ ，我觉得不值得为了其花时间。 C 是有缺陷的，但是 C 有 C++ 没有的优点 —— 如果你能在脑内模拟出硬件，那么你就能很简单的看出程序是怎么运行的。如果 C++ 真的能解决 C 的问题（也就是说，C++ 是类型安全以及内存安全的），那么失去其透明性也是值得的。但是，C++ 并没有这样。</p>\n<p>我们判断 C++ 做的还不够的方法之一是想象一个 C++ 已经搞得不错的世界。在那个世界里，老旧的 C 语言项目会被迁移到 C++ 上来。主流的操作系统内核会是 C++ 写就，而现存的内核实现，比如 Linux 会渐渐升级成那样。在现实世界，这些都没有发生。C++ 不仅没有打消语言设计者设想像 D、Go 以及 Rust 那样的新语言的想法，它甚至都没有取代它的前辈。不改变 C++ 的核心思想，它就没有未来，也因此，C++ 的抽象泄露leaky abstraction也不会消失。</p>\n<p>既然我刚刚提到了 D 语言，那我就说说为什么我不把 D 视为一个够格的 C 语言竞争者的原因吧。尽管它比 Rust 早出现了八年（和 Rust 相比是九年）Walter Bright 早在那时就有了构建那样一个语言的想法。但是在 2001 年，以 Python 和 Perl 为首的语言的出现已经确定了，专有语言能和开源语言抗衡的时代已经过去。官方 D 语言库/运行时和 Tangle 的无谓纷争也打击了其发展。它从未修正这些错误。</p>\n<p>然后就是 Go 语言（我本来想说“以及 Rust”。但是如前文所述，我认为 Rust 还需要几年时间才能有竞争力）。它<em>的确是</em>类型安全以及内存安全的（好吧，是在大多数时候是这样，但是如果你要使用接口的话就不是如此了，但是自找麻烦可不是正常人的做法）。我的一位好友，Mark Atwood，曾指出过 Go 语言是脾气暴躁的老头子因为愤怒而创造出的语言，主要是 <em>C 语言的作者之一</em>（Ken Thompson） 因为 C++ 的混乱臃肿造成的愤怒，我深以为然。</p>\n<p>我能理解 Ken 恼火的原因。这几十年来我就一直认为 C++ 搞错了需要解决的问题。C 语言的后继者有两条路可走。其一就是 C++ 那样，接受 C 的抽象泄漏、裸指针等等，以保证兼容性。然后以此为基础，构建一个最先进的语言。还有一条道路，就是从根源上解决问题 —— <em>修正</em> C语言的抽象泄露。这一来就会破环其兼容性，但是也会杜绝 C/C++ 现有的问题。</p>\n<p>对于第二条道路，第一次严谨的尝试就是 1995 年出现的 Java。Java 搞得不错，但是在语言解释器上构建这门语言使其不适合系统编程。这就在系统编程那留下一个巨大的洞，在 Go 以及 Rust 出现之前的 15 年里，都没有语言来填补这个空白。这也就是我的 GPSD 和 NTPsec 等软件在 2017 年仍然主要用 C 写成的原因，尽管 C 的问题也很多。</p>\n<p>在许多方面这都是很糟糕的情况。尽管由于缺少足够多样化的选择，我们很难认识到 C/C++ 做的不够好的地方。我们都认为在软件里面出现缺陷以及基于安全方面考虑的妥协是理所当然的，而不是想想这其中多少是真的由于语言的设计问题导致的，就像缓存区溢出漏洞一样。</p>\n<p>所以，为什么我们花了这么长时间才开始解决这个问题？从 C 1972 年面世到 Go 2009 年出现，这其中隔了 37 年；Rust 也是在其仅仅一年之前出现。我想根本原因还是经济。</p>\n<p>从最早的计算机语言开始，人们就已经知道，每种语言的设计都体现了程序员时间与机器资源的相对价值的权衡。在机器这端，就是汇编语言，以及之后的 C 语言，这些语言以牺牲开发人员的时间为代价来提高性能。 另一方面，像 Lisp 和（之后的）Python 这样的语言则试图自动处理尽可能多的细节，但这是以牺牲机器性能为代价的。</p>\n<p>广义地说，这两端的语言的最重要的区别就是有没有自动内存管理。这与经验一致，内存管理缺陷是以机器为中心的语言中最常见的一类缺陷，程序员需要手动管理资源。</p>\n<p>当相对价值断言与软件开发在某个特定领域的实际成本动因相匹配时，这个语言就是在经济上可行的。语言设计者通过设计一个适合处理现在或者不远的将来出现的情况的语言，而不是使用现有的语言来解决他们遇到的问题。</p>\n<p>随着时间的推移，时兴的编程语言已经渐渐从需要手动管理内存的语言变为带有自动内存管理以及垃圾回收（GC）机制的语言。这种变化对应了摩尔定律导致的计算机硬件成本的降低，使得程序员的时间与之前相比更加的宝贵。但是，除了程序员的时间以及机器效率的变化之外，至少还有两个维度与这种变化相关。</p>\n<p>其一就是距离底层硬件的距离。底层软件（内核与服务代码）的低效率会被成倍地扩大。因此我们可以发现，以机器为中心的语言向底层推进，而以程序员为中心的语言向着高级发展。因为大多数情况下面向用户的语言仅仅需要以人类的反应速度（0.1 秒）做出回应即可。</p>\n<p>另一个维度就是项目的规模。由于程序员抽象发生的问题的漏洞以及自身的疏忽，任何语言都会有可预期的每千行代码的出错率。这个比率在以机器为中心的语言上很高，而在程序员为中心的带有 GC 的语言里就大大降低。随着项目规模的增大，带有 GC 的语言作为一个防止出错率不堪入目的策略就显得愈发重要起来。</p>\n<p>当我们使用这三种维度来看当今的编程语言的形势 —— C 语言在底层，蓬勃发展的带有 GC 的语言在上层，我们会发现这基本上很合理。但是还有一些看似不合理的是 —— C 语言的应用不合理地广泛。</p>\n<p>我为什么这么说？想想那些经典的 Unix 命令行工具吧。那些小程序通常都可以使用带有完整的 POSIX 支持的脚本语言快速实现出来。重新编码那些程序将使得它们调试、维护和拓展起来都会更加简单。</p>\n<p>但是为什么还是使用 C （或者某些像 eqn 的项目，使用 C++）？因为有转换成本。就算是把相当小、相当简单的程序使用新的语言重写并且确认你已经忠实地保留了所有非错误行为都是相当困难的。笼统地说，在任何一个领域的应用编程或者系统编程在一种语言的权衡过时之后，仍然坚持使用它。</p>\n<p>这就是我和其他预测者犯的大错。 我们认为，降低机器资源成本（增加程序员时间的相对成本）本身就足以取代 C 语言（以及没有 GC 的语言）。 在这个过程中，我们有一部分或者甚至一大部分都是错误的 —— 自 20 世纪 90 年代初以来，脚本语言、Java 以及像 Node.js 这样的东西的兴起显然都是这样兴起的。</p>\n<p>但是，竞争系统编程语言的新浪潮并非如此。 Rust 和 Go 都明确地回应了<em>增加项目规模</em> 这一需求。 脚本语言是先是作为编写小程序的有效途径，并逐渐扩大规模，而 Rust 和 Go 从一开始就定位为减少<em>大型项目</em>中的缺陷率。 比如 Google 的搜索服务和 Facebook 的实时聊天复用。</p>\n<p>我认为这就是对 “为什么不再早点儿” 这个问题的回答。Rust 和 Go 实际上并不算晚，它们相对迅速地回应了一个直到最近才被发现低估的成本动因问题。</p>\n<p>好，说了这么多理论上的问题。按照这些理论我们能预言什么？它告诉我们在 C 之后会出现什么？</p>\n<p>推动 GC 语言发展的趋势还没有扭转，也不要期待其扭转。这是大势所趋。因此：最终我们<em>将</em>拥有具有足够低延迟的 GC 技术，可用于内核和底层固件，这些技术将以语言实现方式被提供。 这些才是真正结束 C 长期统治的语言应有的特性。</p>\n<p>我们能从 Go 语言开发团队的工作文件中发现端倪，他们正朝着这个方向前进 —— 可参见关于并发 GC 的学术研究 —— 从未停止研究。 如果 Go 语言自己没有选择这么做，其他的语言设计师也会这样。 但我认为他们会这么做 —— 谷歌推动他们的项目的能力是显而易见的（我们从 “Android 的发展”就能看出来）。</p>\n<p>在我们拥有那么理想的 GC 之前，我把能替换 C 语言的赌注押在 Go 语言上。因为其 GC 的开销是可以接受的 —— 也就是说不只是应用，甚至是大部分内核外的服务都可以使用。原因很简单： C 的出错率无药可医，转化成本还很高。</p>\n<p>上周我尝试将 C 语言项目转化到 Go 语言上，我发现了两件事。其一就是这活很简单， C 的语言和 Go 对应的很好。还有就是写出的代码相当简单。由于 GC 的存在以及把集合视为首要的数据结构，人们会预期代码减少，但是我意识到我写的代码比我最初期望的减少的更多，比例约为 2:1 —— 和 C 转 Python 类似。</p>\n<p>抱歉呐，Rust 粉们。你们在内核以及底层固件上有着美好的未来，但是你们在别的 C 领域被 Go 压的很惨。没有 GC ，再加上难以从 C 语言转化过来，还有就是 API 的标准部分还是不够完善。（我的 <code>select(2)</code> 又哪去了啊？）。</p>\n<p>对你们来说，唯一的安慰就是，C++ 粉比你们更糟糕 —— 如果这算是安慰的话。至少 Rust 还可以在 Go 顾及不到的 C 领域内大展宏图。C++ 可不能。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113828\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113828votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113828\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/8441f8e55bb24a2a5052ec2c163397dfd0b0cdfb.jpg"}
{"url_object_id": "19e4dca035c34d14347d07439ad43f77", "title": ["计算机如何感知大数据——聚类算法"], "url": "http://blog.jobbole.com/113745/", "create_date": "2018/04/04", "front_image_url": ["http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 2, "tags": "IT技术,图论,大数据,聚类", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://medium.freecodecamp.com/how-machines-make-sense-of-big-data-an-introduction-to-clustering-algorithms-4bd97d4fbaba\">Peter Gleeso</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>看看下面这张图片。这是一个不同形状大小的昆虫的集合。花点时间按照相似程度将它们分成几组。</p>\n<p>这不是什么很有技巧性的问题。 我们从把蜘蛛分到一起开始。</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachr4a3bj20rs0daags.jpg\"></h6>\n<h6 style=\"text-align: center;\">图片来自Google图片搜索，标记以便重用</h6>\n<p>做完了吗？虽然这里没有必要有所谓的正确答案，不过你极有可能将这些虫子分成四组。蜘蛛分成一组，蜗牛一组，蝴蝶和蛾子一族，黄蜂和蜜蜂总共三个一组。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">不算太糟糕，是吧？如果虫子数量是这个的两倍你可能还是会这么分，对吧？如果你有空余的时间——或者对昆虫学的热情——你甚至可能用相同方法对一百年个虫子这样分类。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">然而对一个机器来说，将十个目标分成多个有意义的群组是个不小的任务，多亏了数学中一个令人费解的分支<a href=\"https://en.wikipedia.org/wiki/Bell_number\">组合数学</a>，它告诉我们将十个昆虫分组共有115975种不同的可能。如果对二十个虫子进行分组，将会有<a href=\"https://www.wolframalpha.com/input/?i=bell%27s+number+%2820%29\">超过五十万亿</a>种不同的可能。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\"> 如果对一百个虫子分类——方案数将是<a href=\"https://www.wolframalpha.com/input/?i=particles+in+universe\">宇宙中粒子的数量</a>的很多倍。多少倍呢？通过我的计算，大概是<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+number+of+particles+in+universe\">5*10的35次方倍</a>。事实上，有<a href=\"https://www.wolframalpha.com/input/?i=BellB%5B100%5D+%2F+googol\">四千万亿googol</a>多种方案（<a href=\"https://www.wolframalpha.com/input/?i=googol\">什么是googol?</a>）。仅仅是一百个目标。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">而这些方案几乎都是没有意义的——虽然从这些数量异常庞大的可能的选择中，你可以很快地找到为数不多的对虫子分类的有用的方式。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">我们人类理所当然的可以很快地对大量数据理解并分类。无论是一段文字，或者屏幕上的图像，或是一系列的目标——人类通常可以相当有效地搞清世界给我们的任何数据。</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">鉴于发展人工智能和机器学习的一个关键方面就是让机器迅速理解庞大的输入数据集，那么有什么捷径吗？在这本文中，你将会看到三个聚类算法，机器可以这些算法快速理解大型数据集。这决不是一个详尽的清单——还有很多其他的算法——但这三个算法代表了一个良好的开端！</p>\n<p class=\"section-inner sectionLayout--outsetColumn\">当你想要使用它们的时候，你会得到对于每一个问题的总结，一个总体的功能介绍以及一个更细致的，一步一步实现的例子。我相信在现实中实现对于理解是非常有帮助的。如果你真的<em>很喜欢</em>这些，你会发现最好的学习方式是用笔和纸。加油去吧——没人评判哪种方式更好！</p>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\"><img src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpachstvd8j20m80em762.jpg\"></h6>\n<h6 class=\"section-inner sectionLayout--outsetColumn\" style=\"text-align: center;\">三个整齐的聚类，K=3</h6>\n<h3 id=\"c662\" class=\"graf graf--h3 graf-after--figure\">K-均值聚类</h3>\n<h4 id=\"cf9b\" class=\"graf graf--h4 graf-after--h3\"><strong>适用场景：</strong></h4>\n<p>预先已经知道要分成多少组。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"ad35\" class=\"graf graf--p graf-after--h4\">算法首先将每一个观测点随机地分配到<em>K</em>个类别中的一个，然后计算每一个类别的<em>均值</em>。下一步，在重新计算均值之前算法将每一个点重新分配给均值与该点数据最接近的类别。不断重复这一步直到不需要再重新分配。</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"cd33\" class=\"graf graf--p graf-after--h4\">考虑有12个足球运动员的一个足球队，这些运动员每个人在本赛季都获得了一定的进球数（3-30之间）。现在我们来将他们分成三个单独的聚类。</p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第一步</strong>需要我们随机地将这些运动员分成三组并计算每组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a45369742889\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1\r\nPlayer A (5 goals), Player B (20 goals), Player C (11 goals) \r\nGroup Mean = (5 + 20 + 11) / 3 = 12\r\n\r\nGroup 2\r\nPlayer D (5 goals), Player E (3 goals), Player F (19 goals)\r\nGroup Mean = 9\r\n\r\nGroup 3\r\nPlayer G (30 goals), Player H (3 goals), Player I (15 goals)\r\nGroup Mean = 16</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a45369742889-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a45369742889-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a45369742889-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a45369742889-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a45369742889-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a45369742889-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a45369742889-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-3\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a45369742889-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a45369742889-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-7\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a45369742889-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a45369742889-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a45369742889-11\"><span class=\"crayon-e\">Group </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0030 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>第二步：</strong>对每一个运动员，将它们重新分配到均值离他们最近的组。即，运动员A（进球数5）被分配到第2个组（均值=9）。然后重新计算这几组的均值。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a4f536730460\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 12)\r\nPlayer C (11 goals) \r\nNew Mean = 11\r\n\r\nGroup 2 (Old Mean = 9)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nNew Mean = 4\r\n\r\nGroup 3 (Old Mean = 16)\r\nPlayer G (30 goals), Player I (15 goals), Player B (20 goals), Player F (19 goals)\r\nNew Mean = 21</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a4f536730460-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a4f536730460-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a4f536730460-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a4f536730460-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a4f536730460-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a4f536730460-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a4f536730460-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-3\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a4f536730460-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a4f536730460-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-7\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a4f536730460-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a4f536730460-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a4f536730460-11\"><span class=\"crayon-r\">New</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0033 seconds] -->\r\n<p>不断<strong>重复</strong>第二步直到所有组的均值不再变化。对于这个有些不太好的例子，下一次重复就会达到终止条件。<strong>停止！</strong>现在你已经形成三个聚类的数据集！</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a53387631907\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nGroup 1 (Old Mean = 11)\r\nPlayer C (11 goals), Player I (15 goals)\r\nFinal Mean = 13\r\n\r\nGroup 2 (Old Mean = 4)\r\nPlayer A (5 goals), Player D (5 goals), Player E (3 goals), Player H (3 goals)\r\nFinal Mean = 4\r\n\r\nGroup 3 (Old Mean = 21)\r\nPlayer G (30 goals), Player B (20 goals), Player F (19 goals)\r\nFinal Mean = 23</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a53387631907-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a53387631907-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a53387631907-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a53387631907-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a53387631907-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a53387631907-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-1\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a53387631907-2\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">I</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-3\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a53387631907-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-5\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a53387631907-6\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">D</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">E</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">H</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-7\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a53387631907-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-9\"><span class=\"crayon-i\">Group</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Old </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">21</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a53387631907-10\"><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">G</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">30</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">Player</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">F</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">19</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">goals</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a53387631907-11\"><span class=\"crayon-m\">Final</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Mean</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0032 seconds] -->\r\n<p>在这个例子中，聚类可能对应于球员在场上的位置——如后卫、中场和前锋。k-均值在这里使用因为我们合理地预期数据可以分成这三类。</p>\n<p>通过这种方式，给出一系列性能统计数据，机器可以合理地评估任何团体运动中运动员的位置——这对运动分析很有用，对任何其他的将数据集按照预定义的组别进行分类也可以提供相关的见解。</p>\n<h4 id=\"27e9\" class=\"graf graf--h4 graf-after--p\"><strong>细节：</strong></h4>\n<p id=\"7aa0\" class=\"graf graf--p graf-after--h4\">这个算法有一些变体。对聚类进行“seeding”的初始化方法有好几种方式。在这里，我们将每个球员随机分配到一个小组，然后计算出这些组的均值。这会导致初始生成的组之间的均值很接近，致使后面有更多重复步骤。</p>\n<p class=\"graf graf--p graf-after--h4\">另一种方法是初始化每个聚类时只分配一个球员，然后将其它球员分配到最近的聚类。这样返回的聚类比初始化seeding得到的聚类更有意义，降低了变化很大的数据集中的重复性。但是，这种方法可能会减少完成算法所需的迭代次数，因为这些组将花费较少的时间完成收敛。</p>\n<p class=\"graf graf--p graf-after--h4\">K-均值聚类的一个明显的缺点是你必须提供关于你期望找到多少个聚类的<em>先验</em>假设。 有一些方法可以评估一组特定的聚类结果。 例如，聚类内平方和（<em class=\"markup--em markup--p-em\">Within-Cluster  </em><a href=\"https://en.wikipedia.org/wiki/Partition_of_sums_of_squares\"><em>Sum-of-Squares</em></a>）是每个聚类内方差的度量。 聚类效果越好，整体WCSS越低。</p>\n<h3 id=\"acbe\" class=\"graf graf--h3 graf-after--p\">层次聚类</h3>\n<h4 id=\"1eb8\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p>…你希望发掘出你的观测数据之间的潜在关系。</p>\n<p><strong>如何工作：</strong></p>\n<p id=\"6625\" class=\"graf graf--p graf-after--h4\">计算距离矩阵，其中矩阵元素(i,j)的值是观察值i和j之间的距离度量值。 然后，将最接近的两个观察值进行配对并计算其平均值。通过将配对的观测值合并成一个单一的对象，形成一个新的距离矩阵。 从这个距离矩阵中，配对最近的两个观察值并计算它们的平均值。 重复这个过程，直到所有的观察结果合并在一起。</p>\n<p><strong>实例：</strong></p>\n<p id=\"6bb0\" class=\"graf graf--p graf-after--h4\">这是一个关于鲸鱼和海豚物种选择的超简化数据集。作为一名训练有素的生物学家，我可以向您保证，我们通常会使用更多更详细的数据集来<a href=\"https://en.wikipedia.org/wiki/Phylogenetic_tree\">重建系统发生树</a>。 现在我们来看看这六种物种的典型体长。 我们将只使用两个重复的步骤。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a59053964173\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nSpecies          Initials  Length(m)\r\nBottlenose Dolphin     BD        3.0\r\nRisso's Dolphin        RD        3.6\r\nPilot Whale            PW        6.5\r\nKiller Whale           KW        7.5\r\nHumpback Whale         HW       15.0\r\nFin Whale              FW       20.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a59053964173-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a59053964173-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a59053964173-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a59053964173-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a59053964173-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a59053964173-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a59053964173-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a59053964173-1\"><span class=\"crayon-e\">Species          </span><span class=\"crayon-e\">Initials  </span><span class=\"crayon-e\">Length</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">m</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a59053964173-2\"><span class=\"crayon-e\">Bottlenose </span><span class=\"crayon-e\">Dolphin     </span><span class=\"crayon-i\">BD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a59053964173-3\"><span class=\"crayon-i\">Risso</span>'<span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Dolphin        </span><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">3.6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a59053964173-4\"><span class=\"crayon-e\">Pilot </span><span class=\"crayon-e\">Whale            </span><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">6.5</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a59053964173-5\"><span class=\"crayon-e\">Killer </span><span class=\"crayon-e\">Whale           </span><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">        </span><span class=\"crayon-cn\">7.5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a59053964173-6\"><span class=\"crayon-e\">Humpback </span><span class=\"crayon-e\">Whale         </span><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">15.0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a59053964173-7\"><span class=\"crayon-e\">Fin </span><span class=\"crayon-e\">Whale              </span><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">20.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--h4\"><strong>步骤1：</strong>计算每个物种之间的距离矩阵。在这里，我们将使用<a href=\"https://en.wikipedia.org/wiki/Euclidean_distance\">欧式距离</a>——数据点之间的距离。你可以计算出距离就像在道路图上查看距离图一样。可以通过读取相关行和列的交点处的值来查找任何物种对之间的长度差异。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a5d510729074\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    BD   RD   PW   KW   HW\r\nRD  0.6                    \r\nPW  3.5  2.9               \r\nKW  4.5  3.9  1.0          \r\nHW 12.0 11.4  8.5  7.5     \r\nFW 17.0 16.4 13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a5d510729074-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a5d510729074-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a5d510729074-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a5d510729074-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a5d510729074-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a5d510729074-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a5d510729074-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">BD   </span><span class=\"crayon-e\">RD   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a5d510729074-2\"><span class=\"crayon-i\">RD</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0.6</span><span class=\"crayon-h\">                    </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a5d510729074-3\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">2.9</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a5d510729074-4\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">4.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">3.9</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a5d510729074-5\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">11.4</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a5d510729074-6\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17.0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16.4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p id=\"7109\" class=\"graf graf--p graf-after--pre\"><strong>步骤2：</strong>配对两个最接近的物种。在这里，两个最接近的物种是宽吻海豚和灰海豚，平均长度为3.3米。</p>\n<p id=\"d409\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1重新计算距离矩阵，但是这次将宽吻海豚和灰海豚合并成长度为3.3m的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a60904121095\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n    [BD, RD]   PW   KW   HW\r\nPW       3.2               \r\nKW       4.2   1.0          \r\nHW      11.7   8.5  7.5     \r\nFW      16.7  13.5 12.5  5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a60904121095-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a60904121095-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a60904121095-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a60904121095-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a60904121095-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a60904121095-1\"><span class=\"crayon-h\">    </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-e\">PW   </span><span class=\"crayon-e\">KW   </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a60904121095-2\"><span class=\"crayon-i\">PW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">3.2</span><span class=\"crayon-h\">               </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a60904121095-3\"><span class=\"crayon-i\">KW</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">4.2</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1.0</span><span class=\"crayon-h\">          </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a60904121095-4\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">8.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">7.5</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a60904121095-5\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">13.5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12.5</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p></p>\n<p id=\"77af\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，用这个新距离矩阵重复步骤2。现在，距离最小的是领航鲸与逆戟鲸，所以我们计算他们的平均——7.0米。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复第1步——重新计算距离矩阵，但是现在我们已经将领航鲸与逆戟鲸合并成了一个长度为7.0米的单个对象。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a64897649011\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [BD, RD] [PW, KW]   HW\r\n[PW, KW]      3.7              \r\nHW           11.7      8.0     \r\nFW           16.7     13.0   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a64897649011-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a64897649011-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a64897649011-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a64897649011-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a64897649011-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">   </span><span class=\"crayon-i\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a64897649011-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">3.7</span><span class=\"crayon-h\">              </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a64897649011-3\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">11.7</span><span class=\"crayon-h\">      </span><span class=\"crayon-cn\">8.0</span><span class=\"crayon-h\">     </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a64897649011-4\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">           </span><span class=\"crayon-cn\">16.7</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">13.0</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p></p>\n<p id=\"da48\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们用这个距离矩阵重复步骤2。最小距离是两个合并对象之间的（3.7米）——现在我们将它们合并成一个更大的对象，并取平均值（即5.2米）。</p>\n<p class=\"graf graf--p graf-after--p\"><strong>然后</strong>，我们重复步骤1并计算一个新的距离矩阵，合并了宽吻海豚和灰海豚与领航鲸与逆戟鲸。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a68528802836\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n   [[BD, RD] , [PW, KW]]    HW\r\nHW                   9.8    \r\nFW                  14.8   5.0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a68528802836-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a68528802836-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a68528802836-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a68528802836-1\"><span class=\"crayon-h\">   </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">    </span><span class=\"crayon-e\">HW</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a68528802836-2\"><span class=\"crayon-i\">HW</span><span class=\"crayon-h\">                   </span><span class=\"crayon-cn\">9.8</span><span class=\"crayon-h\">    </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a68528802836-3\"><span class=\"crayon-i\">FW</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">14.8</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">5.0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p></p>\n<p id=\"cf09\" class=\"graf graf--p graf-after--pre\"><strong>接下来</strong>，我们重复步骤2。最小的距离（5.0米）在座头鲸与长须鲸之间，所以我们将它们合并成一个单一的对象，取平均值（17.5米）。</p>\n<p id=\"a88d\" class=\"graf graf--p graf-after--p\"><strong>然后</strong>，返回步骤1——计算距离矩阵，座头鲸与长须鲸已经合并。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a6c008446743\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         [[BD, RD] , [PW, KW]]\r\n[HW, FW]                  12.3</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a6c008446743-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a6c008446743-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a6c008446743-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a6c008446743-2\"><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\">                  </span><span class=\"crayon-cn\">12.3</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\"><strong>最后</strong>，我们重复步骤2——在这个矩阵中只有一个距离（12.3米），我们把所有东西都放在一个大对象中，现在我们可以停下来了！我们来看看最后的合并对象：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a6f518798732\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n[[[BD, RD],[PW, KW]],[HW, FW]]</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a6f518798732-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a6f518798732-1\"><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">BD</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">RD</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">PW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">KW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">,</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">HW</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">FW</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">]</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">它有一个嵌套的结构（可以认为是<a href=\"http://json.org/example.html\">JSON</a>），可以把它绘制成一个树状的图形或者树形图。 它读取的方式与家谱相同。 两个观察结果在树上离得越近，就被认为是更相似或更密切相关的。</p>\n<div class=\"aspectRatioPlaceholder is-locked\"> <img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachtrft4j20dc0dc3yh.jpg\"></div>\n<p class=\"graf graf--p graf-after--p\">在<a href=\"http://www.r-fiddle.org/#\">R-Fiddle.org</a>上生成一个简单的树状图</p>\n<p id=\"e2dc\" class=\"graf graf--p graf-after--figure\">树状图的结构使我们能够深入了解数据集的结构。在我们的例子中，我们看到两个主要分支，一个分支是 HW 和 FW，另一个是 BD、RD、PW、KW。</p>\n<p id=\"5b08\" class=\"graf graf--p graf-after--p\">在进化生物学中，具有更多样本和测量的更大的数据集以这种方式被用来推断它们之间的分类关系。 除了生物学之外，层次聚类在数据挖掘和机器学习环境中也有应用。</p>\n<p id=\"a111\" class=\"graf graf--p graf-after--p\">很酷的是，这种方法不需要假设你正在寻找的聚类数量。 您可以通过在给定高度“切割”树来将返回的树形图划分为聚类。 这个高度可以通过多种方式进行选择，具体取决于你希望对数据进行聚类的分辨率。</p>\n<p id=\"c890\" class=\"graf graf--p graf-after--p\">例如，从上面的树状图可以看出，如果我们在高度为10的情况下绘制一条水平线，我们就会将两条主要分支分割，将树状图分成两个子图。 如果我们在高度= 2切割，树状图就被分成三个聚类。</p>\n<p><strong>细节：</strong></p>\n<p id=\"a2ce\" class=\"graf graf--p graf-after--h4\">关于层次聚类算法可以出现的变化，基本上有三个方面。</p>\n<p class=\"graf graf--p graf-after--h4\">最根本的是方法——在这里，我们使用了一个<em>凝聚</em>的过程，我们从单个数据点开始，并将它们迭代地聚集在一起，直到剩下一个大聚类。 另一种（但是计算量更大）的方法是从一个大聚类开始，然后将数据分成越来越小的聚类，直到剩下孤立的数据点为止。</p>\n<p class=\"graf graf--p graf-after--h4\">还有一系列的方法可以用来计算距离矩阵。 很多情况下，欧几里得距离（参考毕达哥拉斯定理）就足够了，但是在某些情况下还有其他可能更适用的选择。</p>\n<p class=\"graf graf--p graf-after--h4\">最后，连接标准也可以变化。 聚类根据彼此之间的距离而相互连接，但是我们定义“近”的方式是灵活的。 在上面的例子中，我们测量了每个组的平均值（或“质心”）之间的距离，并将最近的组进行配对。 但是， 你可能想要使用其他的定义。</p>\n<p class=\"graf graf--p graf-after--h4\">例如，每个聚类由多个离散点组成。 我们可以将两个聚类之间的距离定义为任意点之间的最小（或最大）距离——如下图所示。 还有其他方法来定义连接标准，它们可能适用于不同的环境。</p>\n<p class=\"graf graf--p graf-after--h4\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachuzciuj20m80cgmyu.jpg\"></p>\n<p class=\"graf graf--p graf-after--h4\" style=\"text-align: center;\">红/蓝：形心连接；红色/绿色：最少连接；绿/蓝：最大连接</p>\n<h3 id=\"b664\" class=\"graf graf--h3 graf-after--figure\">图社区发现</h3>\n<h4 id=\"f884\" class=\"graf graf--h4 graf-after--h3\"><strong>什么时候使用：</strong></h4>\n<p id=\"7a65\" class=\"graf graf--p graf-after--h4\">…你可以将数据表示为网络或“图”的时候。</p>\n<h4 id=\"71dc\" class=\"graf graf--h4 graf-after--p\"><strong>如何工作：</strong></h4>\n<p id=\"6e96\" class=\"graf graf--p graf-after--h4\">图中的社区通常被定义为与网络其余部分相比，彼此连接更多的顶点的子集。 存在各种算法来基于更具体的定义来识别社区。 算法包括但不限于：Edge Betweenness，Modularity-Maximsation，Walktrap，Clique Percolation，Leading Eigenvector …</p>\n<h4 id=\"6699\" class=\"graf graf--h4 graf-after--p\"><strong>实现例子：</strong></h4>\n<p id=\"6cc8\" class=\"graf graf--p graf-after--h4\"><a href=\"https://en.wikipedia.org/wiki/Graph_theory\">图论</a>或网络的数学研究是数学的一个有趣的分支，它让我们将复杂系统建模为由“线”（或边）连接的“点”（或顶点）的抽象集合。</p>\n<p id=\"a226\" class=\"graf graf--p graf-after--p\">最直观的案例研究也许就是社交网络了。在这里，顶点代表人，边连接的是朋友/关注者的顶点。 然而，如果你能证明一个方法可以有意义地连接不同的部分，任何系统都可以被建模为一个网络。 图论中聚类的创新应用包括从图像数据中提取特征，分析基因调控网络。</p>\n<p id=\"30e4\" class=\"graf graf--p graf-after--p\">作为一个入门级的例子，看看这个快速组合在一起的图。 它显示了我最近访问过的八个网站，根据它们各自的维基百科文章是否彼此连接而连接在一起。 您可以手动组合这些数据，但是对于大型项目，编写Python脚本执行相同的操作要快得多。<a href=\"https://raw.githubusercontent.com/pg0408/Medium-articles/master/graph_maker.py\">这是我之前写的一个</a>。</p>\n<p id=\"3c6b\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx2.sinaimg.cn/mw690/63918611gy1fpachw50t6j20et093gm1.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">根据其社区成员对顶点进行着色，并根据其中心位置来确定大小。 看看Google和Twitter是最中心的吧？</p>\n<p class=\"graf graf--p graf-after--p\">而且，这些聚类在现实世界中也很有意义（一直一个重要的性能指标）。黄色的顶点通常是参考/搜索网站；蓝色顶点全部用于在线发布（文章，推文或代码）；红色的顶点包括YouTube，因为Youtube是由前PayPal员工创建的。 机器推论的不错！</p>\n<p class=\"graf graf--p graf-after--p\">除了作为有用的大型系统可视化的方式之外，网络的真正威力是其数学分析。 让我们开始把我们的这张网络图片变成一种更加数学的格式。 以下是网络的邻接矩阵。</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a77163351872\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n         GH Gl  M  P  Q  T  W  Y\r\nGitHub    0  1  0  0  0  1  0  0  \r\nGoogle    1  0  1  1  1  1  1  1\r\nMedium    0  1  0  0  0  1  0  0\r\nPayPal    0  1  0  0  0  1  0  1\r\nQuora     0  1  0  0  0  1  1  0\r\nTwitter   1  1  1  1  1  0  0  1\r\nWikipedia 0  1  0  0  1  0  0  0\r\nYouTube   0  1  0  1  0  1  0  0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a77163351872-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a77163351872-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a77163351872-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a77163351872-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a77163351872-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a77163351872-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a77163351872-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a77163351872-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a77163351872-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a77163351872-1\"><span class=\"crayon-h\">         </span><span class=\"crayon-e\">GH </span><span class=\"crayon-i\">Gl</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">M</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">P</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Q</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">T</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">W</span><span class=\"crayon-h\">  </span><span class=\"crayon-i\">Y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a77163351872-2\"><span class=\"crayon-i\">GitHub</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a77163351872-3\"><span class=\"crayon-i\">Google</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a77163351872-4\"><span class=\"crayon-i\">Medium</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a77163351872-5\"><span class=\"crayon-i\">PayPal</span><span class=\"crayon-h\">    </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a77163351872-6\"><span class=\"crayon-i\">Quora</span><span class=\"crayon-h\">     </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a77163351872-7\"><span class=\"crayon-i\">Twitter</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a77163351872-8\"><span class=\"crayon-i\">Wikipedia</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a77163351872-9\"><span class=\"crayon-i\">YouTube</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\">  </span><span class=\"crayon-cn\">0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0031 seconds] -->\r\n<p></p>\n<p id=\"7ad5\" class=\"graf graf--p graf-after--pre\">每行和每列交点处的值记录该对顶点之间是否存在边。例如，Medium和Twitter之间存在一条边（惊喜！），所以它们的行/列相交的值是1。同样，Medium和PayPal之间没有边，所以它们行/列交点的值为0。</p>\n<p id=\"fd3d\" class=\"graf graf--p graf-after--p\">在邻接矩阵内进行编码就会得到这个网络的所有属性——它给了我们解锁各种有价值见解的钥匙。首先，将任意列（或行）相加，就可以得出每个顶点的度数——即连接了多少个顶点。通常用字母<em>k</em>表示。</p>\n<p id=\"7634\" class=\"graf graf--p graf-after--p\">同样，将每个顶点的度数相加并除以2得到L，即网络中边（或“连接”）的数量。行数/列数即网络中顶点（或“节点”）的数量，用<em>N</em>表示。</p>\n<p id=\"bc6b\" class=\"graf graf--p graf-after--p\">知道<em>k</em>，<em>L</em>，<em>N</em>和邻接矩阵<em>A</em>中每个单元的值，就可以计算任意给定的网络聚类的<em><a href=\"https://en.wikipedia.org/wiki/Modularity_%28networks%29\">模块性</a></em>。</p>\n<p id=\"facf\" class=\"graf graf--p graf-after--p\">假设我们已经将网络聚类成了一些社区。我们可以使用模块性评分来评估这个聚类的“质量”。更高的分数将表明我们已经把网络分成了“准确”的社区，而低分表明我们的聚类更随机。下面的图片说明了这一点。</p>\n<figure id=\"b803\" class=\"graf graf--figure graf-after--p\">\n<figcaption class=\"imageCaption\"><img src=\"http://wx4.sinaimg.cn/mw690/63918611gy1fpachxk96wj20m80aggnj.jpg\"></figcaption>\n<figcaption class=\"imageCaption\">模块性是衡量分区“质量”的指标。</figcaption>\n</figure>\n<p id=\"e812\" class=\"graf graf--p graf-after--figure\">模块性可以使用下面的公式计算：</p>\n<p id=\"4d1a\" class=\"graf graf--p graf-after--figure\"><img src=\"http://wx1.sinaimg.cn/mw690/63918611gy1fpachz41ulj20m8089t94.jpg\"></p>\n<p class=\"graf graf--p graf-after--figure\">这个公示包含相当数量的数学知识，但我们可以一点一点地分解它，使它更好理解。</p>\n<p class=\"graf graf--p graf-after--p\"><em>M</em>当然是我们正在计算的——模块性。</p>\n<p class=\"graf graf--p graf-after--p\">1/2<em>L</em>告诉我们把后面所有的东西除以2<em>L</em>，即网络中边的数量的两倍。到现在为止，一切都很好理解。</p>\n<p class=\"graf graf--p graf-after--figure\"><strong>Σ</strong>符号告诉我们对右边的所有东西求和，并迭代邻接矩阵<em>A</em>中的每一行和列。对于那些不熟悉求和符号的人来说，<em>i，j = 1</em>和<em>N</em>的作用非常像编程中的嵌套for循环。在Python中，你可以这样写：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a7c765881636\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nsum = 0\r\n\r\nfor i in range(1,N):\r\n    for j in range(1,N):\r\n        ans = #stuff with i and j as indices\r\n        sum += ans</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a7c765881636-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a7c765881636-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a7c765881636-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a7c765881636-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a7c765881636-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a7c765881636-6\">6</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a7c765881636-1\"><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a7c765881636-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a7c765881636-3\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">i</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a7c765881636-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">j</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">range</span><span class=\"crayon-sy\">(</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-v\">N</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a7c765881636-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">ans</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\">#stuff with i and j as indices</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a7c765881636-6\"><span class=\"crayon-h\">        </span><span class=\"crayon-v\">sum</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ans</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--figure\"><code class=\"markup--code markup--p-code\">那么#stuff with i and j</code> 具体是什么？</p>\n<p id=\"1f91\" class=\"graf graf--p graf-after--p\">括号里的东西告诉我们从<em>A_ij</em>中减去<em>（k_i k_j）/ 2L</em>。</p>\n<p id=\"4555\" class=\"graf graf--p graf-after--p\"><em>A_ij</em>是邻接矩阵中第<em>i</em>行第<em>j</em>列的值。</p>\n<p id=\"1ca6\" class=\"graf graf--p graf-after--p\"><em>k_i</em>和<em>k_j</em>的值是每个顶点的度数——通过将第<em>i</em>行和第<em>j</em>列中的项分别相加而得到。将它们相乘并除以<em>2L</em>得到如果网络是随机分布的顶点<em>i</em>和<em>j</em>之间的期望的边数。</p>\n<p class=\"graf graf--p graf-after--p\">总的来说，括号中的项表示网络的真实结构和随机重组的预期结构之间的差异。研究这个值表明，当<em>A_ij = 1，（k_i k_j）/ 2L</em>小的时候，它返回最大值。这意味着如果在顶点<em>i</em>和<em>j</em>之间存在“非预期”边缘，我们会看到更大的值。</p>\n<p class=\"graf graf--p graf-after--p\">最后，我们将括号中的项和后面几个符号相乘。</p>\n<p class=\"graf graf--p graf-after--p\"><em>δc_i</em>，<em>c_j</em>就是有名的 <em class=\"markup--em markup--p-em\">Kronecker-delta </em><em>函数</em>。 这里是其Python解释：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d35103a81539662991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\ndef Kronecker_Delta(ci, cj):\r\n    if ci == cj:\r\n        return 1\r\n    else:\r\n        return 0\r\n\r\nKronecker_Delta(\"A\",\"A\")    #returns 1\r\nKronecker_Delta(\"A\",\"B\")    #returns 0</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a81539662991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a81539662991-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a81539662991-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a81539662991-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a81539662991-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a81539662991-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d35103a81539662991-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d35103a81539662991-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d35103a81539662991-1\"><span class=\"crayon-e\">def </span><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">ci</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-sy\">)</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a81539662991-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ci</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">cj</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a81539662991-3\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a81539662991-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">else</span><span class=\"crayon-o\">:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a81539662991-5\"><span class=\"crayon-h\">        </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a81539662991-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d35103a81539662991-7\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d35103a81539662991-8\"><span class=\"crayon-e\">Kronecker_Delta</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"A\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-s\">\"B\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">    </span><span class=\"crayon-p\">#returns 0</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p></p>\n<p class=\"graf graf--p graf-after--p\">是的——这真的很简单。Kronecker-delta函数有两个参数，如果相同则返回1，否则返回0。</p>\n<p class=\"graf graf--p graf-after--p\">这意味着如果顶点i和j已经被放入同一个聚类中，则δc_i，c_j = 1。否则，如果它们在不同的聚类中，则该函数返回0。</p>\n<p class=\"graf graf--p graf-after--p\">我们用这个Kronecker-delta函数乘以括号中的项，我们发现对于嵌套总和Σ，当分配给同一个聚类很多“非预期”的连接顶点的边时，其结果是最高的。因此，模块性是衡量图如何聚类到不同社区中的一种衡量标准。</p>\n<p id=\"7643\" class=\"graf graf--p graf-after--p\">除以<em>2L</em>这一操作将模块性的上限值界定为1。模块性分数接近或低于0表示网络的当前聚类实际上是无用的。模块性值越高，网络分散到不同社区的聚类越好。通过最大化模块性，我们可以找到聚类网络的最佳方式。</p>\n<p id=\"4f28\" class=\"graf graf--p graf-after--p\">请注意，我们必须预先定义图形如何聚类，以找出聚类实际上的“好”。不幸的是，使用暴力对图的每一种可能的聚类方式进行计算，以找到<br>\n具有最高模块性分数的方式，即使是在有限样本大小的情况下也是不可能的。</p>\n<p class=\"graf graf--p graf-after--p\"><a href=\"https://en.wikipedia.org/wiki/Partition_of_a_set#Counting_partitions\">组合学</a>告诉我们，对于只有8个顶点的网络，有4140种不同的聚类方式。 规模两倍的16个顶点的网络将有超过一百亿种可能的聚集顶点的方式。再次将网络加倍（对一个非常适中的32个顶点）将会产生128 septillion （128*10^24）种可能的方式，而且有八十个顶点的网络的聚类方式将比<a href=\"https://www.wolframalpha.com/input/?i=991267988808424794443839434655920239360814764000951599022939879419136287216681744888844&amp;lk=1&amp;rawformassumption=%22ClashPrefs%22+-%3E+%7B%22Math%22%7D\">宇宙中可观察的原子数还多</a>。</p>\n<p class=\"graf graf--p graf-after--p\">所以，我们不得不转向一种<em>启发式的</em>方法，该方法在评估可以产生最高模块性分数的聚类方面做得相当不错，而不是尝试每一种可能性。 这是一种叫Fast-Greedy Modularity-Maximization的算法，它有点类似于上面描述的凝聚层次聚类算法。 “Mod-Max”不是根据距离进行合并，而是根据模块性的变化来合并。它是这样工作的：</p>\n<p id=\"db81\" class=\"graf graf--p graf-after--p\"><strong>首先</strong>将每个顶点分配到自己的社区，然后计算整个网络的模块性。</p>\n<p id=\"80a1\" class=\"graf graf--p graf-after--p\"><strong>第一步</strong>要求每一个社区至少被一条单边连接，如果两个社区合并为一个，算法计算模块性的变化结果<em>ΔM</em>。</p>\n<p id=\"09cd\" class=\"graf graf--p graf-after--p\">然后，<strong>步骤2</strong>将使得<em>ΔM</em>增加最多的一对社区合并。为这个聚类计算新的模块性<em>M</em>，并记录下来。</p>\n<p id=\"8228\" class=\"graf graf--p graf-after--p\"><strong>重复</strong>步骤1和2——每次合并产生最大<em>ΔM</em>增益的社区，然后记录新的聚类模式及其相关的模块性评分<em>M</em>。</p>\n<p id=\"80a6\" class=\"graf graf--p graf-after--p\">当所有的顶点被分成一个大聚类时<strong>停下来</strong>。现在，算法检查它整个过程的记录，并确定返回最高值<em>M</em>的聚类模式。这就是返回的社区结构。</p>\n<p><strong>细节：</strong></p>\n<p id=\"37cf\" class=\"graf graf--p graf-after--h4\">这需要进行的计算太多了，至少对于我们人类来说。图论中有丰富的计算难题，通常是NP-hard问题，但它也具有难以置信的潜力，为复杂的系统和数据集提供有价值的见解。与Larry Page同名的PageRank算法——帮助Google在不到一代人的时间里从初创阶段发展到了几乎统治世界——完全基于图论。</p>\n<p id=\"8eec\" class=\"graf graf--p graf-after--p\">社区发现是当前图论研究的一个焦点问题，模块性最大化有许多替代方案，虽然有用，但也有一些缺点。</p>\n<p id=\"7379\" class=\"graf graf--p graf-after--p\">一开始，其聚集的方法往往将小而明确的社区吞并为大的社区。 这就是所谓的分辨率限制——算法不会在一定大小以内找到社区。 另一个挑战是，Mod-Max方法实际上倾向于产生许多具有类似的高模块性分数组成的“高原”，而不是一个独特的，易于到达的全局高峰值，这导致有时候难以确定最大分数。</p>\n<p id=\"3c5a\" class=\"graf graf--p graf-after--p\">其他算法使用不同的方式来定义和处理社区发现。<em class=\"markup--em markup--p-em\">Edge-Betweenness</em>是一个分裂的算法，从所有顶点分组在一个大聚类开始。持续迭代去除网络中最不重要的边，直到所有的顶点都被分开。这个过程产生了一个层级结构，类似的顶点在层级结构中更接近。</p>\n<p id=\"dd08\" class=\"graf graf--p graf-after--p\">另一种算法是<em class=\"markup--em markup--p-em\">Clique Percolation</em>，它考虑了图社区之间可能的重叠。 还有另一组算法是基于图上的<a href=\"https://en.wikipedia.org/wiki/Random_walk\">随机漫步</a>，然后是<em><a href=\"https://en.wikipedia.org/wiki/Spectral_clustering\">谱聚类</a></em>方法，它从邻接矩阵和由其导出的其它矩阵的特征分解开始研究。这些方法被用于例如计算机视觉等领域的特征提取。</p>\n<p id=\"b391\" class=\"graf graf--p graf-after--p\">给每个算法提供一个深入的实例，这已经远远超出了本文的范围。我想说的是，这是一个活跃的研究领域，它提供了强大的方法来理解数据，即使在十年前还是个非常困难的过程。</p>\n<h3 id=\"6ec6\" class=\"graf graf--h3 graf-after--p\">结论</h3>\n<p id=\"4fee\" class=\"graf graf--p graf-after--h3\">希望这篇文章能够让你更好地理解机器如何理解大数据。未来瞬息万变，其中许多变化将由在下一代或两代中的产生的技术所驱动。</p>\n<p id=\"e236\" class=\"graf graf--p graf-after--p\">正如介绍中所概述的，机器学习是一个雄心勃勃的研究领域，其中大量复杂的问题需要尽可能准确和高效地解决。对于我们人类来说任何容易完成的任务都需要机器采取创新的解决方案。</p>\n<p id=\"49ba\" class=\"graf graf--p graf-after--p graf--trailing\">这个领域内还有很大的进步空间，谁来贡献下一个突破的想法，无疑将会得到丰厚的回报。 也许读了这篇文章的某个人就会发明下一个强大的算法？所有伟大的想法都必须从某处开始！</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113745\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113745votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113745\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 2 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">LynnShaw</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/avatars/104743/4e04a90ce037ac8e7d76fe8ac03d6610-bpthumb.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            微博：@萧萧萧宁        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/shaoai37\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/shaoai37/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/shaoai37/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 35</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/7c651e0fce13acb304e7b99f8851cc540be4decd.jpg"}
{"url_object_id": "346c3258b4b9bfbca9483337a14be393", "title": ["我从 1000 份代码审查中学到了什么"], "url": "http://blog.jobbole.com/113741/", "create_date": "2018/03/12", "front_image_url": ["http://wx3.sinaimg.cn/mw690/63918611gy1fpaca90vycj218g0tmtek.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 0, "tags": "IT技术,Code Review,代码审查", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://hackernoon.com/what-i-learned-from-doing-1000-code-reviews-fe28d4d11c71\">Steven Heidel</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>我看到有些建议不断重复出现，所以我决定整理一个清单，与诸位分享。</p>\n<p id=\"ec28\" class=\"graf graf--p graf-after--p\">这是我的 3（额外 +1）个最常见的代码审查建议。</p>\n<p><img class=\"alignnone\" src=\"http://wx3.sinaimg.cn/mw690/63918611gy1fpaca90vycj218g0tmtek.jpg\" width=\"690\" height=\"460\"></p>\n<h3 id=\"1d0b\" class=\"graf graf--p graf-after--figure\"><strong>建议1：出错时抛出异常</strong></h3>\n<p id=\"9787\" class=\"graf graf--p graf-after--p\">我见过的一个常见模式是：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d037ba696541537854\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nList&lt;String&gt; getSearchResults(...) {\r\n  try {\r\n    List&lt;String&gt; results = // make REST call to search service\r\n    return results;\r\n  } catch (RemoteInvocationException e) {\r\n    return Collections.emptyList();\r\n  }\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba696541537854-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba696541537854-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba696541537854-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba696541537854-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba696541537854-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba696541537854-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba696541537854-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba696541537854-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d037ba696541537854-1\"><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">getSearchResults</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba696541537854-2\"><span class=\"crayon-h\">  </span><span class=\"crayon-st\">try</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba696541537854-3\"><span class=\"crayon-h\">    </span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// make REST call to search service</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba696541537854-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">results</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba696541537854-5\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">catch</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">RemoteInvocationException</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">e</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba696541537854-6\"><span class=\"crayon-h\">    </span><span class=\"crayon-st\">return</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Collections</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">emptyList</span><span class=\"crayon-sy\">(</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba696541537854-7\"><span class=\"crayon-h\">  </span><span class=\"crayon-sy\">}</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba696541537854-8\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>这种模式实际上导致了我做的移动应用程序崩溃，我们当时使用的搜索后端开始抛出异常。而应用程序的 API 服务器中也有一些类似的代码。从应用程序的角度来看，它成功获取了 200 个响应，只是每个搜索请求返回的是空列表。</p>\n<p id=\"addb\" class=\"graf graf--p graf-after--p\">如果当时 API 直接抛出异常，那么我们的监控系统就会立即检测到并修复它。</p>\n<p id=\"de7a\" class=\"graf graf--p graf-after--p\">很多时候，当你捕获一个异常时，你会希望它返回一个空对象。Java 中的空对象包括 Optional.empty()、null 和空列表，而它们在 URL 解析中经常出现。如果 URL 不能从一个字符串中正确解析时，先不要返回 null，而是停下来问问自己：“为什么 URL 格式不正确？这不是我们应该在上游解决的数据问题吗？”</p>\n<p id=\"3b2d\" class=\"graf graf--p graf-after--p\">空对象不是解决此类问题的合适工具。<strong>如果有异常，你应该（及时）抛出它。</strong></p>\n<h3 id=\"9dac\" class=\"graf graf--p graf-after--p\"><strong>建议2：使用尽可能具体的类型</strong></h3>\n<p id=\"42d5\" class=\"graf graf--p graf-after--p\">这个建议基本上与<a class=\"markup--anchor markup--p-anchor\" href=\"http://wiki.c2.com/?StringlyTyped\" target=\"_blank\" rel=\"noopener\">字符串类型编程</a>相反。</p>\n<p id=\"11ce\" class=\"graf graf--p graf-after--p\">我经常看到类似这样的代码：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d037ba6f4897408630\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nvoid doOperation(String opType, Data data); \r\n// where opType is \"insert\", \"append\", or \"delete\", this should have clearly been an enum\r\n\r\nString fetchWebsite(String url);\r\n// where url is \"https://google.com\", this should have been an URN\r\n\r\nString parseId(Input input);\r\n// the return type is String but ids are actually Longs like \"6345789\"</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6f4897408630-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6f4897408630-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6f4897408630-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6f4897408630-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6f4897408630-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6f4897408630-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6f4897408630-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6f4897408630-8\">8</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6f4897408630-1\"><span class=\"crayon-t\">void</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">doOperation</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">opType</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Data </span><span class=\"crayon-v\">data</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6f4897408630-2\"><span class=\"crayon-c\">// where opType is \"insert\", \"append\", or \"delete\", this should have clearly been an enum</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6f4897408630-3\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6f4897408630-4\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">fetchWebsite</span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">url</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6f4897408630-5\"><span class=\"crayon-c\">// where url is \"https://google.com\", this should have been an URN</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6f4897408630-6\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6f4897408630-7\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseId</span><span class=\"crayon-sy\">(</span><span class=\"crayon-e\">Input </span><span class=\"crayon-v\">input</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6f4897408630-8\"><span class=\"crayon-c\">// the return type is String but ids are actually Longs like \"6345789\"</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0010 seconds] -->\r\n<p>尽可能具体的类型可以让你避免整个类的错误，这基本上是大家选择强类型语言（如 Java）的原因。</p>\n<p id=\"ebee\" class=\"graf graf--p graf-after--p\">所以现在的问题是：那些想要写强类型语言的程序员，最终是怎么写出糟糕的字符串类型的代码哪？答案是：因为外部世界不是强类型的。字符串通常来自许多不同的地方，比如：</p>\n<ul class=\"postList\">\n<li class=\"graf graf--li graf-after--li\">url 中的请求和路径参数</li>\n<li class=\"graf graf--li graf-after--li\">JSON</li>\n<li class=\"graf graf--li graf-after--li\">不支持枚举的数据库</li>\n<li class=\"graf graf--li graf-after--li\">写得很差的库</li>\n</ul>\n<p id=\"bce9\" class=\"graf graf--p graf-after--li\">这些情况下，你应该使用以下策略来避免这个问题：<strong>将字符串解析和序列化保持到程序边缘</strong>。这是一个例子：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d037ba6fc762218212\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// Step 1: Take a query param representing a company name / member id pair and parse it\r\n// example: context=Pair(linkedin,456)\r\nPair&lt;String, Long&gt; companyMember = parseQueryParam(\"context\");\r\n// this should throw an exception if malformed\r\n\r\n// Step 2: Do all the stuff in your application\r\n// MOST if not all of your code should live in this area\r\n\r\n// Step 3: Convert the parameter back into a String at the very end if necessary\r\nString redirectLink = serializeQueryParam(\"context\");</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6fc762218212-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6fc762218212-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6fc762218212-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6fc762218212-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6fc762218212-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6fc762218212-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6fc762218212-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6fc762218212-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba6fc762218212-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba6fc762218212-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6fc762218212-1\"><span class=\"crayon-c\">// Step 1: Take a query param representing a company name / member id pair and parse it</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6fc762218212-2\"><span class=\"crayon-c\">// example: context=Pair(linkedin,456)</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6fc762218212-3\"><span class=\"crayon-v\">Pair</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-t\">String</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">Long</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">companyMember</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">parseQueryParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"context\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6fc762218212-4\"><span class=\"crayon-c\">// this should throw an exception if malformed</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6fc762218212-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6fc762218212-6\"><span class=\"crayon-c\">// Step 2: Do all the stuff in your application</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6fc762218212-7\"><span class=\"crayon-c\">// MOST if not all of your code should live in this area</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6fc762218212-8\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba6fc762218212-9\"><span class=\"crayon-c\">// Step 3: Convert the parameter back into a String at the very end if necessary</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba6fc762218212-10\"><span class=\"crayon-t\">String</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">redirectLink</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">serializeQueryParam</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"context\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>它带给我们许多好处：1、能够立刻发现格式不正确的数据；如果有任何问题，应用程序会提前显示并终止。2、一旦数据通过验证，你不必在整个应用程序中捕获解析异常。3、强类型使得签名具有更多信息，这样你就无需在每个方法上写 javadoc。</p>\n<h3 id=\"3981\" class=\"graf graf--p graf-after--p\"><strong>建议3：使用 Optionals 而不是 null</strong></h3>\n<p id=\"8e2f\" class=\"graf graf--p graf-after--p\"><code class=\"markup--code markup--p-code\">Optional</code>（可选）类是 Java 8 中最好的特性之一，它表示一个可以合理存在或不存在的实体。</p>\n<p id=\"d2f2\" class=\"graf graf--p graf-after--p\">问题时间：唯一用缩写来指代的异常是什么？答：NPE （Null Pointer Exception，空指针异常）。这是迄今为止 Java 中最常见的异常，被称为<a class=\"markup--anchor markup--p-anchor\" href=\"https://www.infoq.com/presentations/Null-References-The-Billion-Dollar-Mistake-Tony-Hoare\" target=\"_blank\" rel=\"noopener\">十亿美元的错误</a>。</p>\n<p id=\"2a55\" class=\"graf graf--p graf-after--p\"><code class=\"markup--code markup--p-code\">Optional</code> 允许你从程序中完全删除 NPE。但是，你必须正确地使用它。这里有一些关于如何使用 <code class=\"markup--code markup--p-code\">Optional</code> 的建议：</p>\n<ul class=\"postList\">\n<li id=\"aa71\" class=\"graf graf--li graf-after--p\">你不应该在任何时候随意调用 <code class=\"markup--code markup--li-code\">.get()</code>，而应仔细考虑 <code class=\"markup--code markup--li-code\">Optional</code> 不存在的情况，并给出合理的默认值。</li>\n<li id=\"b536\" class=\"graf graf--li graf-after--li\">如果你还没有一个合理的默认值，那么像 <code class=\"markup--code markup--li-code\">.map()</code> 和 <code class=\"markup--code markup--li-code\">.flatMap()</code> 这样的方法，可以让你晚点做这个决定。</li>\n<li id=\"c520\" class=\"graf graf--li graf-after--li\">如果外部库返回 <code class=\"markup--code markup--li-code\">null</code> 来表示空值，则立即使用 <code class=\"markup--code markup--li-code\">Optional.ofNullable()</code> 以封装它。相信我，以后你会感谢自己的。在程序内部，null 有往上“冒泡”的倾向，所以还是最好从源头上阻止它们。</li>\n<li id=\"4a95\" class=\"graf graf--li graf-after--li\">在返回类型的方法中使用 <code class=\"markup--code markup--li-code\">Optional</code>。这样做可以让你不用阅读 javadoc 就可以获知，值是否可能不存在。</li>\n</ul>\n<h3 id=\"573f\" class=\"graf graf--p graf-after--li\"><strong>额外建议：尽可能使用“Unlift”方法</strong></h3>\n<p id=\"1873\" class=\"graf graf--p graf-after--p\">你应该尽量避免类似的方法：</p>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9d037ba701624146344\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n// AVOID:\r\nCompletableFuture&lt;T&gt; method(CompletableFuture&lt;S&gt; param);\r\n// PREFER: \r\nT method(S param);\r\n\r\n// AVOID:\r\nList&lt;T&gt; method(List&lt;S&gt; param);\r\n// PREFER:\r\nT method(S param);\r\n\r\n// AVOID: \r\nT method(A param1, B param2, Optional&lt;C&gt; param3);\r\n// PREFER:\r\nT method(A param1, B param2, C param3);\r\nT method(A param1, B param2);\r\n// This method is clearly doing two things, it should be two methods\r\n// The same is true for boolean parameters</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9d037ba701624146344-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9d037ba701624146344-17\">17</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-1\"><span class=\"crayon-c\">// AVOID:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-2\"><span class=\"crayon-v\">CompletableFuture</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">CompletableFuture</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-3\"><span class=\"crayon-c\">// PREFER: </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-4\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-6\"><span class=\"crayon-c\">// AVOID:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-7\"><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">T</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">List</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">S</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-8\"><span class=\"crayon-c\">// PREFER:</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-9\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">S</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-10\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-11\"><span class=\"crayon-c\">// AVOID: </span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-12\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Optional</span><span class=\"crayon-o\">&lt;</span><span class=\"crayon-v\">C</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-13\"><span class=\"crayon-c\">// PREFER:</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-14\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">C</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param3</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-15\"><span class=\"crayon-i\">T</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">method</span><span class=\"crayon-sy\">(</span><span class=\"crayon-i\">A</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param1</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">B</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">param2</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9d037ba701624146344-16\"><span class=\"crayon-c\">// This method is clearly doing two things, it should be two methods</span></div><div class=\"crayon-line\" id=\"crayon-5ba9d037ba701624146344-17\"><span class=\"crayon-c\">// The same is true for boolean parameters</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0025 seconds] -->\r\n<p>所有要避免的方法有什么共同点？他们都使用容器对象，比如 Optional，List 或 Task 作为方法的参数。当返回类型是同一类型的容器（即，一个参数的方法采用 Optional 并返回一个 Optional），情况会变得更糟糕。</p>\n<p id=\"3eb8\" class=\"graf graf--p graf-after--p\">为什么？</p>\n<p>相比 ① <code class=\"markup--code markup--p-code\">Promise&lt;A&gt; method(Promise&lt;B&gt; param)</code>，② <code class=\"markup--code markup--p-code\">A method(B param) </code>更具有灵活性。</p>\n<p>如果你有 <code class=\"markup--code markup--p-code\">Promise&lt;B&gt;</code>，那么你可以使用 ①，也可以通过  <code class=\"markup--code markup--p-code\">.map</code> 函数“提升（lifting）” （比如 <code class=\"markup--code markup--p-code\">promise.map(method)</code>）来使用 ②.</p>\n<p>但是，如果你只有 B，那么你可以很容易地使用 ②，却不能使用 ①，很明显，② 是一个更灵活的选择。</p>\n<p>我喜欢称之为“Unlift”，因为它与普通函数的实用方法“Lift”恰好相反。应用这些重写能使方法更灵活，调用更轻松。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113741\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113741votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113741\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i>  收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">飞哥的咖啡</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2016/09/9667abaa540914200edd449974fb5538.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            I'm OUT, never IN.        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/zhj318\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/zhj318/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/zhj318/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 50</a> · <a title=\"QQ：574375911\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/72fd692cdd9ccd44d3da74f6eda1119635b48c27.jpg"}
{"url_object_id": "4982221dc7233a7fb52e97b15b7f65e8", "title": ["IT 职场新人碰到的几个常见误区"], "url": "http://blog.jobbole.com/112038/", "create_date": "2018/03/29", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3gy1fptsk9tvx8j20go0b441z.jpg"], "praise_nums": "2", "comment_nums": 6, "fav_nums": 7, "tags": "职场,职场", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a target=\"_blank\" href=\"https://www.cnblogs.com/sankt/p/8658028.html\">沐榕休</a>   </div><p>自己工作 10+ 年了，大概 5 年前从技术转管理后，多少还是发现一些职场新人职业发展的问题。</p>\n<p>表现惊艳的新人肯定有，这种人往往在学校里面或者进入职场后就养成了一些非常良好的做事方式和工作习惯，工作效率高，产出多，甚至很短时间内就可以带新人，年度最佳新人当之无愧。</p>\n<p>然而表现不到位的似乎更多一些，这些员工工作时间短（比如说应届毕业生或者不到两年）尤其性格内向的往往容易掉入错误泥潭，无法自拔，而这些错误的行为会对未来的发展造成非常负面的影响，从而导致职场发展往失败的道路上越走越远。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fptsk9tvx8j20go0b441z.jpg\"></p>\n<p>我分别从以下角度来阐述一下，</p>\n<h3>1. 不愿意和同事沟通，不愿意向同事多学习</h3>\n<p>这种员工大多比较内向或者性情有点高冷，须不知三人行，必有我师。多向同事学习，互通有无，对自己以后的发展有百利而无一害。有导师制或者老员工带，情况或许会有所改善，但如果内因没有改变，最终效果依旧不容乐观。</p>\n<p>技术开发工作中遇到一些技术难题非常正常，当然独立思考固然可贵，但是公司项目往往有一定的时间限制，优先解决问题永远放在第一位，而不是一个人在那里苦苦挣扎和搜索解决方案。如果时间压力不大，多思考一下也未尝不可。考虑到交付压力，这个时候就需要积极和同事，技术经理沟通，寻找解决思路，通常情况下，积极的沟通好过自己的单打独斗。也许同事或者老板的一句话，就应了那据古诗，山重水复疑无路，柳暗花明又一村。与此同时也和同事建立了更好的友谊，在老板心里也留下了做事有方法的好印象。</p>\n<h3>2.视野狭窄，只关注自己的一亩三分地，囿于角色</h3>\n<p>这种情况其实在职场中多见不仅是初级程序员，甚至工作五年以上的程序员也有类似的问题，不是自己的事情不闻不问，而且危害更大。</p>\n<p>公司项目往往大而全，如果仅仅专注自己的那个角落，那么永远都是只见树木，不见森林。</p>\n<p>我相信没有老板会介意下面的程序员多承担一些责任，多做一些事情，最后给项目组多一些产出。</p>\n<p>既然老板不介意，那么就应该大胆的跳出自己的职责范围，多看看公司的其他项目，丰富自己的行业知识。</p>\n<p>职责外的事情，帮的上的不要躲避,，努力承担更多的东西。帮助别人就是提高自己，教学相长就是这个意思。况且你这次帮了别人，下次你的项目紧或者遇到技术难题了，受助之人肯定投桃报李，这样就形成了良性互助氛围，整个项目组的产出也同步提升了。</p>\n<p>一般来说，公司要提升一个人，最好的策略就是先让候选人做一些将来职位才需要做的事情。做的好，理所当然就要提拔。做的不好，则可以提前发现该员工的问题，暂缓提拔，需要多考察一段时间。这样的试错成本毫无疑问是最低的。</p>\n<h3>3.格局太小，对项目以外的技术视而不见，知识面陈旧，匮乏，技能极其单一</h3>\n<p>这里其实谈到了整个IT行业的问题，技术发展太快了。主要还是一个持续提升竞争力的一个话题。</p>\n<p>今天还是桌面开发，明天web开发就成为主流。</p>\n<p>好不容易掌握了关系型数据库，No-SQL成为主流。</p>\n<p>费了九牛二虎之力，熟练掌握Java, C#等静态语言，发现动态语言GO, Python成为云计算，机器学习的标配。</p>\n<p>移动开发昨天还是Object-C, Java, 今天就变成Swift, Kotlin。</p>\n<p> </p>\n<p>当然这里不是说让大家紧跟潮流，扼住时尚。那样做除了疲于奔命，累死在工作台，没有其他的结果。</p>\n<p>其实只要选择一个方向，纵深学习和积累，必有所成。</p>\n<p>比如说，你熟悉 Java, 那么学习 Kotlin 绝对驾轻就熟。</p>\n<p>你有扎实的关系型数据库基础，那么掌握 MangoDB 肯定是件轻而易举的事情。</p>\n<p>编成思想和解决问题的思路都是相通的，平时的学习和工作中要善于思考，举一反三。并且做到与时俱进，及时更新自己的知识库和技能属性，保持良好的市场竞争力。</p>\n<p>做完事情后多思考，怎样做得更好，站在更好的要求上看问题.</p>\n<p>我举两个实际案例，</p>\n<blockquote><p>程序员A在某国企里面，持续开发 Windows Form, 拖拉控件为主，对SQL Server数据库增删改查，时间长达五年之久，突然有一天打算离职，看看新的机会，以为有五年工作经验，可以很轻松找一个更好的工作。但是实际上求职之路异常艰辛，名义上的五年工作经验，其实就是极其单一的技能重复使用了五年。而且大环境也变了，主流已经是web开发，移动开发了。因为没有及时更新自己的知识库和技能储备，那么真要跳槽的时候可能已经跳不动了。</p>\n<p>程序员B在某外企，氛围比较安逸轻松，项目节奏慢，看似也作了不少项目，但做的项目几乎比较类似，难度一般，涉及面挺广，但技术点都是蜻蜓点水，浅尝辄止。这样过了三年，其实积累也是比较松散，知识的深度没有，核心技能并没有养成。</p></blockquote>\n<h3>4.对未来没有想法，不考虑三五年自己要做什么</h3>\n<p>作者本人就犯过类似的错误，幡然醒悟的时候，三年时间已经过去了。</p>\n<p>程序员的职业生涯里面最初的三年其实是一个非常重要的打磨和规划时期，如果在迷茫中度过，那么事后想起肯定会扼腕叹息，奈何流水已经东去，再无复返之理。</p>\n<p>有目标，而没有具体的计划，那么就是一个愿景而已。</p>\n<p>建议不管是初级还是高级程序员，都应该积极向前辈或者直属老板沟通，看看他们有没有值得借鉴的规划和建议。</p>\n<p>职场大忌就是被动等待命运的安排，作者本人也是在职业生涯初期等待老板来帮我规划未来，到现在为止，十年过去了，也没有等到。。。</p>\n<p>所以老板不会主动帮助你规划未来，最重要的事情还是自己对自身的要求和期望。</p>\n<p> </p>\n<h3>5.没有意识到是给自己打工还是公司打工</h3>\n<p>这也是一个非常好的话题，很多人都没有想明白，甚至包括一些工作十年之久的程序员。</p>\n<p>想明白这一点，工作积极性明显就会好太多。自我驱动, 让工作更加有趣和有意义。</p>\n<p>国内知名的互联网公司大老板说过一句话，非常值得深思。</p>\n<p>“我每年付你20万，五年也就是100万。如果你在这里混日子，那么最后吃亏的肯定是你。你的五年青春就只值100万吗？”</p>\n<p>所以职场新人的主人翁意识一定要加强，你要持续提升自己的能力，持续强化自己创造价值的能力。</p>\n<p>举个例子，比如说现在公司支付你20万每年，那么你应该有目标能给公司带来远超过20万的收益，多多益善。</p>\n<p>你有这个能力，公司肯定也会对你相应回报。如果公司不给你升职加薪，那么一走了之，潇洒痛快。优质的人才从来都是抢着要。</p>\n<h3>6.不愿意走出舒适区域，不敢尝试新的东西</h3>\n<p>这点倒是因人而异，不可强求。这个话题其实有点广义。</p>\n<p>如果你在某个方向做的非常好，而且回报也不错，那么不愿意涉足其他领域也无可厚非。</p>\n<p>这个世界唯一不变的东西就是世界一直在改变。今天还有的岗位，明天也许就要消失。世界要抛弃你，都不会打一声招呼。</p>\n<blockquote><p>举个例子，你在公司是SQL Server或者Oracle专家，但是公司计划转非关系型数据库，如果你害怕改变甚至拒绝改变，那么意味着你可能要错过另外一个全新的数据存储平台。进而错过很多机会，而那些勇于接受变化，顺应趋势的人肯定会获得更好的时代回报。</p></blockquote>\n<p>又比如说，你现在用的技术在日常项目中都刚好够用，那么从改善用户体验和使用更加主流的技术角度看，是不是应该要尝试一些新的东西，同时也刷新了自己的技术栈，一举两得，何乐而不为呢？</p>\n<blockquote><p>还有一个例子是一位资深程序员习惯了长期的慢节奏的工作氛围，因为公司改组被裁员，不过自身条件不错，很快就加入国内一家一线互联网公司，但是完全适应不了互联网快节奏，工作一段时间就以公司管理”混乱”，战略规划”经常”改变为借口离职了，接下来很长一段时间找不到一个合适自己的工作，加上中年已到，如果自身不积极调整，接下来的工作和生活肯定困难重重。</p></blockquote>\n<h3>总结</h3>\n<p>最后再简单小结一下，职场新人需要做的就是从小事做起，学会吃亏，以结果为目标导向，日常工作中积极和同事，老板沟通。</p>\n<p>工作中要善于总结方法，经常更新问题的思考模式，对职业负责，对目标负责，对自己负责，脚踏实地，主动找事情做，而不是被动等事情来找你。</p>\n<p>相信职场新人如果能成功避开上面说的几个误区，那么在职业发展道路上就可以少走一些弯路，少犯一些错误，从而更快地实现自己的小目标。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112038\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112038votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112038\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 6 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/031407902bdeff19a2af7d3163aefed119d82c52.jpg"}
{"url_object_id": "5fc768fb9e1b4db74a5920ff62c4216a", "title": ["每个系统管理员都要知道的 30 个 Linux 系统监控工具"], "url": "http://blog.jobbole.com/113681/", "create_date": "2018/02/24", "front_image_url": ["https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003604wd2215mdgd5i1g2y.jpg"], "praise_nums": "2", "comment_nums": 1, "fav_nums": 7, "tags": "IT技术,Linux", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://www.cyberciti.biz/tips/top-linux-monitoring-tools.html\">Vivek Gite</a>   译文出处：<a target=\"_blank\" href=\"https://linux.cn/article-9373-1.html\">jessie-pang</a>   </div><p><img src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003604wd2215mdgd5i1g2y.jpg\"></p>\n<p>您需要监控 Linux 服务器的性能吗？试试用这些内置命令和附加工具吧！大多数 Linux 发行版都附带了大量的监控工具。这些工具提供了获取系统活动的相关指标。您可以使用这些工具来查找性能问题的可能原因。本文提到的是一些基本的命令，用于系统分析和服务器调试等，例如：</p>\n<ol>\n<li>找出系统瓶颈</li>\n<li>磁盘（存储）瓶颈</li>\n<li>CPU 和内存瓶颈</li>\n<li>网络瓶颈</li>\n</ol>\n<h3 id=\"toc_1\">1. top – 进程活动监控命令</h3>\n<p><code>top</code> 命令会显示 Linux 的进程。它提供了一个运行中系统的实时动态视图，即实际的进程活动。默认情况下，它显示在服务器上运行的 CPU 占用率最高的任务，并且每五秒更新一次。</p>\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003617yrapgeguzhzegrjm.jpg\" alt=\"\"></p>\n<p style=\"text-align: center\"><em>图 01：Linux top 命令</em></p>\n<h4 id=\"toc_2\">top 的常用快捷键</h4>\n<p>常用快捷键列表：</p>\n<table>\n<thead>\n<tr>\n<th>快捷键</th>\n<th>用法</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td><code>t</code></td>\n<td>是否显示汇总信息</td>\n</tr>\n<tr>\n<td><code>m</code></td>\n<td>是否显示内存信息</td>\n</tr>\n<tr>\n<td><code>A</code></td>\n<td>根据各种系统资源的利用率对进程进行排序，有助于快速识别系统中性能不佳的任务。</td>\n</tr>\n<tr>\n<td><code>f</code></td>\n<td>进入 <code>top</code> 的交互式配置屏幕，用于根据特定的需求而设置 <code>top</code> 的显示。</td>\n</tr>\n<tr>\n<td><code>o</code></td>\n<td>交互式地调整 <code>top</code> 每一列的顺序。</td>\n</tr>\n<tr>\n<td><code>r</code></td>\n<td>调整优先级（<code>renice</code>）</td>\n</tr>\n<tr>\n<td><code>k</code></td>\n<td>杀掉进程（<code>kill</code>）</td>\n</tr>\n<tr>\n<td><code>z</code></td>\n<td>切换彩色或黑白模式</td>\n</tr>\n</tbody>\n</table>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/tips/how-do-i-find-out-linux-cpu-utilization.html\">Linux 如何查看 CPU 利用率？</a></p>\n<h3 id=\"toc_3\">2. vmstat – 虚拟内存统计</h3>\n<p><code>vmstat</code> 命令报告有关进程、内存、分页、块 IO、中断和 CPU 活动等信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41aa741732483\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# vmstat 3\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41aa741732483-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41aa741732483-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41aa741732483-1\"><span class=\"crayon-p\"># vmstat 3</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41aa741732483-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41b7307107458\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nprocs -----------memory---------- ---swap-- -----io---- --system-- -----cpu------\r\n r b swpd free buff cache si so bi bo in cs us sy id wa st\r\n 0 0 0 2540988 522188 5130400 0 0 2 32 4 2 4 1 96 0 0\r\n 1 0 0 2540988 522188 5130400 0 0 0 720 1199 665 1 0 99 0 0\r\n 0 0 0 2540956 522188 5130400 0 0 0 0 1151 1569 4 1 95 0 0\r\n 0 0 0 2540956 522188 5130500 0 0 0 6 1117 439 1 0 99 0 0\r\n 0 0 0 2540940 522188 5130512 0 0 0 536 1189 932 1 0 98 0 0\r\n 0 0 0 2538444 522188 5130588 0 0 0 0 1187 1417 4 1 96 0 0\r\n 0 0 0 2490060 522188 5130640 0 0 0 18 1253 1123 5 1 94 0 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41b7307107458-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41b7307107458-1\"><span class=\"crayon-v\">procs</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">memory</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">swap</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">io</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-v\">system</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cpu</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41b7307107458-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-i\">r</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">swpd </span><span class=\"crayon-e\">free </span><span class=\"crayon-e\">buff </span><span class=\"crayon-e\">cache </span><span class=\"crayon-e\">si </span><span class=\"crayon-e\">so </span><span class=\"crayon-e\">bi </span><span class=\"crayon-e\">bo </span><span class=\"crayon-st\">in</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">cs </span><span class=\"crayon-e\">us </span><span class=\"crayon-e\">sy </span><span class=\"crayon-e\">id </span><span class=\"crayon-e\">wa </span><span class=\"crayon-i\">st</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41b7307107458-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2540988</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130400</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41b7307107458-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2540988</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130400</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">720</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1199</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">665</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41b7307107458-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2540956</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130400</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1151</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1569</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41b7307107458-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2540956</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130500</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1117</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">439</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">99</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41b7307107458-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2540940</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130512</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">536</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1189</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">932</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">98</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41b7307107458-8\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2538444</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130588</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1187</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1417</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41b7307107458-9\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2490060</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">522188</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5130640</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1253</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1123</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">94</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41b7307107458-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0055 seconds] -->\r\n<p></p>\n<h4 id=\"toc_4\">显示 Slab 缓存的利用率</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41bb378857573\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# vmstat -m\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41bb378857573-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41bb378857573-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41bb378857573-1\"><span class=\"crayon-p\"># vmstat -m</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41bb378857573-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_5\">获取有关活动和非活动内存页面的信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41bf455526771\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# vmstat -a\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41bf455526771-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41bf455526771-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41bf455526771-1\"><span class=\"crayon-p\"># vmstat -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41bf455526771-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>相关链接：<a href=\"https://www.cyberciti.biz/tips/linux-resource-utilization-to-detect-system-bottlenecks.html\">如何查看 Linux 的资源利用率从而找到系统瓶颈？</a></p>\n<h3 id=\"toc_6\">3. w – 找出登录的用户以及他们在做什么</h3>\n<p><a title=\"See Linux/Unix w command examples for more info\" href=\"https://www.cyberciti.biz/faq/unix-linux-w-command-examples-syntax-usage-2/\">w 命令</a> 显示了当前登录在该系统上的用户及其进程。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41c2219672036\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# w username\r\n# w vivek\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c2219672036-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41c2219672036-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c2219672036-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c2219672036-1\"><span class=\"crayon-p\"># w username</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41c2219672036-2\"><span class=\"crayon-p\"># w vivek</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c2219672036-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41c5094569687\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n 17:58:47 up 5 days, 20:28, 2 users, load average: 0.36, 0.26, 0.24\r\nUSER TTY FROM LOGIN@ IDLE JCPU PCPU WHAT\r\nroot pts/0 10.1.3.145 14:55 5.00s 0.04s 0.02s vim /etc/resolv.conf\r\nroot pts/1 10.1.3.145 17:43 0.00s 0.03s 0.00s w\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c5094569687-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41c5094569687-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c5094569687-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41c5094569687-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c5094569687-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c5094569687-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">58</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">47</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">20</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">users</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.36</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.26</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.24</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41c5094569687-2\"><span class=\"crayon-e\">USER </span><span class=\"crayon-e\">TTY </span><span class=\"crayon-e\">FROM </span><span class=\"crayon-v\">LOGIN</span><span class=\"crayon-sy\">@</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">IDLE </span><span class=\"crayon-e\">JCPU </span><span class=\"crayon-e\">PCPU </span><span class=\"crayon-e\">WHAT</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c5094569687-3\"><span class=\"crayon-e\">root </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.1.3.145</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">55</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5.00s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">vim</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">etc</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">resolv</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">conf</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41c5094569687-4\"><span class=\"crayon-e\">root </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">10.1.3.145</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">17</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">43</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03s</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00s</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">w</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c5094569687-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0223 seconds] -->\r\n<p></p>\n<h3 id=\"toc_7\">4. uptime – Linux 系统运行了多久</h3>\n<p><code>uptime</code> 命令可以用来查看服务器运行了多长时间：当前时间、已运行的时间、当前登录的用户连接数，以及过去 1 分钟、5 分钟和 15 分钟的系统负载平均值。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41c9858573403\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# uptime\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41c9858573403-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41c9858573403-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41c9858573403-1\"><span class=\"crayon-p\"># uptime</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41c9858573403-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0019 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41ce009239976\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n 18:02:41 up 41 days, 23:42, 1 user, load average: 0.00, 0.00, 0.00\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41ce009239976-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41ce009239976-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41ce009239976-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">18</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">up</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">41</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">days</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">23</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">42</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">user</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">load </span><span class=\"crayon-v\">average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41ce009239976-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p><code>1</code> 可以被认为是最佳负载值。不同的系统会有不同的负载：对于单核 CPU 系统来说，<code>1</code> 到 <code>3</code> 的负载值是可以接受的；而对于 SMP（对称多处理）系统来说，负载可以是 <code>6</code> 到 <code>10</code>。</p>\n<h3 id=\"toc_8\">5. ps – 显示系统进程</h3>\n<p><code>ps</code> 命令显示当前运行的进程。要显示所有的进程，请使用 <code>-A</code> 或 <code>-e</code> 选项：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41d2980852829\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -A\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d2980852829-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d2980852829-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d2980852829-1\"><span class=\"crayon-p\"># ps -A</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d2980852829-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41d5329176825\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n PID TTY TIME CMD\r\n 1 ? 00:00:02 init\r\n 2 ? 00:00:02 migration/0\r\n 3 ? 00:00:01 ksoftirqd/0\r\n 4 ? 00:00:00 watchdog/0\r\n 5 ? 00:00:00 migration/1\r\n 6 ? 00:00:15 ksoftirqd/1\r\n....\r\n.....\r\n 4881 ? 00:53:28 java\r\n 4885 tty1 00:00:00 mingetty\r\n 4886 tty2 00:00:00 mingetty\r\n 4887 tty3 00:00:00 mingetty\r\n 4888 tty4 00:00:00 mingetty\r\n 4891 tty5 00:00:00 mingetty\r\n 4892 tty6 00:00:00 mingetty\r\n 4893 ttyS1 00:00:00 agetty\r\n12853 ? 00:00:00 cifsoplockd\r\n12854 ? 00:00:00 cifsdnotifyd\r\n14231 ? 00:10:34 lighttpd\r\n14232 ? 00:00:00 php-cgi\r\n54981 pts/0 00:00:00 vim\r\n55465 ? 00:00:00 php-cgi\r\n55546 ? 00:00:00 bind9-snmp-stat\r\n55704 pts/1 00:00:00 ps\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-25\">25</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d5329176825-26\">26</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PID </span><span class=\"crayon-e\">TTY </span><span class=\"crayon-e\">TIME </span><span class=\"crayon-i\">CMD</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-2\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">init</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-3\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">02</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">migration</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">01</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-5\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">watchdog</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-6\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">migration</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-7\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">15</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ksoftirqd</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-8\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-9\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-10\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4881</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">53</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">java</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-11\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4885</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-12\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4886</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-13\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4887</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-14\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4888</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-15\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4891</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-16\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4892</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">tty6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">mingetty</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-17\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4893</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ttyS1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">agetty</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-18\"><span class=\"crayon-cn\">12853</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cifsoplockd</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-19\"><span class=\"crayon-cn\">12854</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">cifsdnotifyd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-20\"><span class=\"crayon-cn\">14231</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">10</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">34</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">lighttpd</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-21\"><span class=\"crayon-cn\">14232</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">cgi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-22\"><span class=\"crayon-cn\">54981</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vim</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-23\"><span class=\"crayon-cn\">55465</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">cgi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-24\"><span class=\"crayon-cn\">55546</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">?</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">bind9</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">snmp</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">stat</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d5329176825-25\"><span class=\"crayon-cn\">55704</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">pts</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">ps</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d5329176825-26\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0062 seconds] -->\r\n<p><code>ps</code> 与 <code>top</code> 类似，但它提供了更多的信息。</p>\n<h4 id=\"toc_9\">显示长输出格式</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41d9508775991\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -Al\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41d9508775991-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41d9508775991-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41d9508775991-1\"><span class=\"crayon-p\"># ps -Al</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41d9508775991-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>显示完整输出格式（它将显示传递给进程的命令行参数）：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41dc099120939\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -AlF\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41dc099120939-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41dc099120939-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41dc099120939-1\"><span class=\"crayon-p\"># ps -AlF</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41dc099120939-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_10\">显示线程（轻量级进程（LWP）和线程的数量（NLWP））</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41df390778064\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -AlFH\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41df390778064-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41df390778064-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41df390778064-1\"><span class=\"crayon-p\"># ps -AlFH</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41df390778064-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_11\">在进程后显示线程</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41e2929897365\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -AlLm\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41e2929897365-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41e2929897365-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41e2929897365-1\"><span class=\"crayon-p\"># ps -AlLm</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41e2929897365-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_12\">显示系统上所有的进程</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41e6584882519\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps ax\r\n# ps axu\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41e6584882519-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41e6584882519-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41e6584882519-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41e6584882519-1\"><span class=\"crayon-p\"># ps ax</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41e6584882519-2\"><span class=\"crayon-p\"># ps axu</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41e6584882519-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_13\">显示进程树</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41e9039463851\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -ejH\r\n# ps axjf\r\n# pstree\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41e9039463851-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41e9039463851-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41e9039463851-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41e9039463851-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41e9039463851-1\"><span class=\"crayon-p\"># ps -ejH</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41e9039463851-2\"><span class=\"crayon-p\"># ps axjf</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41e9039463851-3\"><span class=\"crayon-p\"># pstree</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41e9039463851-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_14\">显示进程的安全信息</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41ec917289911\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -eo euser,ruser,suser,fuser,f,comm,label\r\n# ps axZ\r\n# ps -eM\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41ec917289911-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41ec917289911-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41ec917289911-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41ec917289911-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41ec917289911-1\"><span class=\"crayon-p\"># ps -eo euser,ruser,suser,fuser,f,comm,label</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41ec917289911-2\"><span class=\"crayon-p\"># ps axZ</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41ec917289911-3\"><span class=\"crayon-p\"># ps -eM</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41ec917289911-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_15\">显示指定用户（如 vivek）运行的进程</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41ef013338971\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -U vivek -u vivek u\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41ef013338971-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41ef013338971-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41ef013338971-1\"><span class=\"crayon-p\"># ps -U vivek -u vivek u</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41ef013338971-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_16\">设置用户自定义的输出格式</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41f2492152128\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm\r\n# ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm\r\n# ps -eopid,tt,user,fname,tmout,f,wchan\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41f2492152128-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41f2492152128-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41f2492152128-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41f2492152128-4\">4</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41f2492152128-1\"><span class=\"crayon-p\"># ps -eo pid,tid,class,rtprio,ni,pri,psr,pcpu,stat,wchan:14,comm</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41f2492152128-2\"><span class=\"crayon-p\"># ps axo stat,euid,ruid,tty,tpgid,sess,pgrp,ppid,pid,pcpu,comm</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41f2492152128-3\"><span class=\"crayon-p\"># ps -eopid,tt,user,fname,tmout,f,wchan</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41f2492152128-4\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p></p>\n<h4 id=\"toc_17\">显示某进程（如 lighttpd）的 PID</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41f5718061353\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -C lighttpd -o pid=\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41f5718061353-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41f5718061353-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41f5718061353-1\"><span class=\"crayon-p\"># ps -C lighttpd -o pid=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41f5718061353-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41f9750203636\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pgrep lighttpd\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41f9750203636-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41f9750203636-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41f9750203636-1\"><span class=\"crayon-p\"># pgrep lighttpd</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41f9750203636-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac41fe399685629\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pgrep -u vivek php-cgi\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac41fe399685629-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac41fe399685629-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac41fe399685629-1\"><span class=\"crayon-p\"># pgrep -u vivek php-cgi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac41fe399685629-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_18\">显示指定 PID（如 55977）的进程名称</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4201657906225\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -p 55977 -o comm=\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4201657906225-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4201657906225-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4201657906225-1\"><span class=\"crayon-p\"># ps -p 55977 -o comm=</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4201657906225-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h4 id=\"toc_19\">找出占用内存资源最多的前 10 个进程</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4204834291392\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -auxf | sort -nr -k 4 | head -10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4204834291392-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4204834291392-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4204834291392-1\"><span class=\"crayon-p\"># ps -auxf | sort -nr -k 4 | head -10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4204834291392-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h4 id=\"toc_20\">找出占用 CPU 资源最多的前 10 个进程</h4>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4207787588700\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ps -auxf | sort -nr -k 3 | head -10\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4207787588700-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4207787588700-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4207787588700-1\"><span class=\"crayon-p\"># ps -auxf | sort -nr -k 3 | head -10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4207787588700-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/show-all-running-processes-in-linux/\">显示 Linux 上所有运行的进程</a></p>\n<h3 id=\"toc_21\">6. free – 内存使用情况</h3>\n<p><code>free</code> 命令显示了系统的可用和已用的物理内存及交换内存的总量，以及内核用到的缓存空间。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac420b065794790\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# free\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac420b065794790-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac420b065794790-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac420b065794790-1\"><span class=\"crayon-p\"># free</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac420b065794790-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac420e470242888\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n total used free shared buffers cached\r\nMem: 12302896 9739664 2563232 0 523124 5154740\r\n-/+ buffers/cache: 4061800 8241096\r\nSwap: 1052248 0 1052248\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac420e470242888-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac420e470242888-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac420e470242888-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac420e470242888-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac420e470242888-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac420e470242888-1\"><span class=\"crayon-h\"> </span><span class=\"crayon-e\">total </span><span class=\"crayon-e\">used </span><span class=\"crayon-e\">free </span><span class=\"crayon-e\">shared </span><span class=\"crayon-e\">buffers </span><span class=\"crayon-e\">cached</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac420e470242888-2\"><span class=\"crayon-v\">Mem</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">12302896</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">9739664</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2563232</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">523124</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5154740</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac420e470242888-3\"><span class=\"crayon-o\">-</span><span class=\"crayon-o\">/</span><span class=\"crayon-o\">+</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">buffers</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">cache</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4061800</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8241096</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac420e470242888-4\"><span class=\"crayon-v\">Swap</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1052248</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1052248</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac420e470242888-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0011 seconds] -->\r\n<p>相关链接： 1. <a href=\"https://www.cyberciti.biz/faq/linux-check-the-size-of-pagesize/\">获取 Linux 的虚拟内存的内存页大小（PAGESIZE）</a> 2. <a href=\"https://www.cyberciti.biz/faq/cpu-usage-limiter-for-linux/\">限制 Linux 每个进程的 CPU 使用率</a> 3. <a href=\"https://www.cyberciti.biz/tips/how-much-ram-does-my-linux-system.html\">我的 Ubuntu 或 Fedora Linux 系统有多少内存？</a></p>\n<h3 id=\"toc_22\">7. iostat – CPU 平均负载和磁盘活动</h3>\n<p><code>iostat</code> 命令用于汇报 CPU 的使用情况，以及设备、分区和网络文件系统（NFS）的 IO 统计信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4211144041487\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# iostat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4211144041487-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4211144041487-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4211144041487-1\"><span class=\"crayon-p\"># iostat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4211144041487-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4215759641187\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLinux 2.6.18-128.1.14.el5 (www03.nixcraft.in)   06/26/2009\r\n\r\navg-cpu: %user %nice %system %iowait %steal %idle\r\n 3.50 0.09 0.51 0.03 0.00 95.86\r\n\r\nDevice: tps Blk_read/s Blk_wrtn/s Blk_read Blk_wrtn\r\nsda 22.04 31.88 512.03 16193351 260102868\r\nsda1 0.00 0.00 0.00 2166 180\r\nsda2 22.04 31.87 512.03 16189010 260102688\r\nsda3 0.00 0.00 0.00 1615 0\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4215759641187-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4215759641187-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4215759641187-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4215759641187-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4215759641187-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4215759641187-11\">11</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-1\"><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.18</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">128.1.14.el5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">www03</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nixcraft</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">in</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">   </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">26</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2009</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4215759641187-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-3\"><span class=\"crayon-v\">avg</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">cpu</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">nice</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">system</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">iowait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">steal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">idle</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4215759641187-4\"><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.50</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.51</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.86</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4215759641187-6\"><span class=\"crayon-v\">Device</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">tps </span><span class=\"crayon-v\">Blk_read</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">Blk_wrtn</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">Blk_read </span><span class=\"crayon-e\">Blk_wrtn</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-7\"><span class=\"crayon-i\">sda</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31.88</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">512.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16193351</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">260102868</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4215759641187-8\"><span class=\"crayon-i\">sda1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2166</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">180</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-9\"><span class=\"crayon-i\">sda2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">22.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">31.87</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">512.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">16189010</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">260102688</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4215759641187-10\"><span class=\"crayon-i\">sda3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1615</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4215759641187-11\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0026 seconds] -->\r\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/howto-linux-track-nfs-client-disk-metrics/\">如何跟踪 Linux 系统的 NFS 目录或磁盘的 IO 负载情况</a></p>\n<h3 id=\"toc_23\">8. sar – 监控、收集和汇报系统活动</h3>\n<p><code>sar</code> 命令用于收集、汇报和保存系统活动信息。要查看网络统计，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4218774589926\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar -n DEV | more\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4218774589926-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4218774589926-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4218774589926-1\"><span class=\"crayon-p\"># sar -n DEV | more</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4218774589926-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>显示 24 日的网络统计：</p>\n<p><code># sar -n DEV -f /var/log/sa/sa24 | more</code></p>\n<p>您还可以使用 <code>sar</code> 显示实时使用情况：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac421b789521874\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# sar 4 5\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421b789521874-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421b789521874-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421b789521874-1\"><span class=\"crayon-p\"># sar 4 5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421b789521874-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac421e547101235\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLinux 2.6.18-128.1.14.el5 (www03.nixcraft.in)       06/26/2009\r\n\r\n06:45:12 PM CPU %user %nice %system %iowait %steal %idle\r\n06:45:16 PM all 2.00 0.00 0.22 0.00 0.00 97.78\r\n06:45:20 PM all 2.07 0.00 0.38 0.03 0.00 97.52\r\n06:45:24 PM all 0.94 0.00 0.28 0.00 0.00 98.78\r\n06:45:28 PM all 1.56 0.00 0.22 0.00 0.00 98.22\r\n06:45:32 PM all 3.53 0.00 0.25 0.03 0.00 96.19\r\nAverage: all 2.02 0.00 0.27 0.01 0.00 97.70\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421e547101235-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421e547101235-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421e547101235-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421e547101235-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421e547101235-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421e547101235-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421e547101235-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421e547101235-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac421e547101235-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac421e547101235-10\">10</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421e547101235-1\"><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.18</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">128.1.14.el5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">www03</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nixcraft</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">in</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">26</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2009</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421e547101235-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421e547101235-3\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">12</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">nice</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">system</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">iowait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">steal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-i\">idle</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421e547101235-4\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">16</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">97.78</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421e547101235-5\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">20</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.07</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.38</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">97.52</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421e547101235-6\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">24</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.94</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">98.78</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421e547101235-7\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">28</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1.56</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.22</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">98.22</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421e547101235-8\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">45</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">32</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.53</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.25</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.19</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac421e547101235-9\"><span class=\"crayon-v\">Average</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.02</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.27</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">97.70</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac421e547101235-10\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0036 seconds] -->\r\n<p>相关链接：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/tips/howto-write-system-utilization-data-to-file.html\">如何将 Linux 系统资源利用率的数据写入文件中</a></li>\n<li><a href=\"https://www.cyberciti.biz/tips/identifying-linux-bottlenecks-sar-graphs-with-ksar.html\">如何使用 kSar 创建 sar 性能图以找出系统瓶颈</a></li>\n</ul>\n<h3 id=\"toc_24\">9. mpstat – 监控多处理器的使用情况</h3>\n<p><code>mpstat</code> 命令显示每个可用处理器的使用情况，编号从 0 开始。命令 <code>mpstat -P ALL</code> 显示了每个处理器的平均使用率：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4222525210604\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# mpstat -P ALL\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4222525210604-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4222525210604-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4222525210604-1\"><span class=\"crayon-p\"># mpstat -P ALL</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4222525210604-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4229089416938\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nLinux 2.6.18-128.1.14.el5 (www03.nixcraft.in)       06/26/2009\r\n\r\n06:48:11 PM CPU %user %nice %sys %iowait %irq %soft %steal %idle intr/s\r\n06:48:11 PM all 3.50 0.09 0.34 0.03 0.01 0.17 0.00 95.86 1218.04\r\n06:48:11 PM 0 3.44 0.08 0.31 0.02 0.00 0.12 0.00 96.04 1000.31\r\n06:48:11 PM 1 3.10 0.08 0.32 0.09 0.02 0.11 0.00 96.28 34.93\r\n06:48:11 PM 2 4.16 0.11 0.36 0.02 0.00 0.11 0.00 95.25 0.00\r\n06:48:11 PM 3 3.77 0.11 0.38 0.03 0.01 0.24 0.00 95.46 44.80\r\n06:48:11 PM 4 2.96 0.07 0.29 0.04 0.02 0.10 0.00 96.52 25.91\r\n06:48:11 PM 5 3.26 0.08 0.28 0.03 0.01 0.10 0.00 96.23 14.98\r\n06:48:11 PM 6 4.00 0.10 0.34 0.01 0.00 0.13 0.00 95.42 3.75\r\n06:48:11 PM 7 3.30 0.11 0.39 0.03 0.01 0.46 0.00 95.69 76.89\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4229089416938-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4229089416938-13\">13</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-1\"><span class=\"crayon-i\">Linux</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.6.18</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">128.1.14.el5</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">www03</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">nixcraft</span><span class=\"crayon-sy\">.</span><span class=\"crayon-st\">in</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\">       </span><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">26</span><span class=\"crayon-o\">/</span><span class=\"crayon-cn\">2009</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-3\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-v\">CPU</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">user</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">nice</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">sys</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">iowait</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">irq</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">soft</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-v\">steal</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">%</span><span class=\"crayon-e\">idle </span><span class=\"crayon-v\">intr</span><span class=\"crayon-o\">/</span><span class=\"crayon-i\">s</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-4\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">PM </span><span class=\"crayon-i\">all</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.50</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.34</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.17</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.86</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1218.04</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-5\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.44</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.31</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.12</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1000.31</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-6\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.32</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.09</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">34.93</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-7\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.16</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.36</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.25</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-8\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.77</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.38</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.24</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.46</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">44.80</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-9\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2.96</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.07</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.29</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.04</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.02</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.52</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">25.91</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-10\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">5</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.26</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.08</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.28</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">96.23</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">14.98</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-11\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">6</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.10</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.34</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.13</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.42</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.75</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4229089416938-12\"><span class=\"crayon-cn\">06</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">48</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">11</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">PM</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">7</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3.30</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.11</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.39</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.03</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.01</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.46</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0.00</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">95.69</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">76.89</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4229089416938-13\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0170 seconds] -->\r\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/linux-mpstat-command-report-processors-related-statistics/\">多处理器的 Linux 上单独显示每个 CPU 的使用率</a>.</p>\n<h3 id=\"toc_25\">10. pmap – 监控进程的内存使用情况</h3>\n<p><code>pmap</code> 命令用以显示进程的内存映射，使用此命令可以查找内存瓶颈。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac422d540246613\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pmap -d PID\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac422d540246613-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac422d540246613-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac422d540246613-1\"><span class=\"crayon-p\"># pmap -d PID</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac422d540246613-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>显示 PID 为 47394 的进程的内存信息，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4230524257244\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# pmap -d 47394\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4230524257244-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4230524257244-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4230524257244-1\"><span class=\"crayon-p\"># pmap -d 47394</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4230524257244-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4233145704462\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n47394: /usr/bin/php-cgi\r\nAddress Kbytes Mode Offset Device Mapping\r\n0000000000400000 2584 r-x-- 0000000000000000 008:00002 php-cgi\r\n0000000000886000 140 rw--- 0000000000286000 008:00002 php-cgi\r\n00000000008a9000 52 rw--- 00000000008a9000 000:00000 [ anon ]\r\n0000000000aa8000 76 rw--- 00000000002a8000 008:00002 php-cgi\r\n000000000f678000 1980 rw--- 000000000f678000 000:00000 [ anon ]\r\n000000314a600000 112 r-x-- 0000000000000000 008:00002 ld-2.5.so\r\n000000314a81b000 4 r---- 000000000001b000 008:00002 ld-2.5.so\r\n000000314a81c000 4 rw--- 000000000001c000 008:00002 ld-2.5.so\r\n000000314aa00000 1328 r-x-- 0000000000000000 008:00002 libc-2.5.so\r\n000000314ab4c000 2048 ----- 000000000014c000 008:00002 libc-2.5.so\r\n.....\r\n......\r\n..\r\n00002af8d48fd000 4 rw--- 0000000000006000 008:00002 xsl.so\r\n00002af8d490c000 40 r-x-- 0000000000000000 008:00002 libnss_files-2.5.so\r\n00002af8d4916000 2044 ----- 000000000000a000 008:00002 libnss_files-2.5.so\r\n00002af8d4b15000 4 r---- 0000000000009000 008:00002 libnss_files-2.5.so\r\n00002af8d4b16000 4 rw--- 000000000000a000 008:00002 libnss_files-2.5.so\r\n00002af8d4b17000 768000 rw-s- 0000000000000000 000:00009 zero (deleted)\r\n00007fffc95fe000 84 rw--- 00007ffffffea000 000:00000 [ stack ]\r\nffffffffff600000 8192 ----- 0000000000000000 000:00000 [ anon ]\r\nmapped: 933712K writeable/private: 4304K shared: 768000K\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-9\">9</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-10\">10</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-11\">11</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-12\">12</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-13\">13</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-14\">14</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-15\">15</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-16\">16</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-17\">17</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-18\">18</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-19\">19</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-20\">20</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-21\">21</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-22\">22</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-23\">23</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4233145704462-24\">24</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4233145704462-25\">25</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-1\"><span class=\"crayon-cn\">47394</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">usr</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">bin</span><span class=\"crayon-o\">/</span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-e\">cgi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-2\"><span class=\"crayon-e\">Address </span><span class=\"crayon-e\">Kbytes </span><span class=\"crayon-e\">Mode </span><span class=\"crayon-e\">Offset </span><span class=\"crayon-e\">Device </span><span class=\"crayon-i\">Mapping</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-3\"><span class=\"crayon-cn\">0000000000400000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2584</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">cgi</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-4\"><span class=\"crayon-cn\">0000000000886000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">140</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000286000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">cgi</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-5\"><span class=\"crayon-cn\">00000000008a9000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">52</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00000000008a9000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">anon</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-6\"><span class=\"crayon-cn\">0000000000aa8000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">76</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00000000002a8000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">php</span><span class=\"crayon-o\">-</span><span class=\"crayon-i\">cgi</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-7\"><span class=\"crayon-cn\">000000000f678000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1980</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000f678000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">anon</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-8\"><span class=\"crayon-cn\">000000314a600000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">112</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-9\"><span class=\"crayon-cn\">000000314a81b000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000001b000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-10\"><span class=\"crayon-cn\">000000314a81c000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000001c000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">ld</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-11\"><span class=\"crayon-cn\">000000314aa00000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1328</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-12\"><span class=\"crayon-cn\">000000314ab4c000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2048</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000014c000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libc</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-13\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-14\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-15\"><span class=\"crayon-sy\">.</span><span class=\"crayon-sy\">.</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-16\"><span class=\"crayon-cn\">00002af8d48fd000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000006000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">xsl</span><span class=\"crayon-sy\">.</span><span class=\"crayon-i\">so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-17\"><span class=\"crayon-cn\">00002af8d490c000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">40</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">x</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libnss_files</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-18\"><span class=\"crayon-cn\">00002af8d4916000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">2044</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000000a000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libnss_files</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-19\"><span class=\"crayon-cn\">00002af8d4b15000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">r</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000009000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libnss_files</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-20\"><span class=\"crayon-cn\">00002af8d4b16000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000000000000a000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">008</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00002</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">libnss_files</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">2.5.so</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-21\"><span class=\"crayon-cn\">00002af8d4b17000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">768000</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">-</span><span class=\"crayon-v\">s</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00009</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">zero</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">deleted</span><span class=\"crayon-sy\">)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-22\"><span class=\"crayon-cn\">00007fffc95fe000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">84</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">rw</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">00007ffffffea000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">stack</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-23\"><span class=\"crayon-i\">ffffffffff600000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">8192</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">-</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0000000000000000</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">000</span><span class=\"crayon-o\">:</span><span class=\"crayon-cn\">00000</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">anon</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4233145704462-24\"><span class=\"crayon-v\">mapped</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">933712K</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">writeable</span><span class=\"crayon-o\">/</span><span class=\"crayon-m\">private</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">4304K</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">shared</span><span class=\"crayon-o\">:</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">768000K</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4233145704462-25\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0076 seconds] -->\r\n<p>最后一行非常重要：</p>\n<ul>\n<li><code>mapped: 933712K</code> 映射到文件的内存量</li>\n<li><code>writeable/private: 4304K</code> 私有地址空间</li>\n<li><code>shared: 768000K</code> 此进程与其他进程共享的地址空间</li>\n</ul>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/tips/howto-find-memory-used-by-program.html\">使用 pmap 命令查看 Linux 上单个程序或进程使用的内存</a></p>\n<h3 id=\"toc_26\">11. netstat – Linux 网络统计监控工具</h3>\n<p><code>netstat</code> 命令显示网络连接、路由表、接口统计、伪装连接和多播连接等信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4238468692810\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# netstat -tulpn\r\n# netstat -nat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4238468692810-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4238468692810-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4238468692810-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4238468692810-1\"><span class=\"crayon-p\"># netstat -tulpn</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4238468692810-2\"><span class=\"crayon-p\"># netstat -nat</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4238468692810-3\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_27\">12. ss – 网络统计</h3>\n<p><code>ss</code> 命令用于获取套接字统计信息。它可以显示类似于 <code>netstat</code> 的信息。不过 <code>netstat</code> 几乎要过时了，<code>ss</code> 命令更具优势。要显示所有 TCP 或 UDP 套接字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac423e743368642\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ss -t -a\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac423e743368642-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac423e743368642-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac423e743368642-1\"><span class=\"crayon-p\"># ss -t -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac423e743368642-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>或</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4241200201582\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ss -u -a\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4241200201582-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4241200201582-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4241200201582-1\"><span class=\"crayon-p\"># ss -u -a</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4241200201582-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>显示所有带有 SELinux 安全上下文Security Context的 TCP 套接字：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4244304243251\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# ss -t -a -Z\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4244304243251-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4244304243251-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4244304243251-1\"><span class=\"crayon-p\"># ss -t -a -Z</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4244304243251-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>请参阅以下关于 <code>ss</code> 和 <code>netstat</code> 命令的资料：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/tips/linux-investigate-sockets-network-connections.html\">ss：显示 Linux TCP / UDP 网络套接字信息</a></li>\n<li><a href=\"https://www.cyberciti.biz/tips/netstat-command-tutorial-examples.html\">使用 netstat 命令获取有关特定 IP 地址连接的详细信息</a></li>\n</ul>\n<h3 id=\"toc_28\">13. iptraf – 获取实时网络统计信息</h3>\n<p><code>iptraf</code> 命令是一个基于 ncurses 的交互式 IP 网络监控工具。它可以生成多种网络统计信息，包括 TCP 信息、UDP 计数、ICMP 和 OSPF 信息、以太网负载信息、节点统计信息、IP 校验错误等。它以简单的格式提供了以下信息：</p>\n<ul>\n<li>基于 TCP 连接的网络流量统计</li>\n<li>基于网络接口的 IP 流量统计</li>\n<li>基于协议的网络流量统计</li>\n<li>基于 TCP/UDP 端口和数据包大小的网络流量统计</li>\n<li>基于二层地址的网络流量统计</li>\n</ul>\n<p><img class=\"aligncenter\" title=\"Fig.02: General interface statistics: IP traffic statistics by network interface \" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003617vegee3q22m51fng5.png\" alt=\"Fig.02: General interface statistics: IP traffic statistics by network interface \"></p>\n<p style=\"text-align: center\"><em>图 02：常规接口统计：基于网络接口的 IP 流量统计</em></p>\n<p><img class=\"aligncenter\" title=\"Fig.03 Network traffic statistics by TCP connection\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003617afed2848vd2dfufw.png\" alt=\"Fig.03 Network traffic statistics by TCP connection\"></p>\n<p style=\"text-align: center\"><em>图 03：基于 TCP 连接的网络流量统计</em></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/install-iptraf-centos-redhat-fedora-linux/\">在 Centos / RHEL / Fedora Linux 上安装 IPTraf 以获取网络统计信息</a></p>\n<h3 id=\"toc_29\">14. tcpdump – 详细的网络流量分析</h3>\n<p><code>tcpdump</code> 命令是简单的分析网络通信的命令。您需要充分了解 TCP/IP 协议才便于使用此工具。例如，要显示有关 DNS 的流量信息，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4249257861352\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tcpdump -i eth1 'udp port 53'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4249257861352-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4249257861352-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4249257861352-1\"><span class=\"crayon-p\"># tcpdump -i eth1 'udp port 53'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4249257861352-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>查看所有去往和来自端口 80 的 IPv4 HTTP 数据包，仅打印真正包含数据的包，而不是像 SYN、FIN 和仅含 ACK 这类的数据包，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac424c049886040\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tcpdump 'tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac424c049886040-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac424c049886040-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac424c049886040-1\"><span class=\"crayon-p\"># tcpdump 'tcp port 80 and (((ip[2:2] - ((ip[0]&amp;0xf)&lt;&lt;2)) - ((tcp[12]&amp;0xf0)&gt;&gt;2)) != 0)'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac424c049886040-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>显示所有目标地址为 202.54.1.5 的 FTP 会话，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac424f034522349\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tcpdump -i eth1 'dst 202.54.1.5 and (port 21 or 20'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac424f034522349-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac424f034522349-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac424f034522349-1\"><span class=\"crayon-p\"># tcpdump -i eth1 'dst 202.54.1.5 and (port 21 or 20'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac424f034522349-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>打印所有目标地址为 192.168.1.5 的 HTTP 会话：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4254938967307\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tcpdump -ni eth0 'dst 192.168.1.5 and tcp and port http'\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4254938967307-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4254938967307-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4254938967307-1\"><span class=\"crayon-p\"># tcpdump -ni eth0 'dst 192.168.1.5 and tcp and port http'</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4254938967307-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>使用 <a href=\"https://www.cyberciti.biz/faq/linux-unix-bsd-apache-tcpdump-http-packets-sniffing/\">wireshark</a> 查看文件的详细内容，请输入：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4258373780558\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# tcpdump -n -i eth1 -s 0 -w output.txt src or dst port 80\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4258373780558-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4258373780558-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4258373780558-1\"><span class=\"crayon-p\"># tcpdump -n -i eth1 -s 0 -w output.txt src or dst port 80</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4258373780558-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p></p>\n<h3 id=\"toc_30\">15. iotop – I/O 监控</h3>\n<p><code>iotop</code> 命令利用 Linux 内核监控 I/O 使用情况，它按进程或线程的顺序显示 I/O 使用情况。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac425b530495801\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo iotop\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac425b530495801-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac425b530495801-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac425b530495801-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">iotop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac425b530495801-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p>输出示例：</p>\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003617v0k9dgp548dgwd0t.jpg\" alt=\"iotop monitoring linux disk read write IO\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/hardware/linux-iotop-simple-top-like-io-monitor/\">Linux iotop：什么进程在增加硬盘负载</a></p>\n<h3 id=\"toc_31\">16. htop – 交互式的进程查看器</h3>\n<p><code>htop</code> 是一款免费并开源的基于 ncurses 的 Linux 进程查看器。它比 <code>top</code> 命令更简单易用。您无需使用 PID、无需离开 <code>htop</code> 界面，便可以杀掉进程或调整其调度优先级。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac425f693451706\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ htop\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac425f693451706-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac425f693451706-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac425f693451706-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">htop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac425f693451706-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p>输出示例：</p>\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003618lfboctxr5s1zoash.jpg\" alt=\"htop process viewer for Linux\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/centos-redhat-linux-install-htop-command-using-yum/\">CentOS / RHEL：安装 htop——交互式文本模式进程查看器</a></p>\n<h3 id=\"toc_32\">17. atop – 高级版系统与进程监控工具</h3>\n<p><code>atop</code> 是一个非常强大的交互式 Linux 系统负载监控器，它从性能的角度显示最关键的硬件资源信息。您可以快速查看 CPU、内存、磁盘和网络性能。它还可以从进程的级别显示哪些进程造成了相关 CPU 和内存的负载。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4262097703326\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ atop\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4262097703326-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4262097703326-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4262097703326-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">atop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4262097703326-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003618uffd9f955nz8mc9n.jpg\" alt=\"atop Command Line Tools to Monitor Linux Performance\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/centos-redhat-linux-install-atop-command-using-yum/\">CentOS / RHEL：安装 atop 工具——高级系统和进程监控器</a></p>\n<h3 id=\"toc_33\">18. ac 和 lastcomm</h3>\n<p>您一定需要监控 Linux 服务器上的进程和登录活动吧。<code>psacct</code> 或 <code>acct</code> 软件包中包含了多个用于监控进程活动的工具，包括：</p>\n<ol>\n<li><code>ac</code> 命令：显示有关用户连接时间的统计信息</li>\n<li><a title=\"See Linux/Unix lastcomm command examples for more info\" href=\"https://www.cyberciti.biz/faq/linux-unix-lastcomm-command-examples-usage-syntax/\">lastcomm 命令</a>：显示已执行过的命令</li>\n<li><code>accton</code> 命令：打开或关闭进程账号记录功能</li>\n<li><code>sa</code> 命令：进程账号记录信息的摘要</li>\n</ol>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/tips/howto-log-user-activity-using-process-accounting.html\">如何对 Linux 系统的活动做详细的跟踪记录</a></p>\n<h3 id=\"toc_34\">19. monit – 进程监控器</h3>\n<p><code>monit</code> 是一个免费且开源的进程监控软件，它可以自动重启停掉的服务。您也可以使用 Systemd、daemontools 或其他类似工具来达到同样的目的。<a href=\"https://www.cyberciti.biz/faq/how-to-install-and-use-monit-on-ubuntudebian-linux-server/\">本教程演示如何在 Debian 或 Ubuntu Linux 上安装和配置 monit 作为进程监控器</a>。</p>\n<h3 id=\"toc_35\">20. NetHogs – 找出占用带宽的进程</h3>\n<p>NetHogs 是一个轻便的网络监控工具，它按照进程名称（如 Firefox、wget 等）对带宽进行分组。如果网络流量突然爆发，启动 NetHogs，您将看到哪个进程（PID）导致了带宽激增。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4267870221942\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo nethogs\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4267870221942-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4267870221942-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4267870221942-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">nethogs</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4267870221942-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003618dnv8ux8nukoo5nvv.jpg\" alt=\"nethogs linux monitoring tools open source\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/linux-find-out-what-process-is-using-bandwidth/\">Linux：使用 Nethogs 工具查看每个进程的带宽使用情况</a></p>\n<h3 id=\"toc_36\">21. iftop – 显示主机上网络接口的带宽使用情况</h3>\n<p><code>iftop</code> 命令监听指定接口（如 eth0）上的网络通信情况。<a href=\"https://www.cyberciti.biz/tips/linux-display-bandwidth-usage-on-network-interface-by-host.html\">它显示了一对主机的带宽使用情况</a>。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac426c348475140\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ sudo iftop\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac426c348475140-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac426c348475140-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac426c348475140-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-e\">sudo </span><span class=\"crayon-i\">iftop</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac426c348475140-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003618eekdbv23qho62fdk.gif\" alt=\"iftop in action\"></p>\n<h3 id=\"toc_37\">22. vnstat – 基于控制台的网络流量监控工具</h3>\n<p><code>vnstat</code> 是一个简单易用的基于控制台的网络流量监视器，它为指定网络接口保留每小时、每天和每月网络流量日志。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4270823765338\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ vnstat\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4270823765338-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4270823765338-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4270823765338-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">vnstat</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4270823765338-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003619j0qz1eb3gqv43pq3.jpg\" alt=\"vnstat linux network traffic monitor\"></p>\n<p>相关链接：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/tips/linux-display-bandwidth-usage-on-network-interface-by-host.html\">为 ADSL 或专用远程 Linux 服务器保留日常网络流量日志</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/centos-redhat-fedora-linux-install-vnstat-bandwidth-monitor/\">CentOS / RHEL：安装 vnStat 网络流量监控器以保留日常网络流量日志</a></li>\n<li><a href=\"https://www.cyberciti.biz/faq/centos-redhat-fedora-linux-vnstat-php-webinterface-frontend-config/\">CentOS / RHEL：使用 PHP 网页前端接口查看 Vnstat 图表</a></li>\n</ul>\n<h3 id=\"toc_38\">23. nmon – Linux 系统管理员的调优和基准测量工具</h3>\n<p><code>nmon</code> 是 Linux 系统管理员用于性能调优的利器，它在命令行显示 CPU、内存、网络、磁盘、文件系统、NFS、消耗资源最多的进程和分区信息。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4274836637177\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ nmon\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4274836637177-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4274836637177-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4274836637177-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">nmon</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4274836637177-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003619wvfjn0m0fjsmgxwl.jpg\" alt=\"nmon command\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/nmon-performance-analyzer-linux-server-tool/\">安装并使用 nmon 工具来监控 Linux 系统的性能</a></p>\n<h3 id=\"toc_39\">24. glances – 密切关注 Linux 系统</h3>\n<p><code>glances</code> 是一款开源的跨平台监控工具。它在小小的屏幕上提供了大量的信息，还可以工作于客户端-服务器模式下。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac4277835833652\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n$ glances\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac4277835833652-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac4277835833652-2\">2</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac4277835833652-1\"><span class=\"crayon-sy\">$</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">glances</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac4277835833652-2\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0003 seconds] -->\r\n<p><img class=\"aligncenter\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003619rlt3p5pp3ge5jg45.jpg\" alt=\"Glances\"></p>\n<p>相关链接：<a href=\"https://www.cyberciti.biz/faq/linux-install-glances-monitoring-tool/\">Linux：通过 Glances 监控器密切关注您的系统</a></p>\n<h3 id=\"toc_40\">25. strace – 查看系统调用</h3>\n<p>想要跟踪 Linux 系统的调用和信号吗？试试 <code>strace</code> 命令吧。它对于调试网页服务器和其他服务器问题很有用。了解如何利用其 <a href=\"https://www.cyberciti.biz/tips/linux-strace-command-examples.html\">追踪进程</a> 并查看它在做什么。</p>\n<h3 id=\"toc_41\">26. /proc 文件系统 – 各种内核信息</h3>\n<p><code>/proc</code> 文件系统提供了不同硬件设备和 Linux 内核的详细信息。更多详细信息，请参阅 <a href=\"https://www.cyberciti.biz/files/linux-kernel/Documentation/filesystems/proc.txt\">Linux 内核 /proc</a> 文档。常见的 <code>/proc</code> 例子：</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9ce8ac427b786253316\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n# cat /proc/cpuinfo\r\n# cat /proc/meminfo\r\n# cat /proc/zoneinfo\r\n# cat /proc/mounts\r\n</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac427b786253316-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac427b786253316-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac427b786253316-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9ce8ac427b786253316-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9ce8ac427b786253316-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac427b786253316-1\"><span class=\"crayon-p\"># cat /proc/cpuinfo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac427b786253316-2\"><span class=\"crayon-p\"># cat /proc/meminfo</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac427b786253316-3\"><span class=\"crayon-p\"># cat /proc/zoneinfo</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9ce8ac427b786253316-4\"><span class=\"crayon-p\"># cat /proc/mounts</span></div><div class=\"crayon-line\" id=\"crayon-5ba9ce8ac427b786253316-5\"> </div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0004 seconds] -->\r\n<p></p>\n<h3 id=\"toc_42\">27. Nagios – Linux 服务器和网络监控</h3>\n<p><a href=\"http://www.nagios.org/\">Nagios</a> 是一款普遍使用的开源系统和网络监控软件。您可以轻松地监控所有主机、网络设备和服务，当状态异常和恢复正常时它都会发出警报通知。<a href=\"http://fannagioscd.sourceforge.net/drupal/\">FAN</a> 是“全自动 Nagios”的缩写。FAN 的目标是提供包含由 Nagios 社区提供的大多数工具包的 Nagios 安装。FAN 提供了标准 ISO 格式的 CD-Rom 镜像，使安装变得更加容易。除此之外，为了改善 Nagios 的用户体验，发行版还包含了大量的工具。</p>\n<h3 id=\"toc_43\">28. Cacti – 基于 Web 的 Linux 监控工具</h3>\n<p>Cacti 是一个完整的网络图形化解决方案，旨在充分利用 RRDTool 的数据存储和图形功能。Cacti 提供了快速轮询器、高级图形模板、多种数据采集方法和用户管理功能。这些功能被包装在一个直观易用的界面中，确保可以实现从局域网到拥有数百台设备的复杂网络上的安装。它可以提供有关网络、CPU、内存、登录用户、Apache、DNS 服务器等的数据。了解如何在 CentOS / RHEL 下 <a href=\"https://www.cyberciti.biz/faq/fedora-rhel-install-cacti-monitoring-rrd-software/\">安装和配置 Cacti 网络图形化工具</a>。</p>\n<h3 id=\"toc_44\">29. KDE 系统监控器 – 实时系统报告和图形化显示</h3>\n<p>KSysguard 是 KDE 桌面的网络化系统监控程序。这个工具可以通过 ssh 会话运行。它提供了许多功能，比如可以监控本地和远程主机的客户端-服务器模式。前端图形界面使用传感器来检索信息。传感器可以返回简单的值或更复杂的信息，如表格。每种类型的信息都有一个或多个显示界面，并被组织成工作表的形式，这些工作表可以分别保存和加载。所以，KSysguard 不仅是一个简单的任务管理器，还是一个控制大型服务器平台的强大工具。</p>\n<p><img class=\"aligncenter\" title=\"Fig.05 KDE System Guard KDE task manager and performance monitor.\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003619r9blsmq55lgw1uss.png\" alt=\"Fig.05 KDE System Guard\"></p>\n<p style=\"text-align: center\"><em>图 05：KDE System Guard {图片来源：维基百科}</em></p>\n<p>详细用法，请参阅 <a href=\"https://docs.kde.org/stable5/en/kde-workspace/ksysguard/index.html\">KSysguard 手册</a>。</p>\n<h3 id=\"toc_45\">30. GNOME 系统监控器</h3>\n<p>系统监控程序能够显示系统基本信息，并监控系统进程、系统资源使用情况和文件系统。您还可以用其修改系统行为。虽然不如 KDE System Guard 强大，但它提供的基本信息对新用户还是有用的：</p>\n<ul>\n<li>显示关于计算机硬件和软件的各种基本信息</li>\n<li>Linux 内核版本</li>\n<li>GNOME 版本</li>\n<li>硬件</li>\n<li>安装的内存</li>\n<li>处理器和速度</li>\n<li>系统状况</li>\n<li>可用磁盘空间</li>\n<li>进程</li>\n<li>内存和交换空间</li>\n<li>网络使用情况</li>\n<li>文件系统</li>\n<li>列出所有挂载的文件系统及其基本信息</li>\n</ul>\n<p><img class=\"aligncenter\" title=\"Fig.06 The Gnome System Monitor application\" src=\"https://dn-linuxcn.qbox.me/data/attachment/album/201802/23/003620wb8m90lmmp8e4wex.png\" alt=\"Fig.06 The Gnome System Monitor application\"></p>\n<p style=\"text-align: center\"><em>图 06：Gnome 系统监控程序</em></p>\n<h3 id=\"toc_46\">福利：其他工具</h3>\n<p>更多工具：</p>\n<ul>\n<li><a href=\"https://www.cyberciti.biz/tips/linux-scanning-network-for-open-ports.html\">nmap</a> – 扫描服务器的开放端口</li>\n<li><a href=\"https://www.cyberciti.biz/tips/tag/lsof-command\">lsof</a> – 列出打开的文件和网络连接等</li>\n<li><a title=\"Debian / Ubuntu Linux Install ntop To See Network Usage / Network Status\" href=\"https://www.cyberciti.biz/faq/debian-ubuntu-install-ntop-network-traffic-monitoring-software/\">ntop</a> 基于网页的工具 – <code>ntop</code> 是查看网络使用情况的最佳工具，与 <code>top</code> 命令之于进程的方式类似，即网络流量监控工具。您可以查看网络状态和 UDP、TCP、DNS、HTTP 等协议的流量分发。</li>\n<li><a href=\"https://github.com/brndnmtthws/conky\">Conky</a> – X Window 系统下的另一个很好的监控工具。它具有很高的可配置性，能够监视许多系统变量，包括 CPU 状态、内存、交换空间、磁盘存储、温度、进程、网络接口、电池、系统消息和电子邮件等。</li>\n<li><a href=\"http://gkrellm.srcbox.net/\">GKrellM</a> – 它可以用来监控 CPU 状态、主内存、硬盘、网络接口、本地和远程邮箱及其他信息。</li>\n<li><a href=\"https://www.cyberciti.biz/tips/finding-out-a-bad-or-simply-overloaded-network-link-with-linuxunix-oses.html\">mtr</a> – <code>mtr</code> 将 <code>traceroute</code> 和 <code>ping</code> 程序的功能结合在一个网络诊断工具中。</li>\n<li><a href=\"https://www.cyberciti.biz/faq/how-to-install-and-use-vtop-graphical-terminal-activity-monitor-on-linux/\">vtop</a> – 图形化活动监控终端</li>\n</ul>\n<p>如果您有其他推荐的系统监控工具，欢迎在评论区分享。</p>\n<h3 id=\"toc_47\">关于作者</h3>\n<p>作者 Vivek Gite 是 nixCraft 的创建者，也是经验丰富的系统管理员，以及 Linux 操作系统和 Unix shell 脚本的培训师。他的客户遍布全球，行业涉及 IT、教育、国防航天研究以及非营利部门等。您可以在 <a href=\"https://twitter.com/nixcraft\">Twitter</a>、<a href=\"https://facebook.com/nixcraft\">Facebook</a> 和 <a href=\"https://plus.google.com/+CybercitiBiz\">Google+</a> 上关注他。</p>\n<p> </p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113681\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113681votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113681\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 7 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/837869fde271e0571cc2e87f3319ba0169e830a8.jpg"}
{"url_object_id": "df769d9585bb04c7096fe1e496ae06af", "title": ["站会不只是站着！那该如何开展？"], "url": "http://blog.jobbole.com/113799/", "create_date": "2018/04/03", "front_image_url": ["http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 3, "tags": "职场,敏捷开发,站会", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://martinfowler.com/articles/itsNotJustStandingUp.html\">Jason Yip</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>日常站会已经成为很多团队的惯例，尤其是在敏捷软件开发（Agile software development）中。然而，将有效站会和浪费时间区分开来的是很多小细节。</p>\n<p><img class=\"aligncenter\" src=\"http://wx4.sinaimg.cn/large/63918611ly1fpzj87vetej20dw099419.jpg\"></p>\n<p style=\"text-align: center;\">（photo: Karthik Chandrasekarial）</p>\n<h1>我们站着以保持会议简短</h1>\n<p>日常站会（daily stand-up meeting）（也叫 daily scrum，daily huddle，morning roll-call 等）可以简单地描述为：</p>\n<blockquote><p>整个团队每天见面，快速汇报状态最新进展。我们站着以保持会议简短。</p></blockquote>\n<p>就是这样。</p>\n<p>但是这么简短的定义没有真正告诉你那些把有效站会和浪费时间区分开来的细节。</p>\n<p>所以你怎么区分呢？</p>\n<p>对有经验的人来说，当站会出问题的时候，他们凭直觉就知道该调整什么来处理问题。</p>\n<p>对新手来说，出问题时他们不太可能弄清该做什么……如果没有协助的话，他们更可能直接完全放弃这项实践。</p>\n<p>这令人感到遗憾，因为进展顺利的站会给团队带来显著的价值。</p>\n<p>为了解决这个问题，重要的是详述日常站会一般做法的好处和结果。日常站会的这些范例能够帮助缺乏经验的人，也能提醒更有经验的人其直觉背后的原因。</p>\n<h1>“好”可能是什么样？</h1>\n<p>Bob Marley 的“Get Up Stand Up”响起……像巴甫洛夫的铃铛一样，队员们不需要额外的督促就站起来漫步到卡片墙前。这首歌是每天早晨同时播放的循环歌单的一部分。</p>\n<p>有些人把卡片移动到工作流中的正确位置，包括贴上不同颜色的便利贴，写上备注。直接项目团队以外的一些人如果对此感兴趣的话，会闲逛过来看看事情进展如何。</p>\n<p>注意墙边的活动已经停下了，队长启动团队之前购买的巨大计时器；他们对日常站会实际要花多长时间感兴趣。</p>\n<p>一个队员上前一步，谈论黑板上最右边的卡片，离部署点最近。他对部署脚本还有一些疑问。另一个队员表示她能帮忙解决。人们从右到左从上到下继续描述每个工作项都发生了什么，其他人如果能帮忙解决困难就插话进去。队长在一边将提及的困难记录在进展板上。</p>\n<p>一度有一场稍长的讨论来探索怎么解决一个特定的问题。队长意识到这次拖延时，会轻轻举起一根手指打断他们…….恰恰在一个人提议他们应该线下讨论之前。</p>\n<p>一小段时间之后，大家讨论过了所有的卡片，队长询问还有没有人想分享其他事情。某人提了一个有趣的想法，是关于一个会使计划中的一些东西被淘汰的新特征。这引起了一个总试图参加站会的产品经理的兴趣，他们都同意之后再讨论。</p>\n<p>队长在团队开始传统结束仪式时转了转眼睛……1……2……3……精益求精！不是他的菜，但是他得承认，这使得事情高调结束了。</p>\n<p>人们散开并开始讨论提及的不同事情，包括那些困难，新想法和特定工作项的问题。</p>\n<h1>当人们试图一起工作时发生的特定问题</h1>\n<p>当一队人试图作为团队工作时会发生特定的问题，日常站会是这些问题的常见解决方法。</p>\n<p>站会是定期同步的机制，这样团队……</p>\n<p><strong>对目标有同样的理解。</strong>即使我们觉得一开始是互相理解的（很可能并不是），我们的理解也会发生变化，就像我们工作的背景会发生变化。如果一个“团队”中的每个成员是朝不同的目标工作的，那么这个“团队”是无效的。</p>\n<p><strong>协调工作</strong>。如果不需要协调工作，你也就不需要团队。反过来，如果你有一个团队，我假定工作就需要协调。队员之间蹩脚的协调往往会导致糟糕的结果。</p>\n<p><strong>分享问题和改进。</strong>团队合作与单独工作相比，主要好处之一就是在某人遇到问题或者发现一个更好的做事方法时，队员能够互相帮助。如果一个“团队”的队员对分享问题感到不适，而且/或者不互相帮助，那么这个团队往往是无效的。</p>\n<p><strong>识别为一个团队。</strong>如果你不经常与团队接触，在心理上认同一个团队是很困难的。即使你认为他们有能力，而且追求同一个目标，你也无法产生强烈的关联感。</p>\n<h1>日常站会的范例</h1>\n<p>我整理了一些范例来回答下列问题：</p>\n<p>▪谁参加？</p>\n<p>▪我们谈论什么？</p>\n<p>▪我们发言的顺序是什么？</p>\n<p>▪时间和地点？</p>\n<p>▪我们怎么保持精神抖擞？</p>\n<p>▪我们怎么鼓励自主？</p>\n<h1>谁参加？</h1>\n<h2>所有人</h2>\n<p>来自不同领域（比如市场，产品支持，上层管理，培训等）的人和代表希望了解项目的状态和进程，并且/或者贡献一份力量。在多次会议和报告中交流项目状态需要大量重复的工作。</p>\n<p><em>因此</em></p>\n<p>将部分或者全部会议和报告替换成日常站会。任何直接相关的人员，或者想要了解项目的日常工作的人员应该只参加日常站会。</p>\n<p><em>但是</em></p>\n<p>如果不直接相关的人不清楚什么是期望行为，可能会打断站会。这可以通过简单地向新的参与者和观察者提前声明预期规范来解决。</p>\n<p>不是所有形式的报告都是，或者应该是站会形式的。举例来说，项目概述使用<a href=\"http://xprogramming.com/articles/bigvisiblecharts/\">大型可视化图表（Big Visible Chart）</a>会更好，比如燃尽图（burn-down）、燃烧图（burn-up）、累计流量表（cumulative flow diagram）等。</p>\n<h2>工作事项核心</h2>\n<p><em><strong>也叫：</strong></em>故事核心的站会</p>\n<blockquote><p>如果故事对项目来说非常重要，站会中就该是<strong>它们</strong>发言</p>\n<p><a href=\"http://www.exampler.com/blog/2007/11/06/latour-3-anthrax-and-standups/\"><em>— Brian Marick, “Latour 3: Anthrax and standups”</em></a></p></blockquote>\n<p>人们太<strong>注意接力者了，而没有给予接力棒足够的重视</strong>。也就是，人人都在忙着做事，但并不一定是处理工作事项。</p>\n<p><em>因此</em></p>\n<p>把日常站会看作是以工作事项（例如在敏捷软件开发背景下的用户故事）为核心的惯例，而不是人的惯例，与会者只是代表工作事项发言……因为工作事项显然不会说话。</p>\n<p><strong>昨日今日困难</strong>的问题可能仍然适用，但是是从工作事项角度出发的，而不是从人的角度出发的。这也意味着不是每个人都会发言。人们没有责任要说跟改进工作无关的事情。</p>\n<p>由于这样更清晰的关注点，人们更可能在不需要督促的情况下提出困难和申请解决困难。</p>\n<p><em>但是</em></p>\n<p><a href=\"http://blog.mountaingoatsoftware.com/should-the-daily-standup-%20be-person-by-person-or-story-by-story/comment-page-1#comment-23428\">没有发言的责任可能会隐藏一些人的问题，他们害羞或者往往在这种情况下不发言。</a>这在以工作事项为核心的情况下更难察觉。</p>\n<h1>我们谈论什么？</h1>\n<h2>昨日今日困难</h2>\n<p><em><strong>也叫：</strong></em>三个问题</p>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>用以下格式组织谈话内容：</p>\n<ol>\n<li>我昨天完成了什么？</li>\n<li>我今天要做什么？</li>\n<li>什么障碍拖延了我的进度？</li>\n</ol>\n<p>满足日常站会的目标至少需要这 3 个问题。讨论的其他主题（例如设计讨论，八卦等）应该推迟到会议结束后。</p>\n<p>Olve Maudal 建议应该掉转问题的顺序来强调重要性的正确顺序：</p>\n<blockquote><p><em>1、有什么障碍？</em></p>\n<p><em> 2、今天要做什么？</em></p>\n<p><em> 3、从昨天起完成了什么？</em></p>\n<p><a href=\"http://olvemaudal.wordpress.com/2008/05/15/daily-stand-up-meetings-%20perhaps-the-third-question-should-go-first/\"><em>— Olve Maudal, “Daily Stand-up Meetings – Perhaps the third question should go first?”</em></a></p></blockquote>\n<p>Lasse Koskela 提出了另一种形式的问题，为了强调队员不应该向队长汇报：</p>\n<blockquote><p><em>每个队员向他的同伴更新信息：</em></p>\n<p><em>每个队员依次向他的同伴提供 3 条信息：</em></p>\n<p><em> 1、昨天开会以来我做的事情</em></p>\n<p><em> 2、我今天要做的事情</em></p>\n<p><em> 3、我需要某人来解决的困难</em></p>\n<p><a href=\"http://radio.javaranch.com/lasse/2006/05/07/1147034972559.html\"><em>— Lasse Koskela, “On Scrum and the curse of the three questions”</em></a></p></blockquote>\n<p>Jonathan Rasmussen 提供了不同的说法来改变站会的动态：</p>\n<blockquote><p>▪<em>你昨天做了什么来改变世界</em></p>\n<p>▪<em>你今天准备怎么做</em></p>\n<p>▪<em>你准备怎么突破任何不幸挡了你路的困难</em></p>\n<p><em>回答这些类型的问题完全改变了站会的动态。你正在使尽浑身解数，宣布你对宇宙的意图，而不是仅仅站在那陈述更新信息。</em></p>\n<p><a href=\"https://www.amazon.com/gp/product/1934356581?ie=UTF8&amp;tag=martinfowlerc-20&amp;linkCode=as2&amp;camp=1789&amp;creative=9325&amp;creativeASIN=1934356581\"><em>— Jonathan Rasmusson, The Agile Samurai</em></a></p></blockquote>\n<p>还有很多团队加入了额外的问题。</p>\n<p><a href=\"http://joel.is/an-invitation-to-come-and-hack-on-buffer/\">Buffer 增加了一个部分，人们可以分享手头上用来提升自己的事请。</a></p>\n<p>Thomas Cagley 建议<a href=\"https://tcagley.wordpress.com/2014/07/18/stand-up-meetings-add-ons/\">寻找风险</a>。</p>\n<p>Mark Levison 发现，增加更有针对性的改进问题是有用的。改动后两个问题来与具体背景接轨。</p>\n<blockquote><p><em> 1、你昨天完成了什么？</em></p>\n<p><em> 2、你今天要做什么？</em></p>\n<p><em> 3、</em> <em>障碍/困难有哪些？</em></p>\n<p><em> 4、你昨天注意到什么代码味道/缺少单元测试……了吗？</em></p>\n<p><em> 5、昨天你对代码做了哪些改进？</em></p>\n<p><a href=\"https://agilepainrelief.com/notesfromatooluser/2011/01/daily-stand-up-variations.html#.VsoT4ZMrLeQ\"><em>— Mark Levison, “Daily Stand-Up Variations”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p>结构不像由问题的答案所提供给我们的信息那么重要。如果提供信息的准则不那么结构化，遵循清单就不重要了。随着团队成长，你可能会发现你想要调整结构，反映了这个范例是如何演变的。</p>\n<p>更大的问题是，<strong>昨天今天困难</strong>是否太过于关注个人成就，而不是注意正确的事情……这就引向了。</p>\n<h2>改进板（Improvement Board）</h2>\n<p><em><strong>也叫</strong>__<strong>：</strong></em>阻碍板（Blockage Board）、障碍板（Impediment Board）、改善新闻表（Kaizen Newspaper）</p>\n<p>站会中提出的困难没有被解决或者及时处理。</p>\n<p><em>因此</em></p>\n<p>把提及的困难贴到<strong>改进板</strong>上。这是一个公开可见的白板或者表格，记录提及的困难，并跟踪解决方法的进度。一个<strong>改进板</strong>可以在站会以外的时间更新，并作为一个更即时的、不那么具有压迫性的提出困难的方法。一个常见的错误是没能写得足够大，使人们能在很远的地方看到。</p>\n<p>把问题写下来并坦率地承认它的简单行为是减少在对话中走神的可靠方法。所以即使不是每个人都同意某个特定事物是障碍，写下来以便会议结束后讨论也是值得的。</p>\n<p>加上每个提及的困难发生的次数，这强调了哪些问题一般来说更重要，得先处理。</p>\n<p>板面的设计有几种方法。比如像下面一样的表格结构：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>问题</strong></td>\n<td valign=\"top\"><strong>计数</strong></td>\n<td valign=\"top\"><strong>控制</strong></td>\n<td valign=\"top\"><strong>对策</strong></td>\n<td valign=\"top\"><strong>状态</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">问题的名字</td>\n<td valign=\"top\">问题发生的计数</td>\n<td valign=\"top\">短期解决方法</td>\n<td valign=\"top\">基于根本原因分析的 长期解决方法</td>\n<td valign=\"top\">计划-执行- 检查-行动</td>\n</tr>\n</tbody>\n</table>\n<p>另一种更像任务板的风格：</p>\n<table cellspacing=\"0\" cellpadding=\"5\">\n<tbody>\n<tr>\n<td valign=\"top\"><strong>要做</strong></td>\n<td valign=\"top\"><strong>正在进行</strong></td>\n<td valign=\"top\"><strong>已完成</strong></td>\n</tr>\n<tr>\n<td valign=\"top\">代表困难的卡片</td>\n<td valign=\"top\">当我们主动解决困难时， 把对应的卡片移动到这里</td>\n<td valign=\"top\">当我们解决了困难时， 把对应的卡片移动到这里</td>\n</tr>\n</tbody>\n</table>\n<p><em>但是</em></p>\n<p>如果提出了太多困难，团队没有能力解决的话，要冒着<strong>改进板</strong>变成抱怨板的风险。</p>\n<h1>我们发言的顺序是什么？</h1>\n<h2>最后到达的最先发言</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p><em>因此</em></p>\n<p>同意<strong>最后到达的人先发言</strong>。这是个简单的规则，也带来了额外的好处——鼓励人们准时参加站会。</p>\n<p><em>但是</em></p>\n<p>最后到达的人可能也是准备最不充分的，不能给站会开一个好头。</p>\n<h2>接龙</h2>\n<p>在站会期间，与会者得知道谁应该先发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。在不需要干预的情况下，团队也应该知道谁先发言。</p>\n<p>因此</p>\n<p>使用一个简单的、预先制定的规则来决定谁下一个发言，例如<strong>接龙</strong>。顺时针转还是逆时针转不重要，重要的是团队主导会议，而不是协调人或者经理主导会议。</p>\n<h2>传递信物</h2>\n<p>有了简单的、可预测的排序机制（例如<strong>接龙</strong>），直到快轮到自己发言之前，参与者很容易忽略其他发言人。人们往往会想其他事情，而不是注意听其他人说了什么。</p>\n<p><em>因此</em></p>\n<p>引进一个不可预测的排序机制，比如投掷一个发言信物（例如一个球）来决定谁下一个发言。用发言信物也简化了谁第一个发言的问题，可以是恰好取回信物的人（或者是他/她把信物投向的第一个人）。</p>\n<p>投掷东西也给日常站会增添了一点乐趣，也可以作为一个良好的、感染其他观察团队的机制。</p>\n<p>我在参加与 Simon Stewart 合作的一个项目时第一次学到这个方法。我们用了一个小杂耍球，但是几乎所有东西都可以用作信物。其他团队用过<a href=\"http://edgibbs.com/2006/08/14/passing-a-rugby-ball-in-standups/\">橄榄球</a>，甚至<a href=\"http://kanemar.wordpress.com/2006/05/13/controling-the-flow-of-daily-%20meetings-with-a-team-mascot/\">毛绒玩具</a>。</p>\n<p><em>但是</em></p>\n<p>对大一点的团队来说，可能很难记住谁已经发过言了。在这些情况下，坚持像<strong>接龙</strong>这样简单一点的机制更容易。</p>\n<p>取决于组织甚至团队的文化氛围，扔球可能会显得不专业，对这个惯例产生不必要的负面看法。</p>\n<h2>抽一张卡片</h2>\n<p>在站会期间，与会者得知道谁应该先发言，之后谁应该发言。由协调人决定谁先发言是与自我组织对抗的、虽然微妙、但是确切的力量。团队不喜欢传信物是因为他们手里一般都拿着杯咖啡。</p>\n<p><em>因此</em></p>\n<p><a href=\"http://%20web.archive.org/web/20090526072425/http://www.robbyonrails.com/articles/2006/05/29/the-%20daily-stand-up-part-2\">让每个队员抽一张卡片来决定发言顺序。</a>想象一摞卡片，每张卡片上有一个数字。每个队员到达时可以选一张卡片，根据卡片上的数字来决定发言顺序。</p>\n<h2>过一遍板</h2>\n<p><em><strong>也叫：</strong></em>过一遍墙</p>\n<blockquote><p><em>站会保证每个人都不闲着。过一遍板上的内容保证每个人都只关注最重要的事。</em></p>\n<p><em>— Bret Pettichord via Twitter</em></p></blockquote>\n<p> </p>\n<blockquote><p><em>会议形式的另一个问题是，没有清楚地讨论任务或者工作流。每个话题被简单提及，取决于队员发言的顺序。这使得正在发生的事情很难讲清楚。</em></p>\n<p><a href=\"http://web.archive.org/web/20090611160352/http://dnicolet1.tripod.com/%20agile/index.blog?entry_id=1900488\"><em>— Dave Nicolette, “An alternative format for the daily stand-up”</em></a></p></blockquote>\n<p>人们更关注让自己忙起来，而不是真正改进工作，所以你转向一个以工作事项为核心的模型，而不是以人为核心的模式。但是，即使是工作事项核心的站会，如果使用了像<strong>接龙</strong>或者<strong>传递信物</strong>这样的传统排序机制，也很难理解发生了什么。</p>\n<p><em>因此</em></p>\n<p><strong>过一遍板</strong>，就是在站会中过一遍可视管理板上的每个工作事项。</p>\n<p>大多数敏捷和精益团队使用可视管理系统来展示正在处理的工作事项。对敏捷软件开发来说，这可能叫做任务板（task board）、故事墙（story wall）或者看板（Kanban board）。这些板展示工作事项的进程。通常用在板上移动卡片的方法来展示进程。理论上，垂直位置表示优先程度。</p>\n<p>站会中，从尾到头（例如从右到左）并从高优先级到低优先级（例如从上到下）过一遍每个工作事项。你可能在板上明确地标明应该使用怎样的顺序。</p>\n<p>Pawel Brodzinski 提出了一个<a href=\"http://brodzinski.com/2011/12/effective-standups.html\">默认顺序</a>：</p>\n<p>1. 困难</p>\n<p>2. 加速或者紧急事件</p>\n<p>3. 上次站会后没再有新进展的事项（可能卡住了）</p>\n<p>4. 根据优先级的其他事件</p>\n<p><em>但是</em></p>\n<p>显然，一块板是需要预先准备的，不是所有团队都有。在这种情况下，一人一人发言的结构更合适。</p>\n<p><strong>过一遍板</strong>更可能会屈从于<strong>向队长汇报</strong>，如果没有应用<strong>轮流当协调人</strong>或者其他自我组织范例。</p>\n<h1>时间和地点</h1>\n<h2>在工作地点开会</h2>\n<blockquote><p><em>在工作场地开会，而不是在会议室。</em></p>\n<p><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\"><em>— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</em></a></p></blockquote>\n<p>工作地点有很多触发记忆的东西，能让你想起来发生的事情。</p>\n<p>我们也不希望日常会议需要大量提前协调、寻找再走到开会的房间。</p>\n<p><em>因此</em></p>\n<p><strong>在工作地点开会</strong>，而不是在会议室。如果你们有故事墙或者看板，就在它前面开会。</p>\n<p><em>但是</em></p>\n<p>附近的其他人可能会觉得会议的噪音令人分心。这一般暗示了潜在的糟糕工作空间设计，但仍然必须被承认。</p>\n<h2>同样的时间，同样的地点</h2>\n<p>我们希望团队对站会有主人翁意识。我们也希望利益相关方能路过旁听一场站会，避免再安排另一场状态会议。如果任意队员都能强制推迟或者改变站会的地点，这就很难实现。</p>\n<p><em>因此</em></p>\n<p>团队要同意在<strong>同一时间同一地点</strong>开站会。不要等掉队的人，包括发起人和经理。会议是为整个团队开的，而不是为了某个人。如果你<strong>用站会来开始一天</strong>的话，这就尤其重要了。</p>\n<p>一些更严格的团队可能会惩罚迟到者。我倾向于讨论，并谨慎使用任何惩罚。</p>\n<p><em>但是</em></p>\n<p><strong>同一时间同一地点</strong>并不是盲目地不知变通。重要的是开始时间基本一致，很少要重新安排。如果经常需要重新安排，可能意味着应该调整开始时间。如果每个人都不方便去某个地方，很可能意味着应该调整地点。</p>\n<h2>用站会来开始一天</h2>\n<p>日常站会让我们意识到并注意突出问题。如果在晚些时候开站会，那么这种注意和意识就浪费了。</p>\n<p><em>因此</em></p>\n<p><strong>用站会来开始一天。</strong>由于弹性工作时间，不是每个队员都在同一时间开始上班。针对弹性工作时间的一个常见方法是利用核心工作时间。站会应该在核心工作时间开始时开始。</p>\n<p>类似地，如果队员由于个人原因要迟到一会（比如得送孩子上学），站会开始时间应该设在每个人都能参加的时刻。</p>\n<p><em>但是</em></p>\n<p>在站会前大家往往不会做任何与项目相关的任务。如果<strong>开始一天的站会开晚了</strong>，懒散时间会很显著。到某种程度下，这些时间可能会被简单地用来查看邮件、填时间表等。但是把站会安排在晚一点的时间，而不是“一天的开始”值得研究。</p>\n<h2>别用站会来开始一天</h2>\n<p>站会往往被作为为一天设置关注点的惯例，尤其是如果你<strong>用站会来开始一天</strong>。因此，在站会开始前，队员往往不处理特性。当会议实际上不是第一件事时，这个倾向可能会对生产效率有显著影响。</p>\n<p><em>因此</em></p>\n<p><strong>别用站会来开始一天。</strong>把日常站会安排到一个足够晚的时间，晚到人们不会从心理上把会议和一天的开始联系在一起。</p>\n<p><em>但是</em></p>\n<p>如果不用日常会议开始一天，那它就不能再作为一个在一天的开始设定团队关注点的惯例了。效率的明显提高可能不值得这样的代价，取决于不同团队。</p>\n<p>当有很多项目用到站会时，可能同时有很多站会。对多个项目感兴趣的观察者可能想要更改站会时间，这样他们能都参加。问题在于，如果一个观察者能要求与会者调整他/她的安排，会威胁到团队的主人翁意识。然而，在决定什么时候开站会时也必须考虑这一点。</p>\n<h1>我们怎样保持精神抖擞？</h1>\n<h2>聚集在一起</h2>\n<blockquote><p><em>我经常发现的问题是，人们往往把日常站会看作简单的个人报告。“我做了这个……我要做那个”——接着下一个人也这么说。更理想的方法是站得更近，像足球队围在一起那样。</em></p>\n<p><a href=\"https://www.linkedin.com/pulse/20140926150354-136414-the-origin-of-the-daily-stand-up\"><em>— Jeff Sutherland, “The Origin of The Daily Stand-up”</em></a></p></blockquote>\n<p>讲话的音量影响参与度，也影响交流的效率。物理距离会改变好的交流所要求的音量。有些人不大声讲话，大声讲话会感到不舒服。</p>\n<p><em>因此</em></p>\n<p>站会更应该是 <strong>Huddle </strong>而不是会议。如果很难听清，让大家站近一点。除了可以用更轻松的说话音量，身体上更接近往往也会增加与会者的参与度。能够站得更近也表现了队里更多的信任感。如果站会是一个新事物，用手势招呼别人参加和说些有“来吧。”效果的话通常来说就足够了。如果圈子的大小已经建立了一段时间，在尝试缩小它之前考虑解释一下缩小圈子的原因。</p>\n<p><em>但是</em></p>\n<p>团队必须平衡近距离和个人舒适区域。即使在非常有信任感的团队中，也有一个点，站得太近以至于超过了这个点，人们会觉得不舒服。症状往往是与会者紧张并/或者坐立不安。</p>\n<h2>站起来</h2>\n<p>有些人健谈，可能漫谈到<strong>讲故事</strong>中去。有些人想在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。</p>\n<p><em>因此</em></p>\n<p>在会议期间要求所有与会者<strong>站起来</strong>。用站立来链接身体和心理的意愿。身体上的不适也会提醒与会者会议拖得过长了。鼓励这种做法的一个简单方法是：直接在没有椅子的地方开会。</p>\n<p><em>但是</em></p>\n<p>站起来往往会导致会议缩短，但并不保证会缩短到一个理想的时长。人们可能会学着适应不适感而不是采用一个更合适的对策。而且如果会议<em>没有</em>拖得过长，也没有跑题，站起来就是一个不必要的仪式了。</p>\n<h2>十五分钟或者更短</h2>\n<p>大多数人会在长时间的会议中走神。又长又无聊的会议是一个糟糕的、消耗精力的开始一天的方法。一个具体的时长帮助我们想起来什么时候该考虑调整，以缩短会议时长。</p>\n<p><em>因此</em></p>\n<p>保持日常站会在<strong>十五分钟或者更短</strong>。一般来说，十五分钟过后，普通人开始走神，这对设定关注点来说一点帮助都没有。</p>\n<p><em>但是</em></p>\n<p>十五分钟对小一点的团队来说可能太长了。由于走神的影响，甚至对大一点的团队来说，十五分钟是一个好的限制。另外，会议也可能太短，以至于结束时，与会者仍然不清楚发生了什么或者该问谁来弄清楚。</p>\n<h2>结束信号</h2>\n<p>在最后一个人发言结束后，团队可能不会马上意识到会议结束了。如果人们是逐渐意识到该散了的，会议不能高调结束，可能会导致<strong>低迷</strong>。</p>\n<p><em>因此</em></p>\n<p>用一句顺嘴的话（例如，<a href=\"http://edgibbs.com/2006/08/07/signaling-the-end-of-a-standup/\">“好了，大家去吃午饭吧。”</a>）或者其他动作作为站会<strong>结束的信号</strong>。</p>\n<h2>给会议计时</h2>\n<p>很难从量上判断站会是否超时，尤其在长度是逐渐增加的情况下。</p>\n<p><em>因此</em></p>\n<p><strong>给会议计时</strong>并发布结果。大多时候，与会者仅仅是没有意识到<strong>讲故事</strong>的影响，没有准备要线下讨论，也没有准备会议要开多久。把它量化。</p>\n<p><em>但是</em></p>\n<p>和所有措施一样，除非真的有一个要完成的目标是由于能量级导致的问题，不应该引入给会议计时的方法。一旦完成目标，应该抛弃这个方法。没有特定的原因就计时会导致怀疑和对度量的冷漠。</p>\n<p>时间是精力、注意力和节奏的代表。要更注意这些东西而不是时间。</p>\n<h2>线下讨论</h2>\n<p>有些人想要在听到问题后立即开始<strong>解决问题</strong>。过于长的会议往往是低迷的，与长时间的讨论没有直接关系的参与者往往会分心。承认要解决提及的问题需要进一步讨论仍然是重要的。有些人可能会觉得打断站会的结构不舒服。</p>\n<p><em>因此</em></p>\n<p>用像“<strong>线下讨论</strong>”这么一句简单一致的话作为提示，提醒大家这样的讨论应该在日常站会外进行。如果讨论的是社交，没有更多要求。如果讨论的是<strong>解决问题</strong>，协调人（最终就是团队）应该确保提名或者指定了正确的人来之后解决问题。</p>\n<p>或者，有些团队使用更间接的信号。</p>\n<p>例如，Mike Cohn 描述了一个信号，使用<a href=\"http://www.marketplace.org/2012/02/20/life/hate-those-endless-meetings-try-standing\">橡胶老鼠来暗示“我们要钻进老鼠洞了”</a>。</p>\n<p>Benjamin Mitchell 描述了一个双手法则：</p>\n<blockquote><p><em>如果任何人觉得现在的对话跑题了，或者已经不再有效率了，他们就举起一只手。一旦另一个人也举起了手，就标志着这段对话该结束了，并继续站会的剩余部分。正在发言的人可以在站会结束后继续。</em></p>\n<p><a href=\"http://blog.benjaminm.net/2012/02/23/overlong-agile-stand-up-two-hand-rule/\"><em>— Benjamin Mitchell, “Stuck in an overlong Agile stand up? Try the two hands rule”</em></a></p></blockquote>\n<p><em>但是</em></p>\n<p><strong>解决问题</strong>和澄清问题有不同之处。没有被理解的信息是没用的。允许澄清问题到哪种程度取决于团队的大小以及是否会影响<strong>十五分钟或更短</strong>这一规则。</p>\n<h1>我们怎么鼓励自主？</h1>\n<h2>轮流当协调人</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p><strong>轮流当协调人。</strong>轮流安排队员负责确保大家参加站会，并坚持商定的准则。</p>\n<p><em>但是</em></p>\n<p>没有丰富站会经验的团队从一个经验丰富的教练那收获颇多。更重要的是，团队应该戒除依赖，对站会掌握更多的控制。到了一定时刻，就不该要协调人了。</p>\n<h2>打破眼神交流</h2>\n<p>队员<strong>向队长汇报</strong>，也就是他们只跟会议协调人说话，而不互相说话。会议协调人只提出并解决与站会相关的过程问题。我们希望团队作站会的主人，这就要求去除对单个协调人的依赖。</p>\n<p><em>因此</em></p>\n<p>协调人必须<a href=\"http://radio.javaranch.com/lasse/2006/05/07/%201147034972559.html#comment1147110635098\">打破眼神交流</a>，来委婉提醒发言者，他/她应该强调整个团队而不是一个人。一种方法是<a href=\"http://www.netobjectives.com/podcasts/last20060719_podcasts.mp3\">四处走走，这样当前的发言者就看不见协调人了</a>。</p>\n<h1>我们怎么知道什么时候站会进行得不顺利？</h1>\n<blockquote><p><em>我忍受了三年日常站会。站会中最让我痛苦的是我的老板（我叫他 Wally）。他开站会的主要原因不是提高效率，也不是尽可能多地用 XP 来减少人与人在与产品直接相关事情之外的互动。然而，对 Wally 来说，站会（例如周一早上 7 点的会议和周五下午 5 点的会议）是用来加强雇主和雇员关系的忠诚度测试。</em></p>\n<p><a href=\"http://queue.acm.org/detail.cfm?id=957730\"><em>— Phillip A. Laplante, “Stand and Deliver: Why I Hate Stand-Up Meetings”</em></a></p></blockquote>\n<p>站会的“味道”是极好的暗示事情进展不顺利的指示剂。重要的是注意即使你没有闻到什么，也不意味着站会进行得顺利。这只意味着它不臭。</p>\n<p>下面的这些味道，大多数都与前面的范例有关。与前面的范例无关的那些，潜在的问题往往更轻微，或者是在日常站会的关注点之外；人们得想出自己的解决方法。</p>\n<h2>注意接力者，而不是接力棒</h2>\n<p>人们太注意自己正在做什么了，而忽略了去考虑他们的行动是不是真的在改进工作。重新组织站会，这样就是<strong>以工作事项为核心</strong>了。</p>\n<h2>向队长汇报</h2>\n<p>队员面对着经理或者会议协调人，还要跟他们说话，而不是跟团队说话。这表明日常站会是为经理/协调人准备的，但它实际上是为团队准备的。有很多方法来打破这种依赖性：<strong>轮流当协调人</strong>，<strong>打破眼神交流</strong>，改变<strong>昨日今日困难</strong>问题的模式，<strong>传递信物</strong>等。</p>\n<h2>人们会迟到</h2>\n<p>这直接用<strong>同一时间同一地点</strong>解决，但是像之前提到的，这可能意味着站会举办的时间或者地点不对。</p>\n<p>有其他范例来处理这个问题，比如罚款。但是，我一般不推荐这些方法，因为它们暗示这些问题是外在推动的，但是更可能有其他原因。</p>\n<h2>开始一天的站会开晚了</h2>\n<p>由于站会被视为工作日的开始，站会之前没有工作能完成。这可能会对可用工作时间产生显著影响，取决于早晨的站会多晚开始。这引向了<strong>别用站会来开始一天</strong>。</p>\n<h2>社交</h2>\n<p>站会的目标之一是提高团队的社会化程度。但是，日常站会不是为了队员能在与项目无关的事上互相“跟上”。很难举出例子，因为社交从团建到偏离的程度取决于不同的团队。这个界可以从未直接参与到社会化中的参与者的行为中检测到。如果他们保持积极的精力水平，那么可能就是团建；如果他们的精力水平降低，那么就<strong>线下讨论</strong>，可能的话用另一场讨论来充当<a href=\"http://web.archive.org/web/20070103031934/http://www.easycomp.org/cgi-bin/%20OrgPatterns?TheWaterCooler\">饮水机</a>。</p>\n<h2>我不记得了</h2>\n<blockquote><p>我昨天做了什么？<em>…__…</em>我不记得了<em>……</em>我今天在做什么？<em>…__…</em>我不知道<em>…__…</em></p></blockquote>\n<p>缺乏准备导致更慢的进节奏，从而导致低迷。这也冒着满足不了<strong>十五分钟或更少</strong>这一规则的风险，这会进一步降低精力水平。</p>\n<p>绕过这个问题的一个好方法是转向<strong>以工作事项为核心</strong>的站会，并<strong>过一遍板</strong>。</p>\n<p>否则，这是一个期望的问题，期望人们有责任知道<strong>昨日困难今日</strong>问题的答案。</p>\n<h2>讲故事</h2>\n<p>参与者不是只简单描述一个问题，而是提供了足够的细节和背景导致别人走神。一般规则是在站会期间识别困难，在站会后讨论细节。这可以总结为“讲讲标题，而不是整个故事”或者<strong>线下讨论</strong>。</p>\n<h2>解决问题</h2>\n<blockquote><p>站会是提出问题和表面想法的时间，而不是深度解决问题的时间。</p>\n<p><em><a href=\"http://www.leanblog.org/2010/08/video-of-a-daily-huddle-at-everett-clinic/\">— Marc Graban, “Video of a Daily Huddle at Everett Clinic”</a></em></p></blockquote>\n<p>保持站会在<strong>十五分钟或者更短</strong>的关键是在会议期间限制<strong>讲故事</strong>，别屈服于<strong>解决问题</strong>。<strong>线下讨论</strong>。</p>\n<h2>低迷</h2>\n<p>低迷可能暗示着由<strong>讲故事</strong>、<strong>解决问题</strong>等导致的节奏变缓。在这种情况下，<strong>线下讨论</strong>。低迷可能仅仅是团队规模的问题。低迷也可能暗示该试试备选的<strong>用站会来开始一天</strong>和<strong>别用站会来开始一天</strong>。</p>\n<h2>没提及的困难</h2>\n<p><strong><em>也叫：</em></strong><a href=\"http://blog.jbrains.ca/permalink/stand-updaily-scrum-focus-on-achievement-and-commitment\">游记</a></p>\n<p>困难没被提及有很多原因。不记得了、高疼痛阙值、对提出问题的不信任感（因为<strong>困难没有被解决</strong>）、没有提出问题的方便渠道等。协调人应该鼓励人们提困难。</p>\n<p>引进一个<strong>改进板</strong>也能提供一个不那么有压迫感的中介。<a href=\"http://www.retrospectives.com/\">Retrospectives</a> 是发现<strong>困难没有被提及</strong>的潜在原因的有效方法。</p>\n<h2>困难没有被解决</h2>\n<p>除了埋怨环境之外，让人们停止提困难的最确定的方法是别解决困难。为了让人们很难忘记或者忽略困难，用<strong>改进板</strong>公开跟踪它们。</p>\n<h2>只有在站会上提出的困难</h2>\n<p>站会充当一个安全网。在最糟糕的情况下，一天内会将一个困难与更大的团队交流。但是，开站会并不是为了避免问题被提出并在一天内解决。引进一个像<strong>改进板</strong>这样的替代媒介来提出困难可能有用。如果没用，潜在原因可能会在使用 <a href=\"http://www.retrospectives.com/\">Retrospectives</a> 时发现。</p>\n<h1>真的只是每天一起站起来</h1>\n<p>希望这篇文章为你提供了一些关于有效站会的细节和常见问题指示的见解。要清楚日常站会不仅仅是每天一起站起来。</p>\n<p>在一天结束时，重要的是不要太在意每一个范例，或者有某些“味道”。记住我们正试着解决的问题。大家精力充沛吗？大家在分享问题和想法吗？大家是否专注于我们的目标？大家是否像一个团队一样工作？每个人都知道发生了什么吗？</p>\n<p>如果你能肯定地回答这些问题，站会很可能还比较顺利。毕竟，真的只是每天一起站起来。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113799\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113799votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113799\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 3 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/c073c3ed8ce27fd16c516364c92f7c094410b3a4.jpg"}
{"url_object_id": "2796ee392f681a8f36e227ce37a3b069", "title": ["邪恶的编程咒语"], "url": "http://blog.jobbole.com/113631/", "create_date": "2018/03/12", "front_image_url": ["http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg"], "praise_nums": "2", "comment_nums": 2, "fav_nums": 5, "tags": "开发,编程语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"http://9tabs.com/random/2017/12/23/evil-coding-incantations.html\">9tabs</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p>自从我看了 Gary Bernhardt 备受推崇的一个视频 <a href=\"https://www.destroyallsoftware.com/talks/wat\">Wat</a>，就惊异于特定编程语言的怪异行为。相较于其他编程语言来说，某些编程语言的行为更出乎意料。例如，有<a href=\"http://amzn.to/2zoCGSn\">一整本书</a>是针对 Java 的边缘案例和古怪情况。同样，差不多只要 200 美元你就可以阅读 <a href=\"https://www.iso.org/standard/68564.html\">C++ 规范说明</a>了。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fo80ho6bhuj20fu09twfy.jpg\"></p>\n<p>下面是我最喜欢的、惊奇的、滑稽的并仍然有效的咒语集合。一般来讲，利用这些古怪的行为被视为<em>坏事</em>，因为代码不应该出乎意料。值得庆幸的是，如果你尝试以下大多数蠢事，有很多代码校检工具（linters）已经准备好嘲笑你了。说了这么多，知识就是力量，那就开始吧。</p>\n<h3>Python 2 中对 True 邪恶的重赋值</h3>\n<p></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c5207734c479790716\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; True = False\r\n&gt;&gt;&gt; True\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207734c479790716-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207734c479790716-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207734c479790716-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c5207734c479790716-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">False</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207734c479790716-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207734c479790716-3\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0005 seconds] -->\r\n<p>谢天谢地，这在 Python 3 中会导致 <span style=\"text-decoration: underline;\">SyntaxError</span>，因为<a href=\"https://docs.python.org/3.0/whatsnew/3.0.html\"> True、False 和 None 现在是保留字</a>。它仍远没有 C++ 的那个恶作剧那么邪恶，把 <span style=\"text-decoration: underline;\">#define true false</span> 悄悄写进同事的开发机器的标准头文件中。</p>\n<h3>Java 和 Python 中的诡异行为实例</h3>\n<p>对 Java 新手程序员来说，<span style=\"color: #ff0000;\">==</span> 的语义往往使人困惑。甚至在微不足道的情境下，这个操作符的前后矛盾也会使情况变得复杂，即使性能效益是值得的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077356050794760\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nInteger a = 100;\r\nInteger b = 100;\r\nSystem.out.print(a == b); // prints true\r\n\r\nInteger c = 200;\r\nInteger d = 200;\r\nSystem.out.print(c == d); // prints false</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077356050794760-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077356050794760-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077356050794760-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077356050794760-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077356050794760-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077356050794760-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077356050794760-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077356050794760-1\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077356050794760-2\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">100</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077356050794760-3\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">a</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">b</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints true</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077356050794760-4\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c52077356050794760-5\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077356050794760-6\"><span class=\"crayon-t\">Integer</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">200</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077356050794760-7\"><span class=\"crayon-v\">System</span><span class=\"crayon-sy\">.</span><span class=\"crayon-v\">out</span><span class=\"crayon-sy\">.</span><span class=\"crayon-e\">print</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">c</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">d</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints false</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0014 seconds] -->\r\n<p>JVM 会对区间 [-128, 127] 内的值使用相同的引用。更奇怪的是，Python 中也有同样的行为。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c5207735a297448144\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = 256\r\n&gt;&gt;&gt; y = 256\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = 257\r\n&gt;&gt;&gt; y = 257\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735a297448144-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735a297448144-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735a297448144-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735a297448144-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735a297448144-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735a297448144-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735a297448144-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735a297448144-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735a297448144-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c5207735a297448144-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735a297448144-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">256</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735a297448144-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735a297448144-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735a297448144-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735a297448144-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735a297448144-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">257</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735a297448144-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735a297448144-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0013 seconds] -->\r\n<p>目前为止，还没有特别出乎意料的。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c5207735e862143111\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -5\r\n&gt;&gt;&gt; y = -5\r\n&gt;&gt;&gt; x is y\r\nTrue\r\n\r\n&gt;&gt;&gt; x = -6\r\n&gt;&gt;&gt; y = -6\r\n&gt;&gt;&gt; x is y\r\nFalse</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735e862143111-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735e862143111-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735e862143111-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735e862143111-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735e862143111-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735e862143111-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735e862143111-7\">7</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207735e862143111-8\">8</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207735e862143111-9\">9</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c5207735e862143111-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735e862143111-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">5</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735e862143111-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735e862143111-4\"><span class=\"crayon-t\">True</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735e862143111-5\"> </div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735e862143111-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735e862143111-7\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">6</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207735e862143111-8\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207735e862143111-9\"><span class=\"crayon-t\">False</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎 python 解释器使用相同例子的下限是……-5。区间 [-5, 256] 内的整数有同样的 ID。不知怎地，这变得更奇怪了。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077361427770895\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\n&gt;&gt;&gt; x = -10\r\n&gt;&gt;&gt; y = -10\r\n&gt;&gt;&gt; x is y\r\nFalse\r\n&gt;&gt;&gt; x, y = [-10, -10]\r\n&gt;&gt;&gt; x is y\r\nTrue</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077361427770895-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077361427770895-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077361427770895-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077361427770895-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077361427770895-5\">5</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077361427770895-6\">6</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077361427770895-7\">7</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077361427770895-1\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077361427770895-2\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077361427770895-3\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077361427770895-4\"><span class=\"crayon-t\">False</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077361427770895-5\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">y</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">[</span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">-</span><span class=\"crayon-cn\">10</span><span class=\"crayon-sy\">]</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077361427770895-6\"><span class=\"crayon-o\">&gt;&gt;&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">is</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">y</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077361427770895-7\"><span class=\"crayon-t\">True</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0012 seconds] -->\r\n<p>似乎使用解构赋值改变了这里的规则。我不确定为什么是这样。事实上，我在 <a href=\"https://stackoverflow.com/questions/47958141/what-is-the-difference-between-destructured-assignment-and-normal-assignment\" target=\"_blank\">Stack Overflow 上提了一个问题</a>来试着理解它。我的猜测是，一个列表中的重复值指向同一个对象，用以节省内存。</p>\n<h3>C 中颠倒的下标符号</h3>\n<p>颠倒的下标符号，会使所有开发者都头疼。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077365505820220\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x[1] = { 0xdeadbeef };\r\n\r\nprintf(\"%xn\", 0[x]); // prints deadbeef</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077365505820220-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077365505820220-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077365505820220-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077365505820220-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">[</span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">]</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0xdeadbeef</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">}</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077365505820220-2\"> </div><div class=\"crayon-line\" id=\"crayon-5ba9c52077365505820220-3\"><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%xn\"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">[</span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">]</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints deadbeef</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>这行得通的原因是，<span style=\"text-decoration: underline;\">array[index]</span> 确实只是 <span style=\"text-decoration: underline;\">*(array + index)</span> 的语法糖。由于加法的交换性，我们可以交换数组和索引，并得到同样的结果。</p>\n<h3>C 中的“倒数”操作符</h3>\n<p><span style=\"color: #ff0000;\">–&gt;</span> 操作符第一次被看到时，似乎是句法错误。在你意识到它可编译时，它看起来像未被记载的语言特性。幸运的是，两者都不是。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077368057132782\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nfor (x = 3; x --&gt; 0;) {\r\n    printf(\"%d \", x); // prints 2 1 0\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077368057132782-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077368057132782-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077368057132782-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077368057132782-1\"><span class=\"crayon-st\">for</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">3</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">--</span><span class=\"crayon-o\">&gt;</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077368057132782-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"%d \"</span><span class=\"crayon-sy\">,</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// prints 2 1 0</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077368057132782-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0008 seconds] -->\r\n<p><span style=\"color: #ff0000;\">–&gt;</span> “操作符”实际上是两个操作符，在这个背景下解析为<span style=\"text-decoration: underline;\"> (x–) &gt; 0</span>。众所周知，大量使用会导致困惑，这完全是邪恶的。</p>\n<h3>C 中的 <span style=\"text-decoration: underline;\">sizeof</span> 操作符</h3>\n<p><span style=\"text-decoration: underline;\">sizeof</span> 操作符是一个编译时操作符，这给予了它有趣的属性。</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c5207736c379673728\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nint x = 0;\r\nsizeof(x += 1);\r\nif (x == 0) {\r\n    printf(\"wtf?\"); // this will be printed\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207736c379673728-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207736c379673728-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207736c379673728-3\">3</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c5207736c379673728-4\">4</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c5207736c379673728-5\">5</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c5207736c379673728-1\"><span class=\"crayon-t\">int</span><span class=\"crayon-h\"> </span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207736c379673728-2\"><span class=\"crayon-e\">sizeof</span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">+=</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">1</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207736c379673728-3\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-v\">x</span><span class=\"crayon-h\"> </span><span class=\"crayon-o\">==</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c5207736c379673728-4\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"wtf?\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// this will be printed</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c5207736c379673728-5\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0009 seconds] -->\r\n<p>由于 <span style=\"text-decoration: underline;\">sizeof</span> 操作符的例子是对编译时进行评估的，<span style=\"text-decoration: underline;\">(x += 1) </span>不会运行。另一件趣事是，研究表明 <span style=\"text-decoration: underline;\">printf(“wtf?”)</span> 是最普遍的没有被 push 的代码。</p>\n<h3>Lua、Smalltalk、MATLAB 及其他语言，索引由 1 开始</h3>\n<p><a href=\"https://www.reddit.com/r/ProgrammerHumor/\">/r/programminghumor</a> 一直在用“<a href=\"https://goo.gl/QreBLU\">indexing</a> <a href=\"https://goo.gl/bm8Akz\">starts</a> <a href=\"https://goo.gl/joQ9gt\">at</a> <a href=\"https://goo.gl/MM5BwP\">1</a>”表情包取乐。令人震惊的是，有大量编程语言使用从 1 开始的数组索引。可以在<a href=\"https://goo.gl/kASpE7\">这里</a>找到更全面的清单。</p>\n<h3>Ruby 中的 0 被判为 true</h3>\n<p>… and only Ruby. *</p>\n<p>在 Ruby 中是这样。*</p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077370329031463\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif 0 then print 'thanks, ruby' end # prints thanks, ruby</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077370329031463-1\">1</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077370329031463-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-cn\">0</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">then</span><span class=\"crayon-h\"> </span><span class=\"crayon-i\">print</span><span class=\"crayon-h\"> </span><span class=\"crayon-s\">'thanks, ruby'</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">end</span><span class=\"crayon-h\"> </span><span class=\"crayon-p\"># prints thanks, ruby</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0006 seconds] -->\r\n<p>* edit: It was pointed out on <a href=\"https://goo.gl/gnm654\">reddit</a> that this is true for Lua, Lisp, and Erlang as well.</p>\n<p>* 修订：Reddit 上有人指出，这在 Lua、Lisp 和 Erlang 中也成立。</p>\n<p>Trigraph, Digraphs, and Tokens in C</p>\n<h3>C 中的 Trigraph、Digraph 和 Token</h3>\n<p>由于历史原因，C 语言中的非字母符号有替代品。</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fo80hoo0iij20cz0993zc.jpg\"></p><!-- Crayon Syntax Highlighter v2.7.1.1 -->\r\n\r\n\t\t<div id=\"crayon-5ba9c52077373707336860\" class=\"crayon-syntax crayon-theme-github crayon-font-monaco crayon-os-pc print-yes notranslate\" data-settings=\" minimize scroll-always\" style=\" margin-top: 12px; margin-bottom: 12px; font-size: 13px !important; line-height: 15px !important;\">\r\n\t\t\r\n\t\t\t<div class=\"crayon-toolbar\" data-settings=\" show\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><span class=\"crayon-title\"></span>\r\n\t\t\t<div class=\"crayon-tools\" style=\"font-size: 13px !important;height: 19.5px !important; line-height: 19.5px !important;\"><div class=\"crayon-button crayon-nums-button\" title=\"切换是否显示行编号\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-plain-button\" title=\"纯文本显示代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-wrap-button\" title=\"切换自动换行\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-expand-button\" title=\"点击展开代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-copy-button\" title=\"复制代码\"><div class=\"crayon-button-icon\"></div></div><div class=\"crayon-button crayon-popup-button\" title=\"在新窗口中显示代码\"><div class=\"crayon-button-icon\"></div></div></div></div>\r\n\t\t\t<div class=\"crayon-info\" style=\"min-height: 18.2px !important; line-height: 18.2px !important;\"></div>\r\n\t\t\t<div class=\"crayon-plain-wrap\"><textarea wrap=\"soft\" class=\"crayon-plain print-no\" data-settings=\"dblclick\" readonly style=\"-moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4; font-size: 13px !important; line-height: 15px !important;\">\nif (true and true) { // same as if (true &amp;&amp; true)\r\n    printf(\"thanks, c\");\r\n}</textarea></div>\r\n\t\t\t<div class=\"crayon-main\" style=\"\">\r\n\t\t\t\t<table class=\"crayon-table\">\r\n\t\t\t\t\t<tr class=\"crayon-row\">\r\n\t\t\t\t<td class=\"crayon-nums \" data-settings=\"show\">\r\n\t\t\t\t\t<div class=\"crayon-nums-content\" style=\"font-size: 13px !important; line-height: 15px !important;\"><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077373707336860-1\">1</div><div class=\"crayon-num crayon-striped-num\" data-line=\"crayon-5ba9c52077373707336860-2\">2</div><div class=\"crayon-num\" data-line=\"crayon-5ba9c52077373707336860-3\">3</div></div>\r\n\t\t\t\t</td>\r\n\t\t\t\t\t\t<td class=\"crayon-code\"><div class=\"crayon-pre\" style=\"font-size: 13px !important; line-height: 15px !important; -moz-tab-size:4; -o-tab-size:4; -webkit-tab-size:4; tab-size:4;\"><div class=\"crayon-line\" id=\"crayon-5ba9c52077373707336860-1\"><span class=\"crayon-st\">if</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">(</span><span class=\"crayon-t\">true</span><span class=\"crayon-h\"> </span><span class=\"crayon-st\">and</span><span class=\"crayon-h\"> </span><span class=\"crayon-t\">true</span><span class=\"crayon-sy\">)</span><span class=\"crayon-h\"> </span><span class=\"crayon-sy\">{</span><span class=\"crayon-h\"> </span><span class=\"crayon-c\">// same as if (true &amp;&amp; true)</span></div><div class=\"crayon-line crayon-striped-line\" id=\"crayon-5ba9c52077373707336860-2\"><span class=\"crayon-h\">    </span><span class=\"crayon-e\">printf</span><span class=\"crayon-sy\">(</span><span class=\"crayon-s\">\"thanks, c\"</span><span class=\"crayon-sy\">)</span><span class=\"crayon-sy\">;</span></div><div class=\"crayon-line\" id=\"crayon-5ba9c52077373707336860-3\"><span class=\"crayon-sy\">}</span></div></div></td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</table>\r\n\t\t\t</div>\r\n\t\t</div>\r\n<!-- [Format Time: 0.0007 seconds] -->\r\n<p>有些外国设备，例如 IBM 3270，在 C/C++ 中不提供某些常用符号，所以提供了 digraph、trigraph 和 token 来避免排斥特定字符集。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113631\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113631votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113631\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 2 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/280c8276f25da11c38fa166860dc2754091de28f.jpg"}
{"url_object_id": "86a8795768a1192f6a4d22bbb49ab0d7", "title": ["刚开始学编程？这几款小工具能让你事半功倍"], "url": "http://blog.jobbole.com/113785/", "create_date": "2018/03/26", "front_image_url": ["https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200"], "praise_nums": "2", "comment_nums": 1, "fav_nums": 8, "tags": "IT技术,Web前端,编程", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">原文出处： <a ref=\"nofollow\" target=\"_blank\" href=\"https://medium.freecodecamp.org/tools-i-wish-i-had-known-about-when-i-started-coding-57849efd9248\">Mario Hoyos</a>   译文出处：<a target=\"_blank\" href=\"http://36kr.com/p/5121154.html\">36氪</a>   </div><p><img src=\"https://pic.36krcnd.com/201803/10141844/8fkz2ekh01zhphjt.jpeg!1200\" alt=\"åå¼å§å­¦ç¼ç¨ï¼è¿å æ¬¾å°å·¥å·è½è®©ä½ äºååå\"></p>\n<p>科技行业里，可供人们使用的工具成百上千，你要怎么知道用哪一种上手最合适呢？</p>\n<p>拿最近刚进入编程这行的人来说吧，大量的工具信息堆砌过来其实毫无益处，反而会无从下手。我发现在自己的开发过程中，很多安装的扩展工具不仅没有真正起到助益作用，反而常常妨碍了正常的开发工作。</p>\n<p>我不是专家，不过随着时间的推移，我还是编制了一份工具清单，这些工具已经证明对我非常有用。如果你刚刚开始学习怎么编程的话，这个清单能给你提供一些指导。如果你是个经验丰富的开发人员，也希望你能从中学到一些新的东西。</p>\n<p>我将把这篇文章分为Chrome扩展程序和VS代码扩展扩展程序两部分。我知道还有其他的浏览器和文本编辑器，但是我想你当然只能在你能找到的工具里选择，所以还是别因为个人喜好而引起一场宗教般的争论。</p>\n<p>请随便选。</p>\n<h3>Chrome扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/8b4aab0d40f4316375f7cd578ff0286e.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>现在设我是一位web开发人员，以Chrome为阵地。下面是一些能让我少花点时间的工具：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://chrome.google.com/webstore/detail/whatfont/jabopobgcpjmedljpbcaablpmlmfcogm?hl=en\">WhatFont</a> —— 名字就说明了一切。这是找出你最喜欢网站使用的字体的简单方法，这样你就可以为己所用了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/pesticide-for-chrome/bblbgcheenepgnnajgfpiicnbbdmmooh?hl=en\">Pesticide</a>—— 修改CSS的绝佳程序。当我试着学习匣子模型的时候，它简直就是救命稻草般的存在。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/colorzilla/bhlhnicpbhignbdhedgjhgdocnmhomnp?hl=en\">Colorzilla</a> ——用于复制确切颜色的一个网站，用它可以将颜色直接复制到剪贴板上，这样你就没必要花太多时间获得正确的RGBA组合了。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/css-peeper/mbnbehikldjhnfehhnaidhjhoofhpehk?hl=en\">CSS Peeper</a>——查看网站使用的颜色时非常方便。在你一开始山寨你认为酷的网站的时候很管用。这个程序能让你查看它们的幕后的色彩方案。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/wappalyzer/gppongmhjkpfnbhagpmjfkannfbllamg?hl=en\">Wappalyzer</a> ——想要获悉你在网站上看到的是什么技术，这个程序很有用。想知道某网站使用什么样的框架或者它承载了什么服务？这个照样管用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/react-developer-tools/fmkadmapgofadopljbjfkapdkoienihi?hl=en\">React Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写React程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/redux-devtools/lmhkpmbekcpmknklioeibfkpmmfibljd?hl=en\">Redux Dev Tools</a>——一款用于调试应用程序的工具。有一点要提一下，它只有在你编写Redux程序时才有用。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/json-formatter/bcjindcccaagfpapjjmafapmmgkkhgoa?hl=en\">JSON Formatter</a> ——让JSON在浏览器中看起来更一目了然的不二之选。也许麻烦的JSON让你苦不堪言，不过只要用了这个软件，找到你要找的东西，所花费的时间会大幅缩短。</li>\n<li><a href=\"https://chrome.google.com/webstore/detail/vimeo-repeat-speed/noonakfaafcdaagngpjehilgegefdima?hl=en\">Vimeo Repeat and Speed</a> ——加速Vimeo视频的绝佳工具。如果你像大多数的web开发人员一样观看视频教程，你就会知道用1.25倍的常规回放速度观看它们是多么的方便。本程序同时也有适用于YouTube的版本。</li>\n</ul>\n<h3>VS Code扩展程序</h3>\n<p><span class=\"load-html-img loaded\"><img src=\"http://jbcdn2.b0.upaiyun.com/2018/03/6f53b4a3d95c1c5b648380d21c6e90fa.jpeg\" alt=\"刚开始学编程？这几款小工具能让你事半功倍\"></span></p>\n<p>Visual Studio Code是我写代码时的不二之选。</p>\n<p>每个人都有他自己喜欢的文本编辑器，我也不例外。不过，我还是想把这些扩展程序介绍给你，而它们对你所使用的大多数编辑器都适用。看看我最喜欢的扩展程序有哪些：</p>\n<ul class=\" list-paddingleft-2\">\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=formulahendry.auto-rename-tag\">Auto Rename Tag </a>——自动重命名成对的HTML标记。假如你创建了一个&lt;p&gt;标记。现在你想更改它。有了这个软件，你只需要更改一个就行，另一个会自动修改。从理论上来说，使用这个软件可以把你的工作效率提升一倍。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=ecmel.vscode-html-css\">HTML CSS Support</a> ——HTML文档的CSS支持工具。该工具在获得一些简洁的语法高亮显示和代码建议方面非常有用。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=abusaidm.html-snippets\">HTML Snippets</a> ——这一工具在代码分段方面非常有用，可以为你节省大量的时间。它能跟Emmet配对，这样一来你甚至都不用再真正键入HTML了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dzannotti.vscode-babel-coloring\">Babel ES6/ES7</a> ——JavaScript Babel的辅助工具。如果你用的是Babel，这个工具可以让你更容易区分代码。如果你喜欢JavaScript，那务必也不要错过这款软件。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=CoenraadS.bracket-pair-colorizer\">Bracket Pair Colorizer </a>——色彩可视化工具。如果你没有准确地括号，那这个工具对于发现因此导致的许多常见漏洞十分方便。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=dbaeumer.vscode-eslint\">ESLint </a>——你在编写代码的时候，利用这个软件可以轻易获取有关漏洞的提示，而且在编码过程中，它还可以帮助你养成良好的编码习惯。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=spywhere.guides\">Guides</a> ——这一工具可以被用来添加额外的指导行代码。这是另一个视觉提示，以确保你正确地括号了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=whtouche.vscode-js-console-utils\">JavaScript Console Utils </a>——使控制台日志记录变得更为简单可行。如果你像大多数开发人员一样，你会发现自己需要在调试流中登录到控制台（我知道我们应该使用调试器）。这个实用的程序使得创建有用的console.log()语句变得易如反掌。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=streetsidesoftware.code-spell-checker\">Code Spell Checker</a> ——这一工具正如其名，是拼写检查程序。漏洞的的另一个常见来源是变量或函数名。这一拼写检查工具可以查找不常见的单词，而且还可以把我们用JavaScript编写的东西进行有效的审核。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=eamodio.gitlens\">Git Lens</a> ——可以让我们对某文件何时、以及由何人进行更改变得一目了然。当代码被破坏时，我们就能找到该负责任的人，而不是让你当替罪羊了。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=christian-kohler.path-intellisense\">Path Intellisense</a> ——文件路径自动完成程序。这样一来从其他文件中导入重要的东西就非常方便了。这一工具使文件导航变得轻而易举。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=esbenp.prettier-vscode\">Prettier </a>——自动代码格式化程序。忘掉那些你不得不手动缩进代码的日子吧，有了这个工具，事情就变得简单多啦。这个程序会比你自己做得更快更好。对这个程序我是鼎力推荐的。</li>\n<li><a href=\"https://marketplace.visualstudio.com/items?itemName=robertohuertasm.vscode-icons\">VSCode-Icons</a> ——将图标添加到文件谱中。如果文件结构非常不科学，你的眼睛想罢工的话，这个程序可能会有所帮助。它对于你正在制作的任何文件都能提供有用的图标辅助，能使你更为轻易地区分看到的内容。</li>\n</ul>\n<h3>总结</h3>\n<p>你肯定也有自己中意的工具，这些工具对你的开发工作来说是必不可少的。也希望我上面提到的一些工具能够提高你的工作效率。</p>\n<p>但是千万不要落入贪多不烂的陷阱，因为它可能耗费很多时间。</p>\n<p>希望你能在评论区留下你最喜欢的工具，这样我们就可以共同进步了。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113785\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113785votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113785\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 8 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/4f40ac43ac01e64e0f4b96cceb82a2b2bd8898a3.jpg"}
{"url_object_id": "9ea437f3d3d30a092e2c2f413d7f863b", "title": ["这种 Unicode 符号，让百万人中招下了假应用……"], "url": "http://blog.jobbole.com/113609/", "create_date": "2018/02/01", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3ly1fo11hn13nkj20kr0dw42b.jpg"], "praise_nums": "1", "comment_nums": 0, "fav_nums": 1, "tags": "IT技术,Unicode", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://gojko.net/2017/11/07/five-things-about-unicode.html\">Gojko Adzic</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><p><img class=\"aligncenter\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3ly1fo11hn13nkj20kr0dw42b.jpg\" width=\"690\" height=\"462\"></p>\n<p>2017年11月 BBC 报道了一个假冒 WhatsApp 的新闻。假应用似乎与官方应用属于同一个开发者名下。原来这些骗子通过在开发者名字中加入 Unicode 的非打印空格（nonprintable space），绕开验证。在 Google Play 维护人员发现之前，下载假应用超过 100 万人。</p>\n<p><img id=\"pic\" class=\"aligncenter\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fo11eelthtj20ee0ekwis.jpg\"></p>\n<p>Unicode 是极其有价值的标准，使得电脑、智能手机和手表，在全球范围内以同样的方式显示同样的消息。不幸的是，它的复杂性使其成为了骗子和恶作剧者的金矿。如果像 Google 这样的巨头都不能抵御 Unicode 造成的基本问题，那对小一点的公司来说，这可能就像是必输的战役了。然而，大多数这些问题都是围绕着几个漏洞利用的。以下是关于 Unicode 所有开发者都应该知道的前五件事，并用来防止欺诈。</p>\n<h3>1. 很多 Unicode 代码点是不可见的</h3>\n<p>Unicode 中有一些零宽度代码点，例如零宽度连接器（U+200D）和零宽度非连接器（U+200C），它们都暗示了连字符工具。零宽度代码点对屏幕显示没有可见的影响，但是它们仍会影响字符串比较。这也是假 WhatApp 应用的骗子能这么长时间不被发现的原因。这些字符大多数都在一般标点符号区（从  U+2000 到 U+206F）。一般来说，没有理由允许任何人在标识符中使用这个区的代码点，所以它们是最不易过滤的。但是该区域外也有部分其他不可见的特别代码，比如蒙古文元音分隔符（U+180E）。</p>\n<p>一般来说，用 Unicode 对唯一性约束做简单的字符串比较，这很危险的。有一个可能的解决方法，限制允许用作标识符及其他任何能被骗子滥用的数据的字符集。不幸的是，这并非该问题的彻底解决方法。</p>\n<h3>2. 很多代码点看起来很相似</h3>\n<p>Unicode 努力覆盖全世界书写语言中的所有符号，必然有很多看起来相似的字符。人类甚至无法把它们区分开来，但是电脑能毫不费力地识别出差别。对这个问题的一种令人惊讶的滥用是拟态（Mimic）。拟态是一项有趣的应用，将软件开发所使用的常见符号，例如冒号和分号，替换成相似的 Unicode 字符。这能在代码编译工具中制造混乱，留下一脸懵逼的开发者。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/9ef4204bb9d07e30c4be079a88fa2606.png\"><img class=\"alignnone wp-image-66894\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/9ef4204bb9d07e30c4be079a88fa2606.png\"></a></p>\n<p>相似符号带来的问题，远不止是简单的恶作剧。花哨的叫法是 homomorphic attacks（同态攻击）。利用这些漏洞，会导致严重的安全问题。在 2017 年 4 月，一位安全研究员通过<a href=\"https://www.theguardian.com/technology/2017/apr/19/phishing-url-trick-hackers\">混合不同字符集中的字母</a>，成功地注册了一个看起来与 apple.com 非常相似的域名，甚至为它拿到了 SSL 证书。各大浏览器都愉快地显示了 SSL 挂锁，将该域名列为安全域名。</p>\n<p>与混合可见字符和不可见字符相似，没有道理允许标识符，尤其是域名，使用混合字符集名。大多数浏览器已经采取了行动，将混合字符集域名显示为十六进制的 unicode 值以对其进行处罚，这样用户就不会轻易地被迷惑。如果你向用户显示标识符，比如说在搜索结果中，考虑类似的方法来避免混淆。但是，这也不是完美的解决方法。某些域名可以轻易地用一个非拉丁字符集中的单单一个区来构建，比如 ap.com 或者 chase.com。</p>\n<p>Unicode 协会出版了一张<a href=\"http://www.unicode.org/Public/security/revision-03/confusablesSummary.txt\">易混淆字符表</a>，可能作为自动检查潜在诈骗的好参考。另一方面，如果你想找一个快速创造疑惑的方法，看看 <a href=\"http://shapecatcher.com/\">Shapecatcher</a> 吧。它是一个奇妙工具，列举了视觉上像图画的 Unicode 符号。</p>\n<h3>3. 规范化并不那么规范</h3>\n<p>规范化对像用户名这样的标识符来说非常重要，帮助人们用不同的方法输入值，但是用一致的方法来处理。规范标识符的一个常见方法是把所有字符都转变成小写，确保 JamesBond 和 jamesbond 是一样的。</p>\n<p>因为有如此多的相似字符和交叉集，不同的语言或者 unicode 处理库，可能应用不同的规范化策略。如果在若干地方进行了规范化，会潜在地带来安全风险。简单来说，不要假设小写转换在应用软件中的不同部分是一样的。来自 Spotify 的 Mikael Goldmann 在他们的一名用户发现了一个盗用账户的方法后，于 2013 年针对这个问题写了一份事件分析。攻击者可以注册其他人用户名的变体，比如 BIGBIRD，会转换成标准的账户名 bigbird。该应用软件的不同层对单词的规范化不同，使得人们能够注册模仿账号，而重置目标账户的密码。</p>\n<h3>4. 屏幕显示长度和内存大小无关</h3>\n<p>使用基础拉丁字符集和大多数欧洲字符集时，一段文本在屏幕或者纸上所占的空间大致与符号数成比例，大致与文本的内存大小成比例。这也是 EM 和 EN 成为流行长度单位的原因。但使用 Unicode 时，像这样任何种类的假设都会变得危险。有像 Bismallah Ar-Rahman Ar-Raheem (U+FDFD)这样可爱的字符，单单一个字符就比大多数英文单词都要长，能够轻易地超过网页上假定的视觉外框。这意味着基于字符串字符长度的任何种类的自动换行，或者文本中断算法都能轻易被愚弄。大多数终端程序要求固定宽度的字体，所以在这些程序中显示的话，你会看到右引号完全标在了错误的位置上。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/8807a0fdc5995ae8ec722f39a31300b3.png\"><img class=\"alignnone size-medium wp-image-66895\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/8807a0fdc5995ae8ec722f39a31300b3.png\"></a></p>\n<p>该问题一种滥用是 zalgo 文本生成器，它在一段文本周围加上垃圾，让这些东西占据了更多的垂直空间。</p>\n<p>当然了，整个不可见代码点的问题导致屏幕长度和内存大小无关。所以与输入区恰好合适的东西可能长到能摧毁一个数据库区。过滤不可见字符来规避问题还不够，因为还有很多不占用它们自己空间的其他例子。</p>\n<p>混合占据前一个字母上的空间的拉丁字符（比如 U+036B 和 U+036C），这样你能在一行文本行中写多行文本（Nu036BOu036C 产生 NͫOͬ）。吟诵标记是用来示意吟唱希伯来圣经经文的语调的。这些吟诵标记能够在同样的视觉空间中无限堆叠，意味着他们能被轻易地滥用，将大量信息编写进屏幕上的一个字符空间。Martin Kleppe 用<a href=\"http://aem1k.com/%D7%90/\">吟诵标记</a>为浏览器编码了 Conway’s Game of Life 的实现。看看该页面的源代码吧，你会感到震惊的。</p>\n<h3>5. Unicode 远不止是被动数据</h3>\n<p>有些代码点是用来影响输出字符的显示方式的，意味着用户不仅可以复制粘贴数据，也能键入处理指令。一个常见恶作剧是，使用右到左覆盖（U+202E）来转变文本方向。例如，用<a href=\"https://www.google.co.uk/maps/search/%E2%80%AEsajnin/\">谷歌地图搜索 Ninjas</a>。该查询字符串实际上转换了搜索单词的方向，尽管页面上的搜索区域显示着“ninjas”，但是实际上搜索的是“sajnin”。</p>\n<p>这种漏洞利用非常流行，<a href=\"https://xkcd.com/1137/\">XKCD</a> 漫画网站上有一张相应漫画。</p>\n<p><a href=\"http://jbcdn2.b0.upaiyun.com/2017/11/a19aec609e8062ff7823e8ce4c42db43.png\"><img class=\"size-medium wp-image-66896 aligncenter\" src=\"http://jbcdn2.b0.upaiyun.com/2017/11/a19aec609e8062ff7823e8ce4c42db43.png\"></a></p>\n<p>混合数据和处理指令——可有效执行的代码——不是个好主意，尤其是如果用户可以直接键入。这对任何在页面显示中包括的用户键入来说都是大问题。大多数网页开发者知道通过移除 HTML 标签来清理用户键入，但是也需要注意键入中的 Unicode 控制字符。这是个应对任何脏话或者内容过滤器的简单方法——只要把单词倒转过来，在开始加上右到左覆盖。</p>\n<p>右到左（Right-to-left）hack 可能无法嵌入恶意代码，但是如果你不小心的话，它能扰乱内容或者翻转整个页面。抵御这个问题，常见方法是把用户提供的内容放进一个输入区域或者文本区域，这样处理指令不会影响页面。</p>\n<p>处理指令对显示的另一个特别问题是字型变换选取器。为了避免为每种颜色的 emoji 创造单独的代码，Unicode 允许使用字型变换选取器来混合基本符号和颜色。白旗，字型变换选取器和彩虹正常会产生彩虹颜色的旗。但是并不是所有变换都可行。在 2017 年 1 月，iOS unicode 处理中的一个 bug 允许恶作剧者，仅仅发送一条特制信息就远程导致 iPhone 瘫痪。该信息包括白旗，字型变换选取器和一个零。iOS CoreText 陷入了恐慌模式，想要挑出正确的变换，导致了 OS 的瘫痪。这个恶作剧在直接信息，群聊甚至分享联系人名片中都奏效。这个问题也影响了 iPad，甚至部分 MacBook。该恶作剧针对的目标人群，面对系统崩溃，无能为力。</p>\n<p>相似的 bug 每几年就发生一次。在 2013 年，出现了一个阿拉伯字符处理 bug，它能使 OSX 和 iOS 崩溃。所有这些 bug 都深深埋藏在 OS 文本处理模块里，所以典型客户端应用开发者根本无法躲开它们。</p>\n<p>想知道其他有趣的处理指令，请移步  <a href=\"https://github.com/Codepoints/awesome-codepoints\">Awesome Codepoints</a> 清单。想知道更多 Unicode 造成的混乱，请阅读我的书 <a href=\"https://gojko.net/books/humans-vs-computers/\">Humans vs Computers</a>。</p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113609\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113609votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113609\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">精算狗</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui\">\r\n\t\t\t<img src=\"http://jbcdn2.b0.upaiyun.com/2015/04/8fbdaaa5ea6d3b49c8c1c825aafeb5d9.png\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            简介还没来得及写 :）        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/chenyahui\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/chenyahui/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/chenyahui/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 22</a> · <a title=\"QQ：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：564968845\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/af97550999b0e4d2774bb8793f1174ce118b4be3.jpg"}
{"url_object_id": "9a8e2349b707da31888be54ff0b61a76", "title": ["Python 是各年龄段开发者最爱的语言"], "url": "http://blog.jobbole.com/112168/", "create_date": "2018/02/06", "front_image_url": ["http://wx2.sinaimg.cn/mw690/7cc829d3gy1fo5u1rz85cj21hc0u00wa.jpg"], "praise_nums": "2", "comment_nums": 3, "fav_nums": 1, "tags": "开发,Python,编程语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>在 HackerRank 的 2018 开发者技能调查中，<a href=\"http://blog.jobbole.com/113526/\" target=\"_blank\">JavaScript 或许是最受雇主欢迎的编程语言</a>，但根据 HackerRank 的爱恨指数数据，Python 赢得了全年龄段开发者的芳心。</p>\n<p><img class=\"alignnone\" src=\"http://wx2.sinaimg.cn/mw690/7cc829d3gy1fo5u1rz85cj21hc0u00wa.jpg\" width=\"690\" height=\"388\"></p>\n<h2>开发者喜欢哪种语言？</h2>\n<p>注：语言偏好图是基于爱恨指数（Love-Dislike Index），这个指数 = （喜欢某语言的开发者的百分比） – （不喜欢相同语言的开发者的百分比）。这有助于我们确定给定编程语言或框架的正面或负面情绪。</p>\n<p>100％的成绩=最喜欢的成绩，-100％的成绩 = 最不喜欢的成绩。</p>\n<h3>所有年龄段的开发者</h3>\n<ol>\n<li>Python</li>\n<li>C</li>\n<li>C++、Java</li>\n<li>JavaScript</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fo5snca2pgj20i10ixta4.jpg\"></p>\n<p>注：</p>\n<ul>\n<li><span style=\"color: #ff0000;\">比例分数为负数的，标题不喜欢该语言的，远大于喜欢该语言的。</span></li>\n<li><span style=\"color: #ff0000;\">后面图片，仅展示开发者喜欢的语言。</span></li>\n</ul>\n<h3>18~24 岁的开发者</h3>\n<ol>\n<li>Python</li>\n<li>C++</li>\n<li>C</li>\n<li>JavaScript</li>\n<li>Java</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fo5pl8jh34j20jh0b5dgm.jpg\"></p>\n<h3>25~34 岁开发者</h3>\n<ol>\n<li>Python</li>\n<li>C</li>\n<li>Go</li>\n<li>JavaScript</li>\n<li>TypeScript</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3gy1fo5pl9lf2zj20k10dtwfh.jpg\"></p>\n<h3>35~44 岁开发者</h3>\n<ol>\n<li>Python</li>\n<li>C</li>\n<li>Go</li>\n<li>TypeScript</li>\n<li>C#</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3gy1fo5pla6ysqj20k00eiwfk.jpg\"></p>\n<h3>45~54 岁开发者</h3>\n<ol>\n<li>Python</li>\n<li>Go</li>\n<li>C</li>\n<li>TypeScript</li>\n<li>C++</li>\n<li>Erlang （这个群体学习 Erlang 意愿好高）</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3gy1fo5plb7ituj20k40em75d.jpg\"></p>\n<h3>55 岁以上开发者</h3>\n<ol>\n<li>Swift</li>\n<li>C</li>\n<li>Python</li>\n<li>Java</li>\n<li>C++</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fo5plcihdgj20k30c5js8.jpg\"></p>\n<p>Python 以其简单性，可读性和诸多科学计算库而闻名。它也是计算机科学入门课程的一部分。</p>\n<p>在新语言中有一种不同寻常的趋势：相比年老开发者，年轻开发者更喜欢较新的语言（如Go，Kotlin 和 Scala）。事实上，Go 创造了最大的分歧之一。 18-24 岁的开发者并不关心，但 45-54 岁的开发者认为这是他们最喜欢的语言之一。 JavaScript 则正好相反。</p>\n<p>Go 在内的许多新语言都体现了来自旧语言的学习。 Go 的主要设计师之一 Ken Thompson 以前参与创造了 C 语言。年轻开发者对知识有天生的渴望，他们更有可能全面学习语言，甚至是那些他们不喜欢的语言。年老开发者会根据自己的经验，选择他们认为经得起时间考验的语言。</p>\n<p> </p>\n<h3>相关文章</h3>\n<ul>\n<li>《<a href=\"http://blog.jobbole.com/113526/\" target=\"_blank\">2018 开发者技能调查：这些编程语言受欢迎</a>》</li>\n<li>《<a href=\"http://blog.jobbole.com/113525/\" target=\"_blank\">2018 年，程序员要具备哪些核心竞争力？</a>》</li>\n</ul>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"112168\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"112168votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"112168\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 3 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 263</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/876d4b12a0f61e81694146eb0787d1c3754fb1bd.jpg"}
{"url_object_id": "6577977ccb5507514a22f0ef401d210d", "title": ["2018 开发者技能调查：这些编程语言受欢迎"], "url": "http://blog.jobbole.com/113526/", "create_date": "2018/01/25", "front_image_url": ["http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhvezgh4j20jx0aggm9.jpg"], "praise_nums": "1", "comment_nums": 1, "fav_nums": 1, "tags": "开发,编程语言", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/aoi\">伯小乐</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><p>近日国外开发者平台 HankerRank 发布了 2018 年开发者技能调查报告，本文摘录部分和编程语言相关的调查结果。</p>\n<p>尽管经常有新编程语言出现，但程序员需要掌握核心、传统语言也是非常重要的。 总的来说，在「雇主青睐的编程语言」中，JavaScript、Java、Python、C++、C、C# 和 PHP 排在前位。</p>\n<h3>所有行业</h3>\n<p>JavaScript 第一，Java 稍微比 JS 少一点排第二，Python 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhvezgh4j20jx0aggm9.jpg\"></p>\n<h3>汽车 &amp; 运输行业</h3>\n<p>JS 第一、Java 第二、Python 第三、C++ 第四、C# 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrvb4gnj20k30ag0tf.jpg\"></p>\n<h3>计算机硬件</h3>\n<p>C 语言和 C++ 的需求量，明显高于其他语言。Python 第三、Java 第四、JS 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx3.sinaimg.cn/large/7cc829d3ly1fnrhw6oxxnj20k20adaaq.jpg\"></p>\n<h3>金融服务</h3>\n<p>Java 第一、JS 第二、Python 第三、C# 第四、C++ 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fnrhrwgvvej20jw0ahaaq.jpg\"></p>\n<h3>政府</h3>\n<p>Java 第一、JS 第二、C# 第三</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrx8xc9j20jw0a974x.jpg\"></p>\n<h3>卫生保健</h3>\n<p>JS 第一、Java 第二、Python 第三、C# 第四</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhrxts28j20jw0abdgh.jpg\"></p>\n<h3>媒体/娱乐/游戏</h3>\n<p>JS 第一、Python 第二、Java 第三、PHP 第四</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx2.sinaimg.cn/large/7cc829d3ly1fnrhrydd76j20jx0agmxv.jpg\"></p>\n<h3>零售 &amp; 电商</h3>\n<p>Java 第一、JS 第二、Python 第三</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx1.sinaimg.cn/large/7cc829d3ly1fnrhryzgeej20jv0a63z6.jpg\"></p>\n<h3>安全</h3>\n<p>Java 第一、Python 第二、JS 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhw76pymj20k109qq3k.jpg\"></p>\n<h3>技术</h3>\n<p>Java 第一、JS 第二、Python 第三、C++ 第四、C 第五；</p>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3ly1fnrhs05ww2j20ju09r0td.jpg\"></p>\n<h3>开发者计划学习的编程语言</h3>\n<ol>\n<li>Go （得益于 Google）</li>\n<li>Python</li>\n<li>Scala</li>\n<li>Kotlin</li>\n<li>Ruby</li>\n<li>R</li>\n<li>Typescript</li>\n<li>Swift</li>\n<li>Rust</li>\n<li>Haskell</li>\n</ol>\n<p><img id=\"pic\" class=\"\" src=\"http://wx4.sinaimg.cn/large/7cc829d3gy1fnrq4gi03wj20jm0cq3zk.jpg\"></p>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113526\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113526votetotal\">1</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113526\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 1 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 1 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">伯小乐</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/aoi\">\r\n\t\t\t<img src=\"http://www.jobbole.com/wp-content/uploads/2015/11/f2bb4f6f428a49476a2e91c355c8d150.jpg\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            伯乐在线小编一枚~~~~PS：我不是@小编辑，不要问我了        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/aoi\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/aoi/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/aoi/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 263</a>        </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/a23d4dd651e63b6379778b3eceede0c0b4e94d72.jpg"}
{"url_object_id": "97d4f4f8a0358726d2b64d6cfcbcc536", "title": ["直白介绍卷积神经网络（CNN）"], "url": "http://blog.jobbole.com/113819/", "create_date": "2018/04/08", "front_image_url": ["https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2017-05-28-at-11-41-55-pm.png"], "praise_nums": "5", "comment_nums": 4, "fav_nums": 26, "tags": "IT技术,CNN,机器学习", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文由 <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a> 翻译，<a href=\"http://www.jobbole.com/members/hanxiaomax\">艾凌风</a> 校稿。未经许可，禁止转载！<br>英文出处：<a target=\"_blank\" href=\"https://ujjwalkarn.me/2016/08/11/intuitive-explanation-convnets/\">ujjwalkarn.me</a>。欢迎加入<a target=\"_blank\" href=\"https://github.com/jobbole/translation-project\">翻译组</a>。</div><div>\n<h2>什么是卷积神经网络，它为何重要？</h2>\n<p>卷积神经网络（也称作 <strong>ConvNets</strong> 或 <strong>CNN</strong>）是<a href=\"https://ujjwalkarn.me/2016/08/09/quick-intro-neural-networks/\">神经网络</a>的一种，它在图像识别和分类等领域已被证明非常有效。 卷积神经网络除了为机器人和自动驾驶汽车的视觉助力之外，还可以成功识别人脸，物体和交通标志。</p>\n<p><img class=\"aligncenter\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2017-05-28-at-11-41-55-pm.png\" width=\"724\" height=\"362\"></p>\n<p style=\"text-align: center;\">图1</p>\n<p>如<strong>图1</strong>所示，卷积神经网络能够识别图片的场景并且提供相关标题（“足球运动员正在踢足球”），<strong>图2</strong>则是利用卷积神经网络识别日常物品、人类和动物的例子。最近，卷积神经网络在一些自然语言处理任务（如语句分类）中也发挥了很大作用。</p>\n<p><a href=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-4-17-11-pm.png\"><img class=\"aligncenter\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-4-17-11-pm.png\" width=\"693\" height=\"258\"></a></p>\n<p style=\"text-align: center;\">图2</p>\n<p>因此，卷积神经网络是当今大多数机器学习实践者的重要工具。但是，理解卷积神经网络并开始尝试运用着实是一个痛苦的过程。本文的主要目的是了解卷积神经网络如何处理图像。</p>\n<p>对于刚接触神经网络的人，我建议大家先阅读这篇<a href=\"https://ujjwalkarn.me/2016/08/09/quick-intro-neural-networks/\">关于多层感知机的简短教程</a> ，了解其工作原理之后再继续阅读本文。多层感知机即本文中的“完全连接层”。</p>\n<h2>LeNet 框架（20世纪90年代）</h2>\n<p>LeNet 是最早推动深度学习领域发展的卷积神经网络之一。这项由 Yann LeCun 完成的开创性工作自1988年以来多次成功迭代之后被命名为 <a href=\"http://yann.lecun.com/exdb/publis/pdf/lecun-01a.pdf\">LeNet5</a>。当时 LeNet 框架主要用于字符识别任务，例如阅读邮政编码，数字等。</p>\n<p>接下来，我们将直观地了解 LeNet 框架如何学习识别图像。 近年来有人提出了几种基于 LeNet 改进的新框架，但是它们的基本思路与 LeNet 并无差别，如果您清楚地理解了 LeNet，那么对这些新的框架理解起来就相对容易很多。</p>\n<div style=\"width: 466px\" class=\"wp-caption aligncenter\"><a href=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-4-59-29-pm.png\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-4-59-29-pm.png\" width=\"456\" height=\"109\"></a>\n<p class=\"wp-caption-text\">图3: 一个简单的卷积神经网络</p>\n</div>\n<p><strong>图</strong><strong>3</strong>中的卷积神经网络在结构上与原始的 LeNet 类似，并将输入图像分为四类：狗，猫，船或鸟（原始的 LeNet 主要用于字符识别任务）。 从上图可以看出，接收船只图像作为输入时，神经网络在四个类别中正确地给船只分配了最高概率值（0.94）。输出层中所有概率的总和应该是1（之后会做解释）。</p>\n<p><strong>图</strong><strong>3 </strong>的卷积神经网络中有四个主要操作：</p>\n<ol>\n<li>卷积</li>\n<li>非线性变换（ReLU）</li>\n<li>池化或子采样</li>\n<li>分类（完全连接层）</li>\n</ol>\n<p>这些操作是所有卷积神经网络的基本组成部分，因此了解它们的工作原理是理解卷积神经网络的重要步骤。下面我们将尝试直观地理解每个操作。</p>\n<h2>一张图片就是一个由像素值组成的矩阵</h2>\n<p>实质上，每张图片都可以表示为由像素值组成的矩阵。</p>\n<div style=\"width: 591px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/8-gif.gif\" width=\"581\" height=\"580\">\n<p class=\"wp-caption-text\">图4: 每张图片就是一个像素矩阵</p>\n</div>\n<p><a href=\"https://en.wikipedia.org/wiki/Channel_(digital_image)\">通道</a>（channel）是一个传统术语，指图像的一个特定成分。标准数码相机拍摄的照片具有三个通道——红，绿和蓝——你可以将它们想象为三个堆叠在一起的二维矩阵（每种颜色一个），每个矩阵的像素值都在0到255之间。</p>\n<p>而<a href=\"https://en.wikipedia.org/wiki/Grayscale\">灰度</a>图像只有一个通道。 鉴于本文的科普目的，我们只考虑灰度图像，即一个代表图像的二维矩阵。矩阵中每个像素值的范围在0到255之间——0表示黑色，255表示白色。</p>\n<h2>卷积</h2>\n<p>卷积神经网络的名字来源于<a href=\"http://en.wikipedia.org/wiki/Convolution\">“卷积”运算</a>。在卷积神经网络中，卷积的主要目的是从输入图像中提取特征。通过使用输入数据中的小方块来学习图像特征，卷积保留了像素间的空间关系。我们在这里不会介绍卷积的数学推导，但会尝试理解它是如何处理图像的。</p>\n<p>正如前文所说，每个图像可以被看做像素值矩阵。考虑一个像素值仅为0和1的5 × 5大小的图像（注意，对于灰度图像，像素值范围从0到255，下面的绿色矩阵是像素值仅为0和1的特殊情况）：</p>\n<p><img class=\"alignnone aligncenter\" src=\"https://ujwlkarn.files.wordpress.com/2016/07/screen-shot-2016-07-24-at-11-25-13-pm.png\" width=\"490\" height=\"444\"></p>\n<p>另外，考虑另一个 3×3 矩阵，如下图所示：</p>\n<p><img class=\"aligncenter\" src=\"https://ujwlkarn.files.wordpress.com/2016/07/screen-shot-2016-07-24-at-11-25-24-pm.png\" width=\"320\" height=\"274\"></p>\n<p>上述5 x 5图像和3 x 3矩阵的卷积计算过程如<strong>图</strong><strong>5</strong>中的动画所示：</p>\n<div style=\"width: 536px\" class=\"wp-caption aligncenter\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/07/convolution_schematic.gif\" width=\"526\" height=\"384\">\n<p class=\"wp-caption-text\">图5：卷积操作。输出矩阵称作“卷积特征”或“特征映射”</p>\n</div>\n<p>我们来花点时间理解一下上述计算是如何完成的。将橙色矩阵在原始图像（绿色）上以每次1个像素的速率（也称为“步幅”）移动，对于每个位置，计算两个矩阵相对元素的乘积并相加，输出一个整数并作为最终输出矩阵（粉色）的一个元素。注意，3 × 3矩阵每个步幅仅能“看到”输入图像的一部分。</p>\n<p>在卷积神经网路的术语中，这个3 × 3矩阵被称为“<strong>过滤器</strong>”或“核”或“特征探测器”，通过在图像上移动过滤器并计算点积得到的矩阵被称为“卷积特征”或“激活映射”或“<strong>特征映射</strong>”。重要的是要注意，过滤器的作用就是原始输入图像的特征检测器。</p>\n<p>从上面的动画可以明显看出，对于同一张输入图像，不同的过滤器矩阵将会产生不同的特征映射。例如，考虑如下输入图像：</p>\n<p><img class=\"alignnone\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/111.png\" width=\"166\" height=\"164\"></p>\n<p>在下表中，我们可以看到上图在不同过滤器下卷积的效果。如图所示，只需在卷积运算前改变过滤器矩阵的数值就可以执行边缘检测，锐化和模糊等不同操作 [<a href=\"http://docs.gimp.org/en/plug-in-convmatrix.html\">8</a>] —— 这意味着不同的过滤器可以检测图像的不同特征，例如边缘， 曲线等。更多此类示例可在 <a href=\"http://docs.gimp.org/en/plug-in-convmatrix.html\">这里</a> 8.2.4节中找到。</p>\n<p><img class=\"alignnone\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-05-at-11-03-00-pm.png\" width=\"658\" height=\"1082\"></p>\n<p>另一个理解卷积操作的好方法可以参考下面<strong>图</strong><strong>6</strong>中的动画：</p>\n<div style=\"width: 490px\" class=\"wp-caption aligncenter\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/giphy.gif\" width=\"480\" height=\"272\">\n<p class=\"wp-caption-text\">图6: 卷积操作</p>\n</div>\n<p>一个过滤器（红色边框）在输入图像上移动（卷积操作）以生成特征映射。在同一张图像上，另一个过滤器（绿色边框）的卷积生成了不同的特征图，如图所示。需要注意到，卷积操作捕获原始图像中的局部依赖关系很重要。还要注意这两个不同的过滤器如何从同一张原始图像得到不同的特征图。请记住，以上图像和两个过滤器只是数值矩阵。</p>\n<p>实际上，卷积神经网络在训练过程中会自己<em>学习</em>这些过滤器的值（尽管在训练过程之前我们仍需要指定诸如过滤器数目、大小，网络框架等参数）。我们拥有的过滤器数目越多，提取的图像特征就越多，我们的网络在识别新图像时效果就会越好。</p>\n<p>特征映射（卷积特征）的大小由我们在执行卷积步骤之前需要决定的三个参数[<a href=\"http://cs231n.github.io/convolutional-networks/\">4</a>]控制：</p>\n<ul>\n<li><strong>深度：</strong>深度对应于我们用于卷积运算的过滤器数量。在<strong>图</strong><strong>7</strong>所示的网络中，我们使用三个不同的过滤器对初始的船图像进行卷积，从而生成三个不同的特征图。可以将这三个特征地图视为堆叠的二维矩阵，因此，特征映射的“深度”为3。</li>\n</ul>\n<div style=\"width: 525px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-10-at-3-42-35-am.png\" width=\"515\" height=\"258\">\n<p class=\"wp-caption-text\">图7</p>\n</div>\n<ul>\n<li><strong>步幅：</strong>步幅是我们在输入矩阵上移动一次过滤器矩阵的像素数量。当步幅为1时，我们一次将过滤器移动1个像素。当步幅为2时，过滤器每次移动2个像素。步幅越大，生成的特征映射越小。</li>\n<li><strong>零填充：</strong>有时，将输入矩阵边界用零来填充会很方便，这样我们可以将过滤器应用于输入图像矩阵的边界元素。零填充一个很好的特性是它允许我们控制特征映射的大小。添加零填充也称为<em>宽卷积</em>，而不使用零填充是为<em>窄卷积</em>。 这在[<a href=\"http://www.wildml.com/2015/11/understanding-convolutional-neural-networks-for-nlp/\">14</a>]中有清楚的解释。</li>\n</ul>\n<h2>非线性部分介绍（ReLU）</h2>\n<p>如上文<strong>图</strong><strong>3</strong>所示，每次卷积之后，都进行了另一项称为 ReLU 的操作。ReLU 全称为修正线性单元（Rectified Linear Units），是一种非线性操作。 其输出如下图所示：</p>\n<div style=\"width: 617px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-10-at-2-23-48-am.png\" width=\"607\" height=\"190\">\n<p class=\"wp-caption-text\">图8: ReLU 函数</p>\n</div>\n<p>ReLU 是一个针对元素的操作（应用于每个像素），并将特征映射中的所有负像素值替换为零。ReLU 的目的是在卷积神经网络中引入非线性因素，因为在实际生活中我们想要用神经网络学习的数据大多数都是非线性的（卷积是一个线性运算 —— 按元素进行矩阵乘法和加法，所以我们希望通过引入 ReLU 这样的非线性函数来解决非线性问题）。</p>\n<p>从<strong>图</strong><strong>9</strong>可以很清楚地理解 ReLU 操作。它展示了将 ReLU 作用于<strong>图</strong><strong>6</strong>中某个特征映射得到的结果。这里的输出特征映射也被称为“修正”特征映射。</p>\n<div style=\"width: 653px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-6-18-19-pm.png\" width=\"643\" height=\"241\">\n<p class=\"wp-caption-text\">图9: ReLU 操作</p>\n</div>\n<p>其他非线性函数诸如 <strong>tanh</strong> 或 <strong>sigmoid</strong> 也可以用来代替 ReLU，但是在大多数情况下，ReLU 的表现更好。</p>\n<h2>池化</h2>\n<p>空间池化（也称为子采样或下采样）可降低每个特征映射的维度，并保留最重要的信息。空间池化有几种不同的方式：最大值，平均值，求和等。</p>\n<p>在最大池化的情况下，我们定义一个空间邻域（例如，一个2 × 2窗口），并取修正特征映射在该窗口内最大的元素。当然我们也可以取该窗口内所有元素的平均值（平均池化）或所有元素的总和。在实际运用中，最大池化的表现更好。</p>\n<p><strong>图</strong><strong>10</strong>展示了通过2 × 2窗口在修正特征映射（卷积+ ReLU 操作后得到）上应用最大池化操作的示例。</p>\n<div style=\"width: 1164px\" class=\"wp-caption aligncenter\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-10-at-3-38-39-am.png\" width=\"1154\" height=\"984\">\n<p class=\"wp-caption-text\">图10: 最大池化</p>\n</div>\n<p>我们将2 x 2窗口移动2个单元格（也称为“步幅”），并取每个区域中的最大值。如<strong>图</strong><strong>10</strong>所示，这样就降低了特征映射的维度。</p>\n<p>在<strong>图</strong><strong>11</strong>所示的网络中，池化操作分别应用于每个特征映射（因此，我们从三个输入映射中得到了三个输出映射）。</p>\n<div style=\"width: 880px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-6-19-37-pm.png\" width=\"870\" height=\"476\">\n<p class=\"wp-caption-text\">图11: 在修正特征映射上应用池化</p>\n</div>\n<p><strong>图</strong><strong>12</strong>展示了我们对<strong>图</strong><strong>9</strong>中经过 ReLU 操作之后得到的修正特征映射应用池化之后的效果。</p>\n<div style=\"width: 570px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-6-11-53-pm.png\" width=\"560\" height=\"239\">\n<p class=\"wp-caption-text\">图12: 池化</p>\n</div>\n<p>池化的作用是逐步减少输入的空间大小[<a href=\"http://cs231n.github.io/convolutional-networks/\">4</a>]。具体来说有以下四点：</p>\n<ul>\n<li>使输入（特征维度）更小，更易于管理</li>\n<li>减少网络中的参数和运算次数，因此可以控制<a href=\"https://en.wikipedia.org/wiki/Overfitting\">过拟合</a> [<a href=\"http://cs231n.github.io/convolutional-networks/\">4</a>]</li>\n<li>使网络对输入图像微小的变换、失真和平移更加稳健（输入图片小幅度的失真不会改池化的输出结果 —— 因为我们取了邻域的最大值/平均值）。</li>\n<li>可以得到尺度几乎不变的图像（确切的术语是“等变”）。这是非常有用的，这样无论图片中的物体位于何处，我们都可以检测到，（详情参阅[<a href=\"https://github.com/rasbt/python-machine-learning-book/blob/master/faq/difference-deep-and-normal-learning.md\">18</a>]和[<a href=\"https://www.quora.com/How-is-a-convolutional-neural-network-able-to-learn-invariant-features\">19</a>]）。</li>\n</ul>\n<h2>至此…</h2>\n<div style=\"width: 485px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-08-at-2-26-09-am.png\" width=\"475\" height=\"113\">\n<p class=\"wp-caption-text\">图13</p>\n</div>\n<p>目前为止，我们已经了解了卷积，ReLU 和池化的工作原理。这些是卷积神经网络的基本组成部分，理解这一点很重要。如<strong>图</strong><strong>13</strong>所示，我们有两个由卷积，ReLU 和 Pooling 组成的中间层 —— 第二个卷积层使用六个过滤器对第一层的输出执行卷积，生成六个特征映射。然后将 ReLU 分别应用于这六个特征映射。接着，我们对六个修正特征映射分别执行最大池化操作。</p>\n<p>这两个中间层的作用都是从图像中提取有用的特征，在网络中引入非线性因素，同时对特征降维并使其在尺度和平移上等变[<a href=\"https://github.com/rasbt/python-machine-learning-book/blob/master/faq/difference-deep-and-normal-learning.md\">18</a>]。</p>\n<p>第二个池化层的输出即完全连接层的输入，我们将在下一节讨论。</p>\n<h2>完全连接层</h2>\n<p>完全连接层是一个传统的多层感知器，它在输出层使用 softmax 激活函数（也可以使用其他分类器，比如 SVM，但在本文只用到了 softmax）。“完全连接”这个术语意味着前一层中的每个神经元都连接到下一层的每个神经元。 如果对多层感知器不甚了解，我建议您阅读<a href=\"https://ujjwalkarn.me/2016/08/09/quick-intro-neural-networks/\">这篇文章</a>。</p>\n<p>卷积层和池化层的输出代表了输入图像的高级特征。完全连接层的目的是利用这些基于训练数据集得到的特征，将输入图像分为不同的类。例如，我们要执行的图像分类任务有四个可能的输出，如<strong>图</strong><strong>14</strong>所示（请注意，图14没有展示出完全连接层中节点之间的连接）</p>\n<div style=\"width: 489px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-06-at-12-34-02-am.png\" width=\"479\" height=\"150\">\n<p class=\"wp-caption-text\">图14: 完全连接层——每个节点都与相邻层的其他节点连接</p>\n</div>\n<p>除分类之外，添加完全连接层也是一个（通常来说）比较简单的学习这些特征非线性组合的方式。卷积层和池化层得到的大部分特征对分类的效果可能也不错，但这些特征的组合可能会更好[<a href=\"https://stats.stackexchange.com/questions/182102/what-do-the-fully-connected-layers-do-in-cnns/182122#182122\">11</a>]。</p>\n<p>完全连接层的输出概率之和为1。这是因为我们在完全连接层的输出层使用了 softmax 激活函数。Softmax 函数取任意实数向量作为输入，并将其压缩到数值在0到1之间，总和为1的向量。</p>\n<h2>正式开始——使用反向传播进行训练</h2>\n<p>如上所述，卷积+池化层用来从输入图像提取特征，完全连接层用来做分类器。</p>\n<p>注意，在<strong>图</strong><strong>15</strong>中，由于输入图像是船，对于船类目标概率为1，其他三个类为0</p>\n<ul>\n<li>输入图像 = 船</li>\n<li>目标向量 = [0, 0, 1, 0]</li>\n</ul>\n<div style=\"width: 531px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-07-at-9-15-21-pm.png\" width=\"521\" height=\"183\">\n<p class=\"wp-caption-text\">图15：训练卷积神经网络</p>\n</div>\n<p>卷积网络的整体训练过程概括如下：</p>\n<ul>\n<li>步骤1：用随机值初始化所有过滤器和参数/权重</li>\n<li>步骤2：神经网络将训练图像作为输入，经过前向传播步骤（卷积，ReLU 和池化操作以在完全连接层中的前向传播），得到每个类的输出概率。</li>\n<li>假设上面船只图像的输出概率是 [0.2,0.4,0.1,0.3]</li>\n<li>由于权重是随机分配给第一个训练样本，因此输出概率也是随机的。</li>\n<li>步骤3：计算输出层的总误差（对所有4个类进行求和）</li>\n<li><strong>总误差</strong><strong>=∑ ½(目标概率 – 输出概率)²</strong></li>\n<li>步骤4：使用反向传播计算网络中所有权重的误差<em>梯度</em>，并使用<em>梯度下降</em>更新所有过滤器值/权重和参数值，以最小化输出误差。</li>\n<li>根据权重对总误差的贡献对其进行调整。</li>\n<li>当再次输入相同的图像时，输出概率可能就变成了 [0.1,0.1,0.7,0.1]，这更接近目标向量 [0,0,1,0]。</li>\n<li>这意味着网络已经<em>学会了</em>如何通过调整其权重/过滤器并减少输出误差的方式对特定图像进行正确分类。</li>\n<li>过滤器数量、大小，网络结构等参数在步骤1之前都已经固定，并且在训练过程中不会改变 —— 只会更新滤器矩阵和连接权值。</li>\n<li>步骤5：对训练集中的所有图像重复步骤2-4。</li>\n</ul>\n<p> </p>\n<p>通过以上步骤就可以<em>训练</em>出卷积神经网络 —— 这实际上意味着卷积神经网络中的所有权重和参数都已经过优化，可以对训练集中的图像进行正确分类。</p>\n<p>当我们给卷积神经网络中输入一个新的（未见过的）图像时，网络会执行前向传播步骤并输出每个类的概率（对于新图像，计算输出概率所用的权重是之前优化过，并能够对训练集完全正确分类的）。如果我们的训练集足够大，神经网络会有很好的泛化能力（但愿如此）并将新图片分到正确的类里。</p>\n<p><strong>注1</strong><strong>：</strong>为了给大家提供一个直观的训练过程，上述步骤已经简化了很多，并且忽略了数学推导过程。如果想要数学推导以及对卷积神经网络透彻的理解，请参阅 [<a href=\"http://cs231n.github.io/convolutional-networks/\">4</a>] 和 [<a href=\"http://andrew.gibiansky.com/blog/machine-learning/convolutional-neural-networks/\">12</a>]。</p>\n<p><strong>注</strong><strong>2</strong><strong>：</strong>上面的例子中，我们使用了两组交替的卷积和池化层。但请注意，这些操作可以在一个卷积神经网络中重复执行多次。实际上，现在效果最好的一些卷积神经网络都包含几十个卷积和池化层！ 另外，每个卷积层之后的池化层不是必需的。从下面的<strong>图</strong><strong>16</strong>中可以看出，在进行池化操作之前，我们可以连续进行多个卷积 + ReLU 操作。另外请注意图16卷积神经网络的每一层是如何展示的。</p>\n<div style=\"width: 571px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/car.png\" width=\"561\" height=\"272\">\n<p class=\"wp-caption-text\">图16</p>\n</div>\n<h2>卷积神经网络的可视化</h2>\n<p>一般来说，卷积步骤越多，神经网络能够学习识别的特征就更复杂。例如，在图像分类中，卷积神经网络在第一层可能会学习检测原始像素的边缘，然后在第二层利用这些边缘检测简单形状，然后在更高级的层用这些形状来检测高级特征，例如面部形状 [<a href=\"http://www.wildml.com/2015/11/understanding-convolutional-neural-networks-for-nlp/\">14</a>]。<strong>图</strong><strong>17</strong>演示了这个过程 —— 这些特征是使用<a href=\"http://web.eecs.umich.edu/~honglak/icml09-ConvolutionalDeepBeliefNetworks.pdf\">卷积深度信念网络</a>学习的，这张图片只是为了演示思路（这只是一个例子：实际上卷积过滤器识别出来的对象可能对人来说并没有什么意义）。</p>\n<div style=\"width: 668px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-10-at-12-58-30-pm.png\" width=\"658\" height=\"694\">\n<p class=\"wp-caption-text\">图17: 卷积深度信念网络学习特征</p>\n</div>\n<p>Adam Harley 创建了一个基于 MNIST 手写数字数据集 [<a href=\"http://scs.ryerson.ca/~aharley/vis/harley_vis_isvc15.pdf\">13</a>]训练卷积神经网络的可视化。我强烈推荐大家 <a href=\"http://scs.ryerson.ca/~aharley/vis/conv/flat.html\">使用它</a>来了解卷积神经网络的工作细节。</p>\n<p>我们在下图中可以看到神经网络对于输入数字“8”的具体操作细节。请注意，<strong>图</strong><strong>18</strong>中并未单独显示ReLU操作。</p>\n<div style=\"width: 565px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/conv_all.png\" width=\"555\" height=\"314\">\n<p class=\"wp-caption-text\">图18：基于手写数字训练卷积神经网络的可视化</p>\n</div>\n<p>输入图像包含 1024 个像素点（32 × 32 图像），第一个卷积层（卷积层1）由六个不同的5 × 5（步幅为1）过滤器与输入图像卷积而成。如图所示，使用六个不同的过滤器得到深度为六的特征映射。</p>\n<p>卷积层1之后是池化层1，它在卷积层1中的六个特征映射上分别进行2 × 2最大池化（步幅为2）。将鼠标指针移动到池化层的任意像素上，可以观察到它来自于2 x 2网格在前一个卷积层中的作用（如<strong>图</strong><strong>19</strong>所示）。注意到2 x 2网格中具有最大值（最亮的那个）的像素点会被映射到池化层。</p>\n<div style=\"width: 508px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/screen-shot-2016-08-06-at-12-45-35-pm.png\" width=\"498\" height=\"119\">\n<p class=\"wp-caption-text\">图19：池化操作可视化</p>\n</div>\n<p>池化层1之后是十六个执行卷积操作的5 × 5（步幅为1）卷积过滤器。然后是执行2 × 2最大池化（步幅为2）的池化层2。 这两层的作用与上述相同。</p>\n<p>然后有三个完全连接（FC）层：</p>\n<ul>\n<li>第一个FC层中有120个神经元</li>\n<li>第二个FC层中有100个神经元</li>\n<li>第三个FC层中的10个神经元对应于10个数字 —— 也称为输出层</li>\n</ul>\n<p>注意，在<strong>图</strong><strong>20</strong>中，输出层的10个节点每一个都连接到第二个完全连接层中的全部100个节点（因此称为完全连接）。</p>\n<p>另外，注意为什么输出层中唯一明亮的节点是’8’ —— 这意味着神经网络对我们的手写数字进行了正确分类（节点亮度越高表示它的输出更高，即8在所有数字中具有最高的概率）。</p>\n<div style=\"width: 501px\" class=\"wp-caption alignnone\"><img class=\"\" src=\"https://ujwlkarn.files.wordpress.com/2016/08/final.png\" width=\"491\" height=\"102\">\n<p class=\"wp-caption-text\">图20：完全连接层可视化</p>\n</div>\n<p>该可视化系统的 3D 版本<a href=\"http://scs.ryerson.ca/~aharley/vis/conv/\">在此</a>。</p>\n<h2>其他卷积神经网络框架</h2>\n<p>卷积神经网络始于20世纪90年代初。我们已经讨论了LeNet，它是最早的卷积神经网络之一。下面列出了其他一些有影响力的神经网络框架 [<a href=\"https://medium.com/towards-data-science/neural-network-architectures-156e5bad51ba\">3</a>] [<a href=\"http://cs231n.github.io/convolutional-networks/\">4</a>]。</p>\n<ul>\n<li><strong>LeNet (20</strong><strong>世纪90</strong><strong>年代)</strong><strong>：</strong>本文已详述。</li>\n<li><strong>20</strong><strong>世纪</strong><strong>90</strong><strong>年代到</strong><strong>2012</strong><strong>年：</strong>从20世纪90年代后期到2010年初，卷积神经网络正处于孵化期。随着越来越多的数据和计算能力的提升，卷积神经网络可以解决的任务变得越来越有趣。</li>\n<li><strong>AlexNet</strong><strong>（2012</strong><strong>）</strong> – 2012年，Alex Krizhevsky（和其他人）发布了 <a href=\"https://papers.nips.cc/paper/4824-imagenet-classification-with-deep-convolutional-neural-networks.pdf\">AlexNet</a>，它是提升了深度和广度版本的 LeNet，并在2012年以巨大优势赢得了 ImageNet 大规模视觉识别挑战赛（ILSVRC）。这是基于之前方法的重大突破，目前 CNN 的广泛应用都要归功于 AlexNet。</li>\n<li><strong>ZF Net</strong><strong>（2013</strong><strong>）</strong> – 2013年 ILSVRC 获奖者来自 Matthew Zeiler 和 Rob Fergus 的卷积网络。它被称为 <a href=\"http://arxiv.org/abs/1311.2901\">ZFNet</a>（Zeiler 和 Fergus Net 的简称）。它在 AlexNet 的基础上通过调整网络框架超参数对其进行了改进。</li>\n<li><strong>GoogLeNet</strong><strong>（</strong><strong>2014</strong><strong>）</strong> – 2014年 ILSVRC 获奖者是 Google 的 <a href=\"http://arxiv.org/abs/1409.4842\">Szegedy 等人</a>的卷积网络。其主要贡献是开发了一个初始模块，该模块大大减少了网络中的参数数量（4M，而 AlexNet 有60M）。</li>\n<li><strong>VGGNet</strong><strong>（</strong><strong>2014</strong><strong>）</strong> – 2014年 ILSVRC 亚军是名为 <a href=\"http://www.robots.ox.ac.uk/~vgg/research/very_deep/\">VGGNet</a> 的网络。其主要贡献在于证明了网络深度（层数）是影响性能的关键因素。</li>\n<li><strong>ResNets</strong><strong>（</strong><strong>2015</strong><strong>）</strong> – 何凯明（和其他人）开发的<a href=\"http://arxiv.org/abs/1512.03385\">残差网络</a>是2015年 ILSVRC 的冠军。ResNets 是迄今为止最先进的卷积神经网络模型，并且是大家在实践中使用卷积神经网络的默认选择（截至2016年5月）。</li>\n<li><strong>DenseNet</strong><strong>（</strong><strong>2016</strong><strong>年</strong><strong>8</strong><strong>月）</strong> – 最近由黄高等人发表，密集连接卷积网络的每一层都以前馈方式直接连接到其他层。 DenseNet 已经在五项竞争激烈的对象识别基准测试任务中证明自己比之前最先进的框架有了显着的改进。具体实现请参考<a href=\"https://github.com/liuzhuang13/DenseNet\">这个网址</a>。</li>\n</ul>\n<h2>结论</h2>\n<p>本文中，我尝试着用一些简单的术语解释卷积神经网络背后的主要概念，同时简化/略过了几个细节部分，但我希望这篇文章能够让你直观地理解其工作原理。</p>\n<p>本文最初是受 Denny Britz 《<a href=\"http://www.wildml.com/2015/11/understanding-convolutional-neural-networks-for-nlp/\">理解卷积神经网络在自然语言处理上的运用</a>》这篇文章的启发（推荐阅读），文中的许多解释是基于这篇文章的。为了更深入地理解其中一些概念，我鼓励您阅读<a href=\"http://cs231n.stanford.edu/\">斯坦福大学卷积神经网络课程</a>的<a href=\"http://cs231n.github.io/\">笔记</a>以及一下参考资料中提到的其他很棒的资源。如果您对上述概念的理解遇到任何问题/建议，请随时在下面留言。</p>\n<p>文中所使用的所有图像和动画均属于其各自的作者，陈列如下。</p>\n<h2>参考</h2>\n<ol>\n<li><a href=\"https://github.com/karpathy/neuraltalk2\">karpathy/neuraltalk2</a>: Efficient Image Captioning code in Torch, <a href=\"http://cs.stanford.edu/people/karpathy/neuraltalk2/demo.html\">Examples</a></li>\n<li>Shaoqing Ren, et al, “Faster R-CNN: Towards Real-Time Object Detection with Region Proposal Networks”, 2015, <a href=\"http://arxiv.org/pdf/1506.01497v3.pdf\">arXiv:1506.01497</a></li>\n<li><a href=\"https://medium.com/towards-data-science/neural-network-architectures-156e5bad51ba\">Neural Network Architectures</a>, Eugenio Culurciello’s blog</li>\n<li><a href=\"http://cs231n.github.io/convolutional-networks/\">CS231n Convolutional Neural Networks for Visual Recognition, Stanford</a></li>\n<li><a href=\"https://www.clarifai.com/technology\">Clarifai/Technology</a></li>\n<li><a href=\"https://medium.com/@ageitgey/machine-learning-is-fun-part-3-deep-learning-and-convolutional-neural-networks-f40359318721#.2gfx5zcw3\">Machine Learning is Fun! Part 3: Deep Learning and Convolutional Neural Networks</a></li>\n<li><a href=\"http://deeplearning.stanford.edu/wiki/index.php/Feature_extraction_using_convolution\">Feature extraction using convolution, Stanford</a></li>\n<li><a href=\"https://en.wikipedia.org/wiki/Kernel_(image_processing)\">Wikipedia article on Kernel (image processing)</a></li>\n<li><a href=\"http://cs.nyu.edu/~fergus/tutorials/deep_learning_cvpr12\">Deep Learning Methods for Vision, CVPR 2012 Tutorial</a></li>\n<li><a href=\"http://mlss.tuebingen.mpg.de/2015/slides/fergus/Fergus_1.pdf\">Neural Networks by Rob Fergus, Machine Learning Summer School 2015</a></li>\n<li><a href=\"http://stats.stackexchange.com/a/182122/53914\">What do the fully connected layers do in CNNs?</a></li>\n<li><a href=\"http://andrew.gibiansky.com/blog/machine-learning/convolutional-neural-networks/\">Convolutional Neural Networks, Andrew Gibiansky</a></li>\n<li>W. Harley, “An Interactive Node-Link Visualization of Convolutional Neural Networks,” in ISVC, pages 867-877, 2015 (<a href=\"http://scs.ryerson.ca/~aharley/vis/harley_vis_isvc15.pdf\">link</a>). <a href=\"http://scs.ryerson.ca/~aharley/vis/conv/flat.html\">Demo</a></li>\n<li><a href=\"http://www.wildml.com/2015/11/understanding-convolutional-neural-networks-for-nlp/\">Understanding Convolutional Neural Networks for NLP</a></li>\n<li><a href=\"http://andrew.gibiansky.com/blog/machine-learning/convolutional-neural-networks/\">Backpropagation in Convolutional Neural Networks</a></li>\n<li><a href=\"https://adeshpande3.github.io/adeshpande3.github.io/A-Beginner\" s-guide-to-understanding-convolutional-neural-networks-part-2>A Beginner’s Guide To Understanding Convolutional Neural Networks</a></li>\n<li>Vincent Dumoulin, et al, “A guide to convolution arithmetic for deep learning”, 2015, <a href=\"http://arxiv.org/pdf/1603.07285v1.pdf\">arXiv:1603.07285</a></li>\n<li><a href=\"https://github.com/rasbt/python-machine-learning-book/blob/master/faq/difference-deep-and-normal-learning.md\">What is the difference between deep learning and usual machine learning?</a></li>\n<li><a href=\"https://www.quora.com/How-is-a-convolutional-neural-network-able-to-learn-invariant-features\">How is a convolutional neural network able to learn invariant features?</a></li>\n<li><a href=\"http://journal.frontiersin.org/article/10.3389/frobt.2015.00036/full\">A Taxonomy of Deep Convolutional Neural Nets for Computer Vision</a></li>\n<li>Honglak Lee, et al, “Convolutional Deep Belief Networks for Scalable Unsupervised Learning of Hierarchical Representations” (<a href=\"http://web.eecs.umich.edu/~honglak/icml09-ConvolutionalDeepBeliefNetworks.pdf\">link</a>)</li>\n</ol>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113819\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113819votetotal\">5</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113819\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 26 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i> 4 评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">MentosZ</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395\">\r\n\t\t\t<img src=\"http://tp4.sinaimg.cn/2010222395/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            统计学小硕，R/Python，数据挖掘，机器学习        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/2010222395\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/2010222395/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/2010222395/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 16</a> · <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/2010222395\"><i class=\"fa fa-weibo\"></i></a> <a title=\"QQ：676462459\" target=\"_blank\" href=\"#\"><i class=\"fa fa-qq\"></i></a> <a title=\"个人微信：13306016503\" target=\"_blank\" href=\"#\"><i class=\"fa fa-weixin\"></i></a> <a title=\"GitHub主页\" target=\"_blank\" href=\"https://github.com/MentosZ\"><i class=\"fa fa-github\"></i></a> <a title=\"Facebook主页\" target=\"_blank\" href=\"https://www.facebook.com/mengtao.zhao\"><i class=\"fa fa-facebook\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/f58012236ed750b24224c74eb8511c5331599118.jpg"}
{"url_object_id": "4e5a1f0a9df35564532b911089a9915e", "title": ["免费知识哪里来？Arxiv 使用指南"], "url": "http://blog.jobbole.com/113524/", "create_date": "2018/01/29", "front_image_url": ["http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg"], "praise_nums": "2", "comment_nums": 0, "fav_nums": 5, "tags": "其他,Arxiv", "content": "<div class=\"entry\">\r\n\r\n        \t\t\t<div class=\"textwidget\"></div>\n\t\t\r\n\t\t<div class=\"copyright-area\">本文作者： <a href=\"http://blog.jobbole.com\">伯乐在线</a> - <a href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a> 。未经作者许可，禁止转载！<br>欢迎加入伯乐在线 <a href=\"http://blog.jobbole.com/99322\" target=\"_blank\">专栏作者</a>。</div><div>\n<p>如果你非常确定自己想要找什么，比如知道论文的名字（算法的名字）或者作者的名字，直接去Google Scholar上搜索是最快的。然而如果你并不是很确定自己想要什么，只是想要看看某个领域的最新发展，知道大家都在干什么，然而却发现Google Scholar给你的结果多半不靠谱，请读下去。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520.jpg\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/500350520-1024x576.jpg\" alt=\"\" width=\"700\" height=\"394\"></a></p>\n<h3>引子</h3>\n<p>最近半年，在我身上时常发生下面这类对话：</p>\n<blockquote><p>“Hey， 你知道XXXXXXXXXXXXX问题怎么解决吗？”</p>\n<p>“哦，我刚好读过两篇相关的论文，等下发给你。”</p>\n<p>……</p></blockquote>\n<p>尴尬的沉默，一般来说拿到文章之后对方就再也不会来找我了，虽然我是真心的想要交流，然而有一些好学的孩子会接着问：</p>\n<blockquote><p>“你的论文是哪里找到的呢？”</p></blockquote>\n<p>鉴于论文背景不同，我会丢一个链接过去——这个链接（网站）在大部分数学/物理/计算机/统计领域里面，都是<a href=\"https://arxiv.org/\">https://arxiv.org/</a>。</p>\n<h3>Arxiv是什么</h3>\n<p>arxiv设计的初衷是一群物理学家们想要交流自己将要发表的论文，可以想象一下，在上世纪九十年代，人们用的还是软盘（包括5.25吋软盘和3.5寸什么的，存储空间可以说以KB计算），邮箱也不例外，投稿高峰期分分钟几百个KB的邮箱就会被文章塞满。Paul Ginsparg一看这不行，论文如果想要很好的被分享并审核，大约是需要集中存储的，就在1991年于LANL（<a href=\"http://www.lanl.gov/\">http://www.lanl.gov/ </a>洛斯阿拉莫斯国家实验室）建立了arxiv的雏形，如下图所示。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/1-Arxiv.png\" alt=\"\" width=\"941\" height=\"504\"></a></p>\n<p>当时有个萌萌的域名：<a href=\"http://xxx.lanl.gov/\">http://xxx.lanl.gov/</a> ，到现在也可以被访问。不过由于LANL作为一个严谨的科学实验室实在是懒得运营这个网站，后来就被康奈尔大学接管支持。</p>\n<p>然而，今天当我们谈到arxiv，就不能不说Open Access【开放获取】。 我们都知道，以前看文章是要钱的，直到今天，看大部分的文章也是要钱的。如下图所示，看一篇Nature一般要20美元，折合100多人民币。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/2-Open-Access.png\" alt=\"\" width=\"941\" height=\"727\"></a></p>\n<p>这个价格吧，说贵不贵说便宜不便宜，在大部分有钱公司和牛逼学校买个site license或者报个销都是不成问题的，但是对那些有科研兴趣的个人或者是那些落后地区的学校，就很成问题了。像马拉维啊中非啊这种国家，到2016年，官方数据中人均GDP才400美刀（大约20篇文章），你让人家怎么玩嘛。难道要让知识像财富一样集中在少数人手里么？</p>\n<p>就好像我们一直希望互联网拥有中立性（电信运营商、有线电视公司等互联网服务提供商应当平等地对待所有通过他们网络的流量，网络服务提供商有区别地对待不同的流量可能会使大公司能够限制消费者的自由）一样，我们并不希望因为钱而阻挡了知识的传播。 所以，我们有了<a href=\"http://www.budapestopenaccessinitiative.org/read\">布达佩斯宣言</a>:</p>\n<blockquote><p>There are many degrees and kinds of wider and easier access to this literature. By ‘open access’ to this literature, we mean its free availability on the public internet, permitting any users to read, download, copy, distribute, print, search, or link to the full texts of these articles, crawl them for indexing, pass them as data to software, or use them for any other lawful purpose, without financial, legal, or technical barriers other than those inseparable from gaining access to the internet itself. The only constraint on reproduction and distribution, and the only role for copyright in this domain, should be to give authors control over the integrity of their work and the right to be properly acknowledged and cited.</p></blockquote>\n<p>作为开放获取的先驱者，我们要为arxiv——这一开放获取的先驱鼓掌！为我们带来的好处就是，免费！免费！免费！</p>\n<p>基于我的个人访问经验，大家如果想知道都有哪些杂志或者期刊提供免费的资源，可以参考这个列表：<a href=\"https://en.wikipedia.org/wiki/List_of_open_access_journals\">https://en.wikipedia.org/wiki/List_of_open_access_journals</a> 图中是“数学”类目下提供开放获取的期刊。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/3-mathematics.png\" alt=\"\" width=\"941\" height=\"602\"></a></p>\n<p><strong>实在找不到免费文章咋办？</strong></p>\n<p>我一般会直接发邮件问作者要，顺便聊聊自己的研究领域以及跟这篇文章相关的几个最新问题，成功率还是蛮高的，还可能交到好朋友。</p>\n<p>说到Arxiv还有一样不能不说的就是LaTex——个人认为最美的文本编辑器（或者语言？），只是从学术圈儿跳出来之后发现大家好像都懒得用，在此由于篇幅所限，不再赘述。</p>\n<h3>Arxiv有什么</h3>\n<p>由于各种历史原因，Arxiv中文献的主要研究领域还是数理哲学，包括数学/物理/计算机/统计/天文/定量生物/定量金融等领域。截止到2016年的发表量统计可以参考下面这张图。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/4-Arxiv.png\" alt=\"\" width=\"941\" height=\"481\"></a></p>\n<p>左图中是每年新提交的文章数目，右图是每年的发表量所占百分比（总和为1）， “hep-“代表高能物理学，(hep-th+hep-ph+hep-lat+hep-ex), “cond-mat” 代表凝聚态物理学, “astro-ph” = 天体物理学, “math” 代表数学, “other physics” 表示物理学的其他领域（ physics+nucl+gr-qc+quant-ph+nlin） “biology” 指的是量化生物学，“finance” 指的是量化金融，“cs”指的是计算机科学。</p>\n<p>我们可以看到，在2002年之前，计算机科学领域的占比几乎可以忽略不计，然而到2016年已然占据了近五分之一，并且还在以极快的速度增长。而1992至1996年间占据了大半江山的高能物理学，到了今天地盘几乎被蚕食殆尽，只剩约10%的份额苟延残喘。沧海桑田，可见一斑。</p>\n<p>还有论文发表总量如下图：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/5-Arxiv.png\" alt=\"\" width=\"941\" height=\"427\"></a></p>\n<p>（信息来自：<a href=\"https://arxiv.org/help/stats/2016_by_area/index\">https://arxiv.org/help/stats/2016_by_area/index</a> ）</p>\n<p>从图中，我们可以清楚的发现三个事情：</p>\n<ol>\n<li>所有论文发表量都在时间轴上爆发式的增长，在上面这张历史发表总量图中体现的尤为明显；</li>\n<li>数学一家独大，不管是在年度发表量还是历史发表总量上；</li>\n<li>计算机（cs）在历史发表总量中只占了8.3%，然而2016年的提交量占了18.3%，结合提交数量图的分析，真是长势喜人、值得期待。</li>\n<li>每个月近10000篇文章提交（正式接受的会少一些，如果精准到感兴趣的垂直领域会更少）。</li>\n</ol>\n<p>那么，不想只关心数理领域的咋办？</p>\n<p>很简单，就好像任何市场一样，arxiv火了之后大批人跟风，所以我们现在有了生物学版本arxiv <a href=\"https://www.biorxiv.org/\">https://www.biorxiv.org/</a>，心理学版本arxiv <a href=\"https://psyarxiv.com/\">https://psyarxiv.com/</a> ，等等等等。当然，知识的沉淀往往需要时间，这些垂直领域的“arxiv”们到目前为止还不是非常成熟，所以我仍然建议大家结合上文提到的Open Access列表里的机构，去寻找想要的免费资源。</p>\n<h3>Arxiv怎么用</h3>\n<p>就像我在本文开头提到的那样，这个引擎最大的效果是当你并不确定自己想要什么的时候，去看看领域的最新发展，知道大家都在干什么。它最大的好处是值得信任。 当然，同样值得信任的还有很多——虽然它们大部分都要钱，针对大多数期刊们，可以按照影响因子从大往小排个序（众所周知，影响因子这个评定标准就像高考成绩一样非常片面，然而这也是目前最普遍的解决方案了），前文中提到的Nature系列和Science系列，都非常值得信任。不做赘言。</p>\n<p>很高兴的一点是，收费（还收的比较贵的）基本都是期刊，然而与其他领域尤其是生物学方向不太一样，计算机方向最顶级的往往是会议而不是期刊，而会议往往是不收费的！这里举个例子，International Conference on Machine Learning 【ICML】，机器学习方面的顶级会议之一，其中所有的文章都可以在下面的链接里找到。<a href=\"https://icml.cc/Conferences/2017/Schedule?type=Poster\">https://icml.cc/Conferences/2017/Schedule?type=Poster</a></p>\n<p>太幸福了！——这个也是我最最最推荐大家找到值得读的文章的办法：盯着领域著名会议列表刷（虽然有个缺点，就是刷到啥算啥）。</p>\n<p>但是，往往新入门的人往往没有办法靠关键字搜索【看脸】来分辨哪个期刊哪个会议才是真正有价值的。每年的会议不知凡几，我在wikiCFP上随便搜了一下人工智能，在接下来一年内仅仅这个垂直领域就有3130个会议。平心而论，有多少是真正有价值的呢？每个会议按照50篇paper来算，15万篇paper，一个人类就是不吃不睡不工作全职看一年paper，能看几篇？</p>\n<p>当然，据个人经验，关于计算机方向的会议排名，大家可以参考下面的链接 <a href=\"https://www.aminer.cn/ranks/conf\">https://www.aminer.cn/ranks/conf</a> ，我截取了AI/PR (人工智能/模式识别）领域排名靠前的一段，如下图。有想看计算机视觉的可以参考里面带”vision”的，具体会议的分析和比较将另文分析，这里不做赘言。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/6.png\" alt=\"\" width=\"941\" height=\"546\"></a></p>\n<p>但是，如果不想这样盯着列表一个一个会议慢慢看下来呢？如果就是想要找一下某个主题或者关键字呢？或者就是想要知道这个月出现了什么新算法呢？——会议可都是一年一次的。 这个时候，就是arxiv大放异彩的时候了。它给了我们一个更集中的搜索平台，而且相对来说更值得信任（反正比起来什么都可以搜索的Google Scholar，用户要筛选的噪声少了很多）。</p>\n<p>没有证据都是耍流氓？ 请点开下面这个链接 <a href=\"https://arxiv.org/list/cs.LG/recent\">https://arxiv.org/list/cs.LG/recent</a>，这是对Machine Learning领域的一个搜索。仅仅看这一页简介那些熟悉的作者名字，就知道大部分都不会让你失望的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/7.png\" alt=\"\" width=\"941\" height=\"519\"></a></p>\n<p>尽管arxiv定位是preprint，但其中也囊括了各种已经被NIPS，AAAI等等行业顶级会议接受的文章。而且，所有这些，都有直接的pdf原文可以免费下载。搜索和筛选成本都低到极致。同时，只需要点击感兴趣的作者名字，所有他发表过的文章都会被列出来（如下图中的Lei Shu），而完全不用担心其他搜索引擎中常常发生的同名同姓作者的麻烦——这一点相信搜索过中文名拼音的都深有体会——张王李赵遍天下绝对不是说说的。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/8.png\" alt=\"\" width=\"941\" height=\"585\"></a></p>\n<p>得数据库如此，夫复何求？</p>\n<p>作为对比，下面是我在Google Scholar同样搜索Machine Learning关键字得到的结果。大家可以自行体会时效性，相关度和质量。</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/9.png\" alt=\"\" width=\"941\" height=\"385\"></a></p>\n<p>当然，时效性这个可以通过点击左手边的“Sort by date”来解决，然而点击了之后是这个样子的：</p>\n<p><a href=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\"><img src=\"http://insights.thoughtworks.cn/wp-content/uploads/2018/01/10.png\" alt=\"\" width=\"941\" height=\"515\"></a></p>\n<p>——反正前面Springer家的都是要钱的，质量不提，单单是能下载的pdf也真的不常有。</p>\n<p>更重要的是，google作为跨平台老牌全网搜索引擎，看到某个关键字的时候并不会针对特殊的领域进行搜索，所以大批量主题无关的文章（不信的可以搜一下lenet，vgg这类，看看搜索结果），就会干扰搜索结果。</p>\n<p>所以，当你要找的参考文献属于数理领域尤其是AI/ML/Stat相关，而Google Scholar又没能给你满意的结果（又或者很贵），就试试看arxiv吧！</p>\n<div></div>\n</div>\n\r\n        \r\n        \r\n        \n    <div class=\"post-adds\">\n        <span data-post-id=\"113524\" class=\" btn-bluet-bigger href-style vote-post-up   register-user-only \"><i class=\"fa  fa-thumbs-o-up\"></i> <h10 id=\"113524votetotal\">2</h10> 赞</span>\n        <span data-book-type=\"1\" data-site-id=\"2\" data-item-id=\"113524\" data-item-type=\"1\" class=\" btn-bluet-bigger href-style bookmark-btn  register-user-only \"><i class=\"fa fa-bookmark-o  \"></i> 5 收藏</span>\n\n                    <a href=\"#article-comment\"><span class=\"btn-bluet-bigger href-style hide-on-480\"><i class=\"fa fa-comments-o\"></i>  评论</span></a>\n        \n        \n        \n        <!-- JiaThis Button BEGIN -->\n        <div class=\"jiathis_style_24x24\" style=\"display: inline-flex; position: relative; margin: 0; clear: both;float: right;\">\n            <a class=\"jiathis_button_tsina\"></a>\n            <a class=\"jiathis_button_weixin\"></a>\n            <a class=\"jiathis_button_qzone\"></a>\n            <a class=\"jiathis_button_fb hide-on-480\"></a>\n            <a href=\"http://www.jiathis.com/share?uid=1745061\" class=\"jiathis jiathis_txt jiathis_separator jtico jtico_jiathis\" target=\"_blank\"></a>\n        </div>\n\n    </div>\n\n\n\n\r\n        <!-- BEGIN #author-bio -->\r\n\r\n<div id=\"author-bio\">\r\n\t\r\n\t<h3 class=\"widget-title\">\r\n\t关于作者：<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">ThoughtWorks</a>\r\n\t</h3>\r\n\t<div class=\"alignleft\">\r\n\t\t<a target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina\">\r\n\t\t\t<img src=\"http://tp3.sinaimg.cn/1774908135/180/0/1\">\r\n\t\t</a>\r\n\t</div>\r\n\r\n    <div class=\"author-bio-info\">\r\n\r\n        <span class=\"author-bio-info-block\">\r\n            ThoughtWorks是一家全球IT咨询公司，追求卓越软件质量，致力于科技驱动商业变革。擅长构建定制化软件产品，帮助客户快速将概念转化为价值。同时为客户提供用户体验设计、技术战略咨询、组织转型等咨询服务。        </span>\r\n        <span class=\"author-bio-info-block\">\r\n            <a href=\"http://www.jobbole.com/members/thoughtworkschina\" target=\"_blank\"><i class=\"fa fa-user\"></i> 个人主页</a> ·\r\n            <a href=\"http://blog.jobbole.com/author/thoughtworkschina/\" target=\"_blank\"><i class=\"fa fa-file-text-o\"></i> 我的文章</a>\r\n\r\n             · <a title=\"声望值\" target=\"_blank\" href=\"http://www.jobbole.com/members/thoughtworkschina/reputation/\"><i class=\"fa fa-graduation-cap\"></i> 84</a> · <a title=\"我的网站\" target=\"_blank\" href=\"https://insights.thoughtworks.cn/\"><i class=\"fa fa-link\"></i></a> <a title=\"微博主页\" target=\"_blank\" href=\"http://weibo.com/thoughtworkschina\"><i class=\"fa fa-weibo\"></i></a>         </span>\r\n    </div>\r\n\t<div class=\"clear\"></div>\r\n</div>\r\n\r\n<!-- END #author-bio -->\r\n\t</div>", "front_image_path": "full/b6904127059aff354b12d2cb953eb7733f8d9064.jpg"}
